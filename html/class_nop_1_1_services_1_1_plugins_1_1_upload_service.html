<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NopCommerce 4.40: Referência à classe Nop.Services.Plugins.UploadService</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="download.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NopCommerce 4.40
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Gerado por Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Localizar','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Localizar');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_nop.html">Nop</a></li><li class="navelem"><a class="el" href="namespace_nop_1_1_services.html">Services</a></li><li class="navelem"><a class="el" href="namespace_nop_1_1_services_1_1_plugins.html">Plugins</a></li><li class="navelem"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html">UploadService</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Componentes</a> &#124;
<a href="#pub-types">Tipos Públicos</a> &#124;
<a href="#pub-methods">Membros públicos</a> &#124;
<a href="#pro-methods">Membros protegidos</a> &#124;
<a href="#pri-attribs">Atributos Privados</a> &#124;
<a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service-members.html">Mostrar lista completa dos membros</a>  </div>
  <div class="headertitle">
<div class="title">Referência à classe Nop.Services.Plugins.UploadService</div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents the implementation of a service for uploading application extensions (plugins or themes) and favicon and app icons  
 <a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#details">Mais...</a></p>
<div class="dynheader">
Diagrama de heranças da classe Nop.Services.Plugins.UploadService</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_nop_1_1_services_1_1_plugins_1_1_upload_service.png" usemap="#Nop.Services.Plugins.UploadService_map" alt=""/>
  <map id="Nop.Services.Plugins.UploadService_map" name="Nop.Services.Plugins.UploadService_map">
<area href="interface_nop_1_1_services_1_1_plugins_1_1_i_upload_service.html" title="Represents a service for uploading application extensions (plugins or themes) and favicon and app ico..." alt="Nop.Services.Plugins.IUploadService" shape="rect" coords="0,0,224,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Componentes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service_1_1_uploaded_item.html">UploadedItem</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Represents uploaded item (plugin or theme) details  <a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service_1_1_uploaded_item.html#details">Mais...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-types"></a>
Tipos Públicos</h2></td></tr>
<tr class="memitem:a8459548e188d9ee366d8b10a8ce22598"><td class="memItemLeft" align="right" valign="top">enum class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8459548e188d9ee366d8b10a8ce22598">UploadedItemType</a> { <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8459548e188d9ee366d8b10a8ce22598a409c1892b68cb394799262ac57f6d4f1">Plugin</a>
, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8459548e188d9ee366d8b10a8ce22598ad721757161f7f70c5b0949fdb6ec2c30">Theme</a>
 }</td></tr>
<tr class="memdesc:a8459548e188d9ee366d8b10a8ce22598"><td class="mdescLeft">&#160;</td><td class="mdescRight">Uploaded item type enumeration  <a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8459548e188d9ee366d8b10a8ce22598">Mais...</a><br /></td></tr>
<tr class="separator:a8459548e188d9ee366d8b10a8ce22598"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Membros públicos</h2></td></tr>
<tr class="memitem:aee25159aa72aa7332384de627ee01750"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#aee25159aa72aa7332384de627ee01750">UploadService</a> (<a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html">INopFileProvider</a> fileProvider, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html">IStoreContext</a> storeContext, <a class="el" href="interface_nop_1_1_services_1_1_themes_1_1_i_theme_provider.html">IThemeProvider</a> themeProvider)</td></tr>
<tr class="separator:aee25159aa72aa7332384de627ee01750"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1d9903b63be22f5e59be6ea9c204d4d"><td class="memItemLeft" align="right" valign="top">virtual IList&lt; <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_descriptor.html">IDescriptor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#af1d9903b63be22f5e59be6ea9c204d4d">UploadPluginsAndThemes</a> (IFormFile archivefile)</td></tr>
<tr class="memdesc:af1d9903b63be22f5e59be6ea9c204d4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upload plugins and/or themes  <a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#af1d9903b63be22f5e59be6ea9c204d4d">Mais...</a><br /></td></tr>
<tr class="separator:af1d9903b63be22f5e59be6ea9c204d4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06e459e2dcb3267c95b2e9c4893e72f0"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a06e459e2dcb3267c95b2e9c4893e72f0">UploadIconsArchive</a> (IFormFile archivefile)</td></tr>
<tr class="memdesc:a06e459e2dcb3267c95b2e9c4893e72f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upload favicon and app icons archive  <a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a06e459e2dcb3267c95b2e9c4893e72f0">Mais...</a><br /></td></tr>
<tr class="separator:a06e459e2dcb3267c95b2e9c4893e72f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36fc00aad73ada0c0338913044e77748"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a36fc00aad73ada0c0338913044e77748">UploadFavicon</a> (IFormFile favicon)</td></tr>
<tr class="memdesc:a36fc00aad73ada0c0338913044e77748"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upload single favicon  <a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a36fc00aad73ada0c0338913044e77748">Mais...</a><br /></td></tr>
<tr class="separator:a36fc00aad73ada0c0338913044e77748"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1622f1449a75fccabf793c40dd785ab8"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a1622f1449a75fccabf793c40dd785ab8">UploadLocalePattern</a> (CultureInfo cultureInfo=null)</td></tr>
<tr class="memdesc:a1622f1449a75fccabf793c40dd785ab8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upload locale pattern for current culture  <a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a1622f1449a75fccabf793c40dd785ab8">Mais...</a><br /></td></tr>
<tr class="separator:a1622f1449a75fccabf793c40dd785ab8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Membros protegidos</h2></td></tr>
<tr class="memitem:a8a7e891450a785e53b6a02cd0081cd28"><td class="memItemLeft" align="right" valign="top">virtual IList&lt; <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service_1_1_uploaded_item.html">UploadedItem</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8a7e891450a785e53b6a02cd0081cd28">GetUploadedItems</a> (string archivePath)</td></tr>
<tr class="memdesc:a8a7e891450a785e53b6a02cd0081cd28"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get information about the uploaded items in the archive  <a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8a7e891450a785e53b6a02cd0081cd28">Mais...</a><br /></td></tr>
<tr class="separator:a8a7e891450a785e53b6a02cd0081cd28"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d23f7c5b9e56a8134cd4591153dec14"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_descriptor.html">IDescriptor</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a7d23f7c5b9e56a8134cd4591153dec14">UploadSingleItem</a> (string archivePath)</td></tr>
<tr class="memdesc:a7d23f7c5b9e56a8134cd4591153dec14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upload single item from the archive into the physical directory  <a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a7d23f7c5b9e56a8134cd4591153dec14">Mais...</a><br /></td></tr>
<tr class="separator:a7d23f7c5b9e56a8134cd4591153dec14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af439ca5e3a59969e89365d0d8b5f53c1"><td class="memItemLeft" align="right" valign="top">virtual IList&lt; <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_descriptor.html">IDescriptor</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#af439ca5e3a59969e89365d0d8b5f53c1">UploadMultipleItems</a> (string archivePath, IList&lt; <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service_1_1_uploaded_item.html">UploadedItem</a> &gt; uploadedItems)</td></tr>
<tr class="memdesc:af439ca5e3a59969e89365d0d8b5f53c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Upload multiple items from the archive into the physical directory  <a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#af439ca5e3a59969e89365d0d8b5f53c1">Mais...</a><br /></td></tr>
<tr class="separator:af439ca5e3a59969e89365d0d8b5f53c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84a5ced7151019e81442994b71af360a"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a84a5ced7151019e81442994b71af360a">CreateDirectory</a> (string path)</td></tr>
<tr class="memdesc:a84a5ced7151019e81442994b71af360a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates the directory if not exist; otherwise deletes and creates directory  <a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a84a5ced7151019e81442994b71af360a">Mais...</a><br /></td></tr>
<tr class="separator:a84a5ced7151019e81442994b71af360a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Atributos Privados</h2></td></tr>
<tr class="memitem:acaebed45acc9c30d759a2c9d5b7da511"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html">INopFileProvider</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a></td></tr>
<tr class="separator:acaebed45acc9c30d759a2c9d5b7da511"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcd5507764b721b294954f555aa06363"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html">IStoreContext</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#adcd5507764b721b294954f555aa06363">_storeContext</a></td></tr>
<tr class="separator:adcd5507764b721b294954f555aa06363"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a832134e6c74903d23c7ef8f1e9827c1e"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_themes_1_1_i_theme_provider.html">IThemeProvider</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a832134e6c74903d23c7ef8f1e9827c1e">_themeProvider</a></td></tr>
<tr class="separator:a832134e6c74903d23c7ef8f1e9827c1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descrição detalhada</h2>
<div class="textblock"><p>Represents the implementation of a service for uploading application extensions (plugins or themes) and favicon and app icons </p>
</div><h2 class="groupheader">Documentação das enumerações</h2>
<a id="a8459548e188d9ee366d8b10a8ce22598"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8459548e188d9ee366d8b10a8ce22598">&#9670;&nbsp;</a></span>UploadedItemType</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8459548e188d9ee366d8b10a8ce22598">Nop.Services.Plugins.UploadService.UploadedItemType</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">strong</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Uploaded item type enumeration </p>
<table class="fieldtable">
<tr><th colspan="2">Valores de enumerações</th></tr><tr><td class="fieldname"><a id="a8459548e188d9ee366d8b10a8ce22598a409c1892b68cb394799262ac57f6d4f1"></a>Plugin&#160;</td><td class="fielddoc"><p><a class="el" href="namespace_nop_1_1_plugin.html">Plugin</a> </p>
</td></tr>
<tr><td class="fieldname"><a id="a8459548e188d9ee366d8b10a8ce22598ad721757161f7f70c5b0949fdb6ec2c30"></a>Theme&#160;</td><td class="fielddoc"><p>Theme </p>
</td></tr>
</table>
<div class="fragment"><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        {</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            [EnumMember(<a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#ae81f2364e2d171b827c01c1105f2be5f">Value</a> = <span class="stringliteral">&quot;Plugin&quot;</span>)]</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            Plugin,</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160; </div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            [EnumMember(<a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#ae81f2364e2d171b827c01c1105f2be5f">Value</a> = <span class="stringliteral">&quot;Theme&quot;</span>)]</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            Theme</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        }</div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog_html_ae81f2364e2d171b827c01c1105f2be5f"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#ae81f2364e2d171b827c01c1105f2be5f">Nop.Web.Areas.Admin.Models.Catalog.Value</a></div><div class="ttdeci">string Value</div><div class="ttdef"><b>Definition:</b> AddSpecificationAttributeLocalizedModel.cs:17</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Documentação dos Construtores &amp; Destrutor</h2>
<a id="aee25159aa72aa7332384de627ee01750"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee25159aa72aa7332384de627ee01750">&#9670;&nbsp;</a></span>UploadService()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Nop.Services.Plugins.UploadService.UploadService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html">INopFileProvider</a>&#160;</td>
          <td class="paramname"><em>fileProvider</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html">IStoreContext</a>&#160;</td>
          <td class="paramname"><em>storeContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_themes_1_1_i_theme_provider.html">IThemeProvider</a>&#160;</td>
          <td class="paramname"><em>themeProvider</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;        {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a> = fileProvider;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#adcd5507764b721b294954f555aa06363">_storeContext</a> = storeContext;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a832134e6c74903d23c7ef8f1e9827c1e">_themeProvider</a> = themeProvider;</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_plugins_1_1_upload_service_html_a832134e6c74903d23c7ef8f1e9827c1e"><div class="ttname"><a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a832134e6c74903d23c7ef8f1e9827c1e">Nop.Services.Plugins.UploadService._themeProvider</a></div><div class="ttdeci">readonly IThemeProvider _themeProvider</div><div class="ttdef"><b>Definition:</b> UploadService.cs:27</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_plugins_1_1_upload_service_html_acaebed45acc9c30d759a2c9d5b7da511"><div class="ttname"><a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">Nop.Services.Plugins.UploadService._fileProvider</a></div><div class="ttdeci">readonly INopFileProvider _fileProvider</div><div class="ttdef"><b>Definition:</b> UploadService.cs:25</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_plugins_1_1_upload_service_html_adcd5507764b721b294954f555aa06363"><div class="ttname"><a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#adcd5507764b721b294954f555aa06363">Nop.Services.Plugins.UploadService._storeContext</a></div><div class="ttdeci">readonly IStoreContext _storeContext</div><div class="ttdef"><b>Definition:</b> UploadService.cs:26</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">Nop.Services.Plugins.UploadService._fileProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#adcd5507764b721b294954f555aa06363">Nop.Services.Plugins.UploadService._storeContext</a> e <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a832134e6c74903d23c7ef8f1e9827c1e">Nop.Services.Plugins.UploadService._themeProvider</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentação dos métodos</h2>
<a id="a84a5ced7151019e81442994b71af360a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84a5ced7151019e81442994b71af360a">&#9670;&nbsp;</a></span>CreateDirectory()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Nop.Services.Plugins.UploadService.CreateDirectory </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates the directory if not exist; otherwise deletes and creates directory </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td></td></tr>
  </table>
  </dd>
</dl>
<div class="fragment"><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <span class="comment">//if the folder does not exist, create it</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="comment">//if the folder is already there - we delete it (since the pictures in the folder are in the unpacked version, there will be many files and it is easier for us to delete the folder than to delete all the files one by one) and create a new</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">DirectoryExists</a>(path))</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;            {</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a032032ebb97005bfe245328dff130d91">CreateDirectory</a>(path);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            }</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a999a5548682c2c99ff60c5919378f41f">DeleteDirectory</a>(path);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a032032ebb97005bfe245328dff130d91">CreateDirectory</a>(path);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider_html_a032032ebb97005bfe245328dff130d91"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a032032ebb97005bfe245328dff130d91">Nop.Core.Infrastructure.INopFileProvider.CreateDirectory</a></div><div class="ttdeci">void CreateDirectory(string path)</div><div class="ttdoc">Creates all directories and subdirectories in the specified path unless they already exist</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider_html_a6469e615754f5a836386ae06eae2a475"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">Nop.Core.Infrastructure.INopFileProvider.DirectoryExists</a></div><div class="ttdeci">bool DirectoryExists(string path)</div><div class="ttdoc">Determines whether the given path refers to an existing directory on disk</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider_html_a999a5548682c2c99ff60c5919378f41f"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a999a5548682c2c99ff60c5919378f41f">Nop.Core.Infrastructure.INopFileProvider.DeleteDirectory</a></div><div class="ttdeci">void DeleteDirectory(string path)</div><div class="ttdoc">Depth-first recursive delete, with handling for descendant directories open in Windows Explorer.</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">Nop.Services.Plugins.UploadService._fileProvider</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a032032ebb97005bfe245328dff130d91">Nop.Core.Infrastructure.INopFileProvider.CreateDirectory()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a999a5548682c2c99ff60c5919378f41f">Nop.Core.Infrastructure.INopFileProvider.DeleteDirectory()</a> e <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">Nop.Core.Infrastructure.INopFileProvider.DirectoryExists()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a36fc00aad73ada0c0338913044e77748">Nop.Services.Plugins.UploadService.UploadFavicon()</a> e <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a06e459e2dcb3267c95b2e9c4893e72f0">Nop.Services.Plugins.UploadService.UploadIconsArchive()</a>.</p>

</div>
</div>
<a id="a8a7e891450a785e53b6a02cd0081cd28"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a7e891450a785e53b6a02cd0081cd28">&#9670;&nbsp;</a></span>GetUploadedItems()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual IList&lt;<a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service_1_1_uploaded_item.html">UploadedItem</a>&gt; Nop.Services.Plugins.UploadService.GetUploadedItems </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>archivePath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get information about the uploaded items in the archive </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">archivePath</td><td>Path to the archive</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>List of an uploaded item</dd></dl>
<div class="fragment"><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;        {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            <span class="keyword">using</span> var archive = ZipFile.OpenRead(archivePath);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            <span class="comment">//try to get the entry containing information about the uploaded items </span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            var uploadedItemsFileEntry = archive.Entries</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;                .FirstOrDefault(entry =&gt; entry.Name.Equals(NopPluginDefaults.UploadedItemsFileName, StringComparison.InvariantCultureIgnoreCase)</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;                    &amp;&amp; <span class="keywordtype">string</span>.IsNullOrEmpty(<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a64e81d81f521908bc88a547e760f2841">GetDirectoryName</a>(entry.FullName)));</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <span class="keywordflow">if</span> (uploadedItemsFileEntry == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160; </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            <span class="comment">//read the content of this entry if exists</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            <span class="keyword">using</span> var unzippedEntryStream = uploadedItemsFileEntry.Open();</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;            <span class="keyword">using</span> var reader = <span class="keyword">new</span> StreamReader(unzippedEntryStream);</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="keywordflow">return</span> JsonConvert.DeserializeObject&lt;IList&lt;UploadedItem&gt;&gt;(reader.ReadToEnd());</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider_html_a64e81d81f521908bc88a547e760f2841"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a64e81d81f521908bc88a547e760f2841">Nop.Core.Infrastructure.INopFileProvider.GetDirectoryName</a></div><div class="ttdeci">string GetDirectoryName(string path)</div><div class="ttdoc">Returns the directory information for the specified path string</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">Nop.Services.Plugins.UploadService._fileProvider</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a64e81d81f521908bc88a547e760f2841">Nop.Core.Infrastructure.INopFileProvider.GetDirectoryName()</a> e <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_nop_plugin_defaults.html#abdfa9302c751d4246e44eed91196bbd3">Nop.Services.Plugins.NopPluginDefaults.UploadedItemsFileName</a>.</p>

</div>
</div>
<a id="a36fc00aad73ada0c0338913044e77748"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36fc00aad73ada0c0338913044e77748">&#9670;&nbsp;</a></span>UploadFavicon()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Nop.Services.Plugins.UploadService.UploadFavicon </td>
          <td>(</td>
          <td class="paramtype">IFormFile&#160;</td>
          <td class="paramname"><em>favicon</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upload single favicon </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">favicon</td><td>Favicon</td></tr>
  </table>
  </dd>
</dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_upload_service.html#af26979c67e776ba0b6ec59fcbf5e4520">Nop.Services.Plugins.IUploadService</a>.</p>
<div class="fragment"><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;        {</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">if</span> (favicon == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(favicon));</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160; </div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="comment">//only icons are supported</span></div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3f9f665eb57833331c00ce029105caa3">GetFileExtension</a>(favicon.FileName)?.Equals(<span class="stringliteral">&quot;.ico&quot;</span>, StringComparison.InvariantCultureIgnoreCase) ?? <span class="keyword">true</span>)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Only icons are supported (*.ico)&quot;</span>);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160; </div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;            <span class="comment">//check if there is a folder for favicon (favicon folder is in wwwroot/icons and is called icons_{storeId})</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            var storeFaviconPath = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a40d3551889d1555644f86d44cb3f527b">GetAbsolutePath</a>(<span class="keywordtype">string</span>.Format(<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">NopCommonDefaults</a>.<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a2617e28003041a47c05570bbe0e62031">FaviconAndAppIconsPath</a>, <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#adcd5507764b721b294954f555aa06363">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#a2f0cd435a701d6a47e548e6f1530f599">GetActiveStoreScopeConfigurationAsync</a>().Result));</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160; </div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a84a5ced7151019e81442994b71af360a">CreateDirectory</a>(storeFaviconPath);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160; </div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            var faviconPath = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Combine</a>(storeFaviconPath, favicon.FileName);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keyword">using</span> var fileStream = <span class="keyword">new</span> FileStream(faviconPath, FileMode.Create);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            favicon.CopyTo(fileStream);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_common_1_1_nop_common_defaults_html"><div class="ttname"><a href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">Nop.Services.Common.NopCommonDefaults</a></div><div class="ttdoc">Represents default values related to common services</div><div class="ttdef"><b>Definition:</b> NopCommonDefaults.cs:9</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_common_1_1_nop_common_defaults_html_a2617e28003041a47c05570bbe0e62031"><div class="ttname"><a href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a2617e28003041a47c05570bbe0e62031">Nop.Services.Common.NopCommonDefaults.FaviconAndAppIconsPath</a></div><div class="ttdeci">static string FaviconAndAppIconsPath</div><div class="ttdoc">Gets a path to the favicon and app icons</div><div class="ttdef"><b>Definition:</b> NopCommonDefaults.cs:61</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_plugins_1_1_upload_service_html_a84a5ced7151019e81442994b71af360a"><div class="ttname"><a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a84a5ced7151019e81442994b71af360a">Nop.Services.Plugins.UploadService.CreateDirectory</a></div><div class="ttdeci">virtual void CreateDirectory(string path)</div><div class="ttdoc">Creates the directory if not exist; otherwise deletes and creates directory</div><div class="ttdef"><b>Definition:</b> UploadService.cs:272</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_i_store_context_html_a2f0cd435a701d6a47e548e6f1530f599"><div class="ttname"><a href="interface_nop_1_1_core_1_1_i_store_context.html#a2f0cd435a701d6a47e548e6f1530f599">Nop.Core.IStoreContext.GetActiveStoreScopeConfigurationAsync</a></div><div class="ttdeci">Task&lt; int &gt; GetActiveStoreScopeConfigurationAsync()</div><div class="ttdoc">Gets active store scope configuration</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider_html_a3bc640cd31b3594d06f387eb209491be"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Nop.Core.Infrastructure.INopFileProvider.Combine</a></div><div class="ttdeci">string Combine(params string[] paths)</div><div class="ttdoc">Combines an array of strings into a path</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider_html_a3f9f665eb57833331c00ce029105caa3"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3f9f665eb57833331c00ce029105caa3">Nop.Core.Infrastructure.INopFileProvider.GetFileExtension</a></div><div class="ttdeci">string GetFileExtension(string filePath)</div><div class="ttdoc">Returns the extension of the specified path string</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider_html_a40d3551889d1555644f86d44cb3f527b"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a40d3551889d1555644f86d44cb3f527b">Nop.Core.Infrastructure.INopFileProvider.GetAbsolutePath</a></div><div class="ttdeci">string GetAbsolutePath(params string[] paths)</div><div class="ttdoc">Returns the absolute path to the directory</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">Nop.Services.Plugins.UploadService._fileProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#adcd5507764b721b294954f555aa06363">Nop.Services.Plugins.UploadService._storeContext</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Nop.Core.Infrastructure.INopFileProvider.Combine()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a84a5ced7151019e81442994b71af360a">Nop.Services.Plugins.UploadService.CreateDirectory()</a>, <a class="el" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a2617e28003041a47c05570bbe0e62031">Nop.Services.Common.NopCommonDefaults.FaviconAndAppIconsPath</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a40d3551889d1555644f86d44cb3f527b">Nop.Core.Infrastructure.INopFileProvider.GetAbsolutePath()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#a2f0cd435a701d6a47e548e6f1530f599">Nop.Core.IStoreContext.GetActiveStoreScopeConfigurationAsync()</a> e <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3f9f665eb57833331c00ce029105caa3">Nop.Core.Infrastructure.INopFileProvider.GetFileExtension()</a>.</p>

</div>
</div>
<a id="a06e459e2dcb3267c95b2e9c4893e72f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06e459e2dcb3267c95b2e9c4893e72f0">&#9670;&nbsp;</a></span>UploadIconsArchive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Nop.Services.Plugins.UploadService.UploadIconsArchive </td>
          <td>(</td>
          <td class="paramtype">IFormFile&#160;</td>
          <td class="paramname"><em>archivefile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upload favicon and app icons archive </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">archivefile</td><td>Archive file which contains a set of special icons for different OS and devices</td></tr>
  </table>
  </dd>
</dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_upload_service.html#a47788e3ae0f204147ac26b4549b44e7c">Nop.Services.Plugins.IUploadService</a>.</p>
<div class="fragment"><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            <span class="keywordflow">if</span> (archivefile == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(archivefile));</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160; </div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            var zipFilePath = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            {</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="comment">//only zip archives are supported</span></div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3f9f665eb57833331c00ce029105caa3">GetFileExtension</a>(archivefile.FileName)?.Equals(<span class="stringliteral">&quot;.zip&quot;</span>, StringComparison.InvariantCultureIgnoreCase) ?? <span class="keyword">true</span>)</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Only zip archives are supported (*.zip)&quot;</span>);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160; </div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                <span class="comment">//check if there is a folder for favicon and app icons for the current store (all store icons folders are in wwwroot/icons and are called icons_{storeId})</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                var storeIconsPath = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a40d3551889d1555644f86d44cb3f527b">GetAbsolutePath</a>(<span class="keywordtype">string</span>.Format(<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">NopCommonDefaults</a>.<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a2617e28003041a47c05570bbe0e62031">FaviconAndAppIconsPath</a>, <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#adcd5507764b721b294954f555aa06363">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#a2f0cd435a701d6a47e548e6f1530f599">GetActiveStoreScopeConfigurationAsync</a>().Result));</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160; </div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a84a5ced7151019e81442994b71af360a">CreateDirectory</a>(storeIconsPath);</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                zipFilePath = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Combine</a>(storeIconsPath, archivefile.FileName);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="keyword">using</span> (var fileStream = <span class="keyword">new</span> FileStream(zipFilePath, FileMode.Create))</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                    archivefile.CopyTo(fileStream);</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                ZipFile.ExtractToDirectory(zipFilePath, storeIconsPath);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            }</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordflow">finally</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            {</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                <span class="comment">//delete the zip file and leave only unpacked files in the folder</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrEmpty(zipFilePath))</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                    <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3c80d781f90016898b9359c74876ff68">DeleteFile</a>(zipFilePath);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;            }</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider_html_a3c80d781f90016898b9359c74876ff68"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3c80d781f90016898b9359c74876ff68">Nop.Core.Infrastructure.INopFileProvider.DeleteFile</a></div><div class="ttdeci">void DeleteFile(string filePath)</div><div class="ttdoc">Deletes the specified file</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">Nop.Services.Plugins.UploadService._fileProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#adcd5507764b721b294954f555aa06363">Nop.Services.Plugins.UploadService._storeContext</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Nop.Core.Infrastructure.INopFileProvider.Combine()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a84a5ced7151019e81442994b71af360a">Nop.Services.Plugins.UploadService.CreateDirectory()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3c80d781f90016898b9359c74876ff68">Nop.Core.Infrastructure.INopFileProvider.DeleteFile()</a>, <a class="el" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a2617e28003041a47c05570bbe0e62031">Nop.Services.Common.NopCommonDefaults.FaviconAndAppIconsPath</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a40d3551889d1555644f86d44cb3f527b">Nop.Core.Infrastructure.INopFileProvider.GetAbsolutePath()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#a2f0cd435a701d6a47e548e6f1530f599">Nop.Core.IStoreContext.GetActiveStoreScopeConfigurationAsync()</a> e <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3f9f665eb57833331c00ce029105caa3">Nop.Core.Infrastructure.INopFileProvider.GetFileExtension()</a>.</p>

</div>
</div>
<a id="a1622f1449a75fccabf793c40dd785ab8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1622f1449a75fccabf793c40dd785ab8">&#9670;&nbsp;</a></span>UploadLocalePattern()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Nop.Services.Plugins.UploadService.UploadLocalePattern </td>
          <td>(</td>
          <td class="paramtype">CultureInfo&#160;</td>
          <td class="paramname"><em>cultureInfo</em> = <code>null</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upload locale pattern for current culture </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">cultureInfo</td><td>CultureInfo</td></tr>
  </table>
  </dd>
</dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_upload_service.html#a19d5014d4ca8651eb3f4fe5481f0dd53">Nop.Services.Plugins.IUploadService</a>.</p>
<div class="fragment"><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        {</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;            <span class="keywordtype">string</span> getPath(<span class="keywordtype">string</span> dirPath, <span class="keywordtype">string</span> dirName)</div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;            {</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a40d3551889d1555644f86d44cb3f527b">GetAbsolutePath</a>(<span class="keywordtype">string</span>.Format(dirPath, dirName));</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;            }</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160; </div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="keywordtype">bool</span> checkDirectoryExists(<span class="keywordtype">string</span> dirPath, <span class="keywordtype">string</span> dirName)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;            {</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">DirectoryExists</a>(getPath(dirPath, dirName));</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            }</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160; </div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            var tempFolder = <span class="stringliteral">&quot;temp&quot;</span>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            {</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="comment">//1. check if the archive with localization of templates is in its place</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                var ziplocalePatternPath = getPath(<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">NopCommonDefaults</a>.<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a3d886b536433a51c171ad7ad21f045a7">LocalePatternPath</a>, <a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">NopCommonDefaults</a>.<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a5de671b29e0dba816d9d9f75cbf915d2">LocalePatternArchiveName</a>);</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3f9f665eb57833331c00ce029105caa3">GetFileExtension</a>(ziplocalePatternPath)?.Equals(<span class="stringliteral">&quot;.zip&quot;</span>, StringComparison.InvariantCultureIgnoreCase) ?? <span class="keyword">true</span>)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception($<span class="stringliteral">&quot;Archive &#39;{NopCommonDefaults.LocalePatternArchiveName}&#39; to retrieve localization patterns not found.&quot;</span>);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                var currentCulture = (cultureInfo is CultureInfo) ? cultureInfo : CultureInfo.CurrentCulture;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                <span class="comment">//2. Check if there is already an unpacked folder with locales for the current culture in the lib directory, if not then</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a4cf4e33536c481efb4671a4518aa4c4e">if</a> (!(checkDirectoryExists(<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">NopCommonDefaults</a>.<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a3d886b536433a51c171ad7ad21f045a7">LocalePatternPath</a>, currentCulture.Name) ||</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                    checkDirectoryExists(<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">NopCommonDefaults</a>.<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a3d886b536433a51c171ad7ad21f045a7">LocalePatternPath</a>, currentCulture.TwoLetterISOLanguageName)))</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                    var cultureToUse = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160; </div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    <span class="comment">//3. Unpack the archive into a temporary folder</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                    ZipFile.ExtractToDirectory(ziplocalePatternPath, getPath(<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">NopCommonDefaults</a>.<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a3d886b536433a51c171ad7ad21f045a7">LocalePatternPath</a>, tempFolder));</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                    <span class="comment">//4. Search in the temp unpacked archive a folder with locales by culture</span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                    var sourcelocalePath = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Combine</a>(getPath(<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">NopCommonDefaults</a>.<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a3d886b536433a51c171ad7ad21f045a7">LocalePatternPath</a>, tempFolder), currentCulture.Name);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">DirectoryExists</a>(sourcelocalePath))</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                    {</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                        cultureToUse = currentCulture.Name;</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                    }</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160; </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    var sourcelocaleISOPath = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Combine</a>(getPath(<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">NopCommonDefaults</a>.<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a3d886b536433a51c171ad7ad21f045a7">LocalePatternPath</a>, tempFolder), currentCulture.TwoLetterISOLanguageName);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">DirectoryExists</a>(sourcelocaleISOPath))</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                    {</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                        cultureToUse = currentCulture.TwoLetterISOLanguageName;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                        sourcelocalePath = sourcelocaleISOPath;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                    }</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                    <span class="comment">//5. Copy locales to destination folder</span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                    <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrEmpty(cultureToUse))</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;                    {</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                        var destlocalePath = getPath(<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">NopCommonDefaults</a>.<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a3d886b536433a51c171ad7ad21f045a7">LocalePatternPath</a>, cultureToUse);</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;                        <span class="keywordflow">if</span> (<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">DirectoryExists</a>(destlocalePath))</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;                        {</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;                            <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a999a5548682c2c99ff60c5919378f41f">DeleteDirectory</a>(destlocalePath);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;                        }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160; </div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;                        <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a218fd418fd8789b49c7443e27782f03d">DirectoryMove</a>(sourcelocalePath, destlocalePath);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;                    }</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;                }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            }</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">finally</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;            {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                <span class="comment">//6. delete the zip file and leave only unpacked files in the folder</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                <span class="keywordflow">if</span> (checkDirectoryExists(<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">NopCommonDefaults</a>.<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a3d886b536433a51c171ad7ad21f045a7">LocalePatternPath</a>, tempFolder))</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                    <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a999a5548682c2c99ff60c5919378f41f">DeleteDirectory</a>(getPath(<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html">NopCommonDefaults</a>.<a class="code" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a3d886b536433a51c171ad7ad21f045a7">LocalePatternPath</a>, tempFolder));</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            }</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_common_1_1_nop_common_defaults_html_a3d886b536433a51c171ad7ad21f045a7"><div class="ttname"><a href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a3d886b536433a51c171ad7ad21f045a7">Nop.Services.Common.NopCommonDefaults.LocalePatternPath</a></div><div class="ttdeci">static string LocalePatternPath</div><div class="ttdoc">Gets a path to the localization client-side validation</div><div class="ttdef"><b>Definition:</b> NopCommonDefaults.cs:75</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_common_1_1_nop_common_defaults_html_a5de671b29e0dba816d9d9f75cbf915d2"><div class="ttname"><a href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a5de671b29e0dba816d9d9f75cbf915d2">Nop.Services.Common.NopCommonDefaults.LocalePatternArchiveName</a></div><div class="ttdeci">static string LocalePatternArchiveName</div><div class="ttdoc">Gets a name of the archive with localization of templates</div><div class="ttdef"><b>Definition:</b> NopCommonDefaults.cs:80</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider_html_a218fd418fd8789b49c7443e27782f03d"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a218fd418fd8789b49c7443e27782f03d">Nop.Core.Infrastructure.INopFileProvider.DirectoryMove</a></div><div class="ttdeci">void DirectoryMove(string sourceDirName, string destDirName)</div><div class="ttdoc">Moves a file or a directory and its contents to a new location</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_models_1_1_blogs_html_a4cf4e33536c481efb4671a4518aa4c4e"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a4cf4e33536c481efb4671a4518aa4c4e">Nop.Web.Models.Blogs.if</a></div><div class="ttdeci">if(!string.IsNullOrEmpty(Month))</div><div class="ttdef"><b>Definition:</b> BlogPagingFilteringModel.cs:13</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">Nop.Services.Plugins.UploadService._fileProvider</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Nop.Core.Infrastructure.INopFileProvider.Combine()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a999a5548682c2c99ff60c5919378f41f">Nop.Core.Infrastructure.INopFileProvider.DeleteDirectory()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">Nop.Core.Infrastructure.INopFileProvider.DirectoryExists()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a218fd418fd8789b49c7443e27782f03d">Nop.Core.Infrastructure.INopFileProvider.DirectoryMove()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a40d3551889d1555644f86d44cb3f527b">Nop.Core.Infrastructure.INopFileProvider.GetAbsolutePath()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3f9f665eb57833331c00ce029105caa3">Nop.Core.Infrastructure.INopFileProvider.GetFileExtension()</a>, <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a4cf4e33536c481efb4671a4518aa4c4e">Nop.Web.Models.Blogs.if()</a>, <a class="el" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a5de671b29e0dba816d9d9f75cbf915d2">Nop.Services.Common.NopCommonDefaults.LocalePatternArchiveName</a> e <a class="el" href="class_nop_1_1_services_1_1_common_1_1_nop_common_defaults.html#a3d886b536433a51c171ad7ad21f045a7">Nop.Services.Common.NopCommonDefaults.LocalePatternPath</a>.</p>

</div>
</div>
<a id="af439ca5e3a59969e89365d0d8b5f53c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af439ca5e3a59969e89365d0d8b5f53c1">&#9670;&nbsp;</a></span>UploadMultipleItems()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual IList&lt;<a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_descriptor.html">IDescriptor</a>&gt; Nop.Services.Plugins.UploadService.UploadMultipleItems </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>archivePath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IList&lt; <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service_1_1_uploaded_item.html">UploadedItem</a> &gt;&#160;</td>
          <td class="paramname"><em>uploadedItems</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upload multiple items from the archive into the physical directory </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">archivePath</td><td>Path to the archive</td></tr>
    <tr><td class="paramname">uploadedItems</td><td>Uploaded items</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>List of uploaded items descriptor</dd></dl>
<div class="fragment"><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="comment">//get path to the plugins directory</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            var pluginsDirectory = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#aa8325219f308567a404dc473c2cf8f3a">MapPath</a>(NopPluginDefaults.Path);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="comment">//get path to the themes directory</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            var themesDirectory = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrEmpty(NopPluginDefaults.ThemesPath))</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                themesDirectory = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#aa8325219f308567a404dc473c2cf8f3a">MapPath</a>(NopPluginDefaults.ThemesPath);</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160; </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="comment">//get descriptors of items contained in the archive</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            var descriptors = <span class="keyword">new</span> List&lt;IDescriptor&gt;();</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keyword">using</span> (var archive = ZipFile.OpenRead(archivePath))</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;            {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                <span class="keywordflow">foreach</span> (var item <span class="keywordflow">in</span> uploadedItems)</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                {</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                    <span class="keywordflow">if</span> (!item.Type.HasValue)</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160; </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                    <span class="comment">//ensure that the current version of nopCommerce is supported</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                    <span class="keywordflow">if</span> (!item.SupportedVersions?.Contains(<a class="code" href="class_nop_1_1_core_1_1_nop_version.html">NopVersion</a>.<a class="code" href="class_nop_1_1_core_1_1_nop_version.html#a639f42a8e4c2e1a882b0ddb9fcd29d43">CURRENT_VERSION</a>) ?? <span class="keyword">true</span>)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                    <span class="comment">//the item path should end with a slash</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    var itemPath = $<span class="stringliteral">&quot;{item.DirectoryPath?.TrimEnd(&#39;/&#39;)}/&quot;</span>;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                    <span class="comment">//get path to the descriptor entry in the archive</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    var descriptorPath = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    <span class="keywordflow">if</span> (item.Type == <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8459548e188d9ee366d8b10a8ce22598">UploadedItemType</a>.Plugin)</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                        descriptorPath = $<span class="stringliteral">&quot;{itemPath}{NopPluginDefaults.DescriptionFileName}&quot;</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    <span class="keywordflow">if</span> (item.Type == <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8459548e188d9ee366d8b10a8ce22598">UploadedItemType</a>.Theme &amp;&amp; !<span class="keywordtype">string</span>.IsNullOrEmpty(NopPluginDefaults.ThemeDescriptionFileName))</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                        descriptorPath = $<span class="stringliteral">&quot;{itemPath}{NopPluginDefaults.ThemeDescriptionFileName}&quot;</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    <span class="comment">//try to get the descriptor entry</span></div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    var descriptorEntry = archive.Entries.FirstOrDefault(entry =&gt; entry.FullName.Equals(descriptorPath, StringComparison.InvariantCultureIgnoreCase));</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    <span class="keywordflow">if</span> (descriptorEntry == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                    <span class="comment">//try to get descriptor of the uploaded item</span></div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    IDescriptor descriptor = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                    <span class="keyword">using</span> (var unzippedEntryStream = descriptorEntry.Open())</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    {</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                        <span class="keyword">using</span> var reader = <span class="keyword">new</span> StreamReader(unzippedEntryStream);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                        <span class="comment">//whether a plugin is upload </span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                        <span class="keywordflow">if</span> (item.Type == <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8459548e188d9ee366d8b10a8ce22598">UploadedItemType</a>.Plugin)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                            descriptor = PluginDescriptor.GetPluginDescriptorFromText(reader.ReadToEnd());</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160; </div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                        <span class="comment">//or whether a theme is upload </span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                        <span class="keywordflow">if</span> (item.Type == <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8459548e188d9ee366d8b10a8ce22598">UploadedItemType</a>.Theme)</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                            descriptor = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a832134e6c74903d23c7ef8f1e9827c1e">_themeProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_themes_1_1_i_theme_provider.html#a2abc03bb6ecf225bffe65a6105832080">GetThemeDescriptorFromText</a>(reader.ReadToEnd());</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                    }</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160; </div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                    <span class="keywordflow">if</span> (descriptor == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160; </div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                    <span class="comment">//ensure that the plugin current version is supported</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                    <span class="keywordflow">if</span> (descriptor is PluginDescriptor pluginDescriptor &amp;&amp; !pluginDescriptor.SupportedVersions.Contains(<a class="code" href="class_nop_1_1_core_1_1_nop_version.html">NopVersion</a>.<a class="code" href="class_nop_1_1_core_1_1_nop_version.html#a639f42a8e4c2e1a882b0ddb9fcd29d43">CURRENT_VERSION</a>))</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                    <span class="comment">//get path to upload</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                    var uploadedItemDirectoryName = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a035836e60fae71ca3960b28851705e64">GetFileName</a>(itemPath.TrimEnd(<span class="charliteral">&#39;/&#39;</span>));</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                    var pathToUpload = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Combine</a>(item.Type == <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8459548e188d9ee366d8b10a8ce22598">UploadedItemType</a>.Plugin ? pluginsDirectory : themesDirectory, uploadedItemDirectoryName);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                    <span class="comment">//ensure it&#39;s a new directory (e.g. some old files are not required when re-uploading a plugin or a theme)</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                    <span class="comment">//furthermore, zip extract functionality cannot override existing files</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                    <span class="comment">//but there could deletion issues (related to file locking, etc). In such cases the directory should be deleted manually</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                    <span class="keywordflow">if</span> (<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">DirectoryExists</a>(pathToUpload))</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                        <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a999a5548682c2c99ff60c5919378f41f">DeleteDirectory</a>(pathToUpload);</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                    <span class="comment">//unzip entries into files</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                    var entries = archive.Entries.Where(entry =&gt; entry.FullName.StartsWith(itemPath, StringComparison.InvariantCultureIgnoreCase));</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                    <span class="keywordflow">foreach</span> (var entry <span class="keywordflow">in</span> entries)</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                    {</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                        <span class="comment">//get name of the file</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                        var fileName = entry.FullName[itemPath.Length..];</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                        <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(fileName))</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160; </div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                        var filePath = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Combine</a>(pathToUpload, fileName);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                        <span class="comment">//if it&#39;s a folder, we need to create it</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                        <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(entry.Name) &amp;&amp; !<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">DirectoryExists</a>(filePath))</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                        {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                            <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a032032ebb97005bfe245328dff130d91">CreateDirectory</a>(filePath);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                        }</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160; </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                        var directoryPath = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a64e81d81f521908bc88a547e760f2841">GetDirectoryName</a>(filePath);</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160; </div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                        <span class="comment">//whether the file directory is already exists, otherwise create the new one</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">DirectoryExists</a>(directoryPath))</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                            <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a032032ebb97005bfe245328dff130d91">CreateDirectory</a>(directoryPath);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                        <span class="comment">//unzip entry to the file (ignore directory entries)</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                        <span class="keywordflow">if</span> (!filePath.Equals($<span class="stringliteral">&quot;{directoryPath}\\&quot;</span>, StringComparison.InvariantCultureIgnoreCase))</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                            entry.ExtractToFile(filePath);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                    <span class="comment">//item is uploaded</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                    descriptors.Add(descriptor);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            }</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            <span class="keywordflow">return</span> descriptors;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_nop_version_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_nop_version.html">Nop.Core.NopVersion</a></div><div class="ttdoc">Represents nopCommerce version</div><div class="ttdef"><b>Definition:</b> NopVersion.cs:7</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_nop_version_html_a639f42a8e4c2e1a882b0ddb9fcd29d43"><div class="ttname"><a href="class_nop_1_1_core_1_1_nop_version.html#a639f42a8e4c2e1a882b0ddb9fcd29d43">Nop.Core.NopVersion.CURRENT_VERSION</a></div><div class="ttdeci">const string CURRENT_VERSION</div><div class="ttdoc">Gets the major store version</div><div class="ttdef"><b>Definition:</b> NopVersion.cs:11</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_plugins_1_1_upload_service_html_a8459548e188d9ee366d8b10a8ce22598"><div class="ttname"><a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8459548e188d9ee366d8b10a8ce22598">Nop.Services.Plugins.UploadService.UploadedItemType</a></div><div class="ttdeci">UploadedItemType</div><div class="ttdoc">Uploaded item type enumeration</div><div class="ttdef"><b>Definition:</b> UploadService.cs:512</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider_html_a035836e60fae71ca3960b28851705e64"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a035836e60fae71ca3960b28851705e64">Nop.Core.Infrastructure.INopFileProvider.GetFileName</a></div><div class="ttdeci">string GetFileName(string path)</div><div class="ttdoc">Returns the file name and extension of the specified path string</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider_html_aa8325219f308567a404dc473c2cf8f3a"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#aa8325219f308567a404dc473c2cf8f3a">Nop.Core.Infrastructure.INopFileProvider.MapPath</a></div><div class="ttdeci">string MapPath(string path)</div><div class="ttdoc">Maps a virtual path to a physical disk path.</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_themes_1_1_i_theme_provider_html_a2abc03bb6ecf225bffe65a6105832080"><div class="ttname"><a href="interface_nop_1_1_services_1_1_themes_1_1_i_theme_provider.html#a2abc03bb6ecf225bffe65a6105832080">Nop.Services.Themes.IThemeProvider.GetThemeDescriptorFromText</a></div><div class="ttdeci">ThemeDescriptor GetThemeDescriptorFromText(string text)</div><div class="ttdoc">Get theme descriptor from the description text</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">Nop.Services.Plugins.UploadService._fileProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a832134e6c74903d23c7ef8f1e9827c1e">Nop.Services.Plugins.UploadService._themeProvider</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Nop.Core.Infrastructure.INopFileProvider.Combine()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a032032ebb97005bfe245328dff130d91">Nop.Core.Infrastructure.INopFileProvider.CreateDirectory()</a>, <a class="el" href="class_nop_1_1_core_1_1_nop_version.html#a639f42a8e4c2e1a882b0ddb9fcd29d43">Nop.Core.NopVersion.CURRENT_VERSION</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a999a5548682c2c99ff60c5919378f41f">Nop.Core.Infrastructure.INopFileProvider.DeleteDirectory()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">Nop.Core.Infrastructure.INopFileProvider.DirectoryExists()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a64e81d81f521908bc88a547e760f2841">Nop.Core.Infrastructure.INopFileProvider.GetDirectoryName()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a035836e60fae71ca3960b28851705e64">Nop.Core.Infrastructure.INopFileProvider.GetFileName()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_plugin_descriptor.html#af5132a2661cf7a12d51047151c1f96e0">Nop.Services.Plugins.PluginDescriptor.GetPluginDescriptorFromText()</a>, <a class="el" href="interface_nop_1_1_services_1_1_themes_1_1_i_theme_provider.html#a2abc03bb6ecf225bffe65a6105832080">Nop.Services.Themes.IThemeProvider.GetThemeDescriptorFromText()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#aa8325219f308567a404dc473c2cf8f3a">Nop.Core.Infrastructure.INopFileProvider.MapPath()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_nop_plugin_defaults.html#a6cd845ec55471e78349de73391e3c993">Nop.Services.Plugins.NopPluginDefaults.Path</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_plugin_descriptor.html#a944fddaf06ad51bd62a523ea05d670c8">Nop.Services.Plugins.PluginDescriptor.SupportedVersions</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_nop_plugin_defaults.html#aa794b81d97a11330d712a40410ce0362">Nop.Services.Plugins.NopPluginDefaults.ThemeDescriptionFileName</a> e <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_nop_plugin_defaults.html#a15b12911473d55509bae04979240178d">Nop.Services.Plugins.NopPluginDefaults.ThemesPath</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#af1d9903b63be22f5e59be6ea9c204d4d">Nop.Services.Plugins.UploadService.UploadPluginsAndThemes()</a>.</p>

</div>
</div>
<a id="af1d9903b63be22f5e59be6ea9c204d4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1d9903b63be22f5e59be6ea9c204d4d">&#9670;&nbsp;</a></span>UploadPluginsAndThemes()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual IList&lt;<a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_descriptor.html">IDescriptor</a>&gt; Nop.Services.Plugins.UploadService.UploadPluginsAndThemes </td>
          <td>(</td>
          <td class="paramtype">IFormFile&#160;</td>
          <td class="paramname"><em>archivefile</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upload plugins and/or themes </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">archivefile</td><td>Archive file</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>List of uploaded items descriptor</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_upload_service.html#a3e391fd367f6874982718f252ad091b3">Nop.Services.Plugins.IUploadService</a>.</p>
<div class="fragment"><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        {</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordflow">if</span> (archivefile == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(archivefile));</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            var zipFilePath = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;            var descriptors = <span class="keyword">new</span> List&lt;IDescriptor&gt;();</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;            {</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <span class="comment">//only zip archives are supported</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3f9f665eb57833331c00ce029105caa3">GetFileExtension</a>(archivefile.FileName)?.Equals(<span class="stringliteral">&quot;.zip&quot;</span>, StringComparison.InvariantCultureIgnoreCase) ?? <span class="keyword">true</span>)</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Only zip archives are supported&quot;</span>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160; </div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                <span class="comment">//ensure that temp directory is created</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                var tempDirectory = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#aa8325219f308567a404dc473c2cf8f3a">MapPath</a>(NopPluginDefaults.UploadsTempPath);</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a032032ebb97005bfe245328dff130d91">CreateDirectory</a>(tempDirectory);</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160; </div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                <span class="comment">//copy original archive to the temp directory</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                zipFilePath = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Combine</a>(tempDirectory, archivefile.FileName);</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                <span class="keyword">using</span> (var fileStream = <span class="keyword">new</span> FileStream(zipFilePath, FileMode.Create))</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                    archivefile.CopyTo(fileStream);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                <span class="comment">//try to get information about the uploaded items from the JSON file in the root of the archive</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                <span class="comment">//you can find a sample of such descriptive file in Libraries\Nop.Core\Plugins\Samples\</span></div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">                var uploadedItems = GetUploadedItems(zipFilePath);</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <span class="keywordflow">if</span> (!uploadedItems?.Any() ?? <span class="keyword">true</span>)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                    <span class="comment">//JSON file doesn&#39;t exist, so there is a single plugin or theme in the archive, just unzip it</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    descriptors.Add(<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a7d23f7c5b9e56a8134cd4591153dec14">UploadSingleItem</a>(zipFilePath));</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                }</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    descriptors.AddRange(<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#af439ca5e3a59969e89365d0d8b5f53c1">UploadMultipleItems</a>(zipFilePath, uploadedItems));</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            }</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">finally</span></div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;            {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <span class="comment">//delete temporary file</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrEmpty(zipFilePath))</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                    <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3c80d781f90016898b9359c74876ff68">DeleteFile</a>(zipFilePath);</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">return</span> descriptors;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_plugins_1_1_upload_service_html_a7d23f7c5b9e56a8134cd4591153dec14"><div class="ttname"><a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a7d23f7c5b9e56a8134cd4591153dec14">Nop.Services.Plugins.UploadService.UploadSingleItem</a></div><div class="ttdeci">virtual IDescriptor UploadSingleItem(string archivePath)</div><div class="ttdoc">Upload single item from the archive into the physical directory</div><div class="ttdef"><b>Definition:</b> UploadService.cs:72</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_plugins_1_1_upload_service_html_af439ca5e3a59969e89365d0d8b5f53c1"><div class="ttname"><a href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#af439ca5e3a59969e89365d0d8b5f53c1">Nop.Services.Plugins.UploadService.UploadMultipleItems</a></div><div class="ttdeci">virtual IList&lt; IDescriptor &gt; UploadMultipleItems(string archivePath, IList&lt; UploadedItem &gt; uploadedItems)</div><div class="ttdoc">Upload multiple items from the archive into the physical directory</div><div class="ttdef"><b>Definition:</b> UploadService.cs:161</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">Nop.Services.Plugins.UploadService._fileProvider</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Nop.Core.Infrastructure.INopFileProvider.Combine()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a032032ebb97005bfe245328dff130d91">Nop.Core.Infrastructure.INopFileProvider.CreateDirectory()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3c80d781f90016898b9359c74876ff68">Nop.Core.Infrastructure.INopFileProvider.DeleteFile()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3f9f665eb57833331c00ce029105caa3">Nop.Core.Infrastructure.INopFileProvider.GetFileExtension()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#aa8325219f308567a404dc473c2cf8f3a">Nop.Core.Infrastructure.INopFileProvider.MapPath()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#af439ca5e3a59969e89365d0d8b5f53c1">Nop.Services.Plugins.UploadService.UploadMultipleItems()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a7d23f7c5b9e56a8134cd4591153dec14">Nop.Services.Plugins.UploadService.UploadSingleItem()</a> e <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_nop_plugin_defaults.html#a47188a2c0f7ba878e164d59b500b2e8f">Nop.Services.Plugins.NopPluginDefaults.UploadsTempPath</a>.</p>

</div>
</div>
<a id="a7d23f7c5b9e56a8134cd4591153dec14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d23f7c5b9e56a8134cd4591153dec14">&#9670;&nbsp;</a></span>UploadSingleItem()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_descriptor.html">IDescriptor</a> Nop.Services.Plugins.UploadService.UploadSingleItem </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>archivePath</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Upload single item from the archive into the physical directory </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">archivePath</td><td>Path to the archive</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>Uploaded item descriptor</dd></dl>
<div class="fragment"><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="comment">//get path to the plugins directory</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            var pluginsDirectory = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#aa8325219f308567a404dc473c2cf8f3a">MapPath</a>(NopPluginDefaults.Path);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            <span class="comment">//get path to the themes directory</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            var themesDirectory = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrEmpty(NopPluginDefaults.ThemesPath))</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                themesDirectory = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#aa8325219f308567a404dc473c2cf8f3a">MapPath</a>(NopPluginDefaults.ThemesPath);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160; </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            IDescriptor descriptor = <span class="keyword">null</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <span class="keywordtype">string</span> uploadedItemDirectoryName;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="keyword">using</span> (var archive = ZipFile.OpenRead(archivePath))</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <span class="comment">//the archive should contain only one root directory (the plugin one or the theme one)</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                var rootDirectories = archive.Entries.Select(p =&gt; p.FullName.Split(<span class="charliteral">&#39;/&#39;</span>)[0]).Distinct().ToList();</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                <span class="keywordflow">if</span> (rootDirectories.Count != 1)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;The archive should contain only one root plugin or theme directory. &quot;</span> +</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                        <span class="stringliteral">&quot;For example, Payments.PayPalDirect or DefaultClean. &quot;</span> +</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                        $<span class="stringliteral">&quot;To upload multiple items, the archive should have the &#39;{NopPluginDefaults.UploadedItemsFileName}&#39; file in the root&quot;</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160; </div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                <span class="comment">//get directory name (remove the ending /)</span></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                uploadedItemDirectoryName = rootDirectories.First();</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                <span class="comment">//try to get descriptor of the uploaded item</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                <span class="keywordflow">foreach</span> (var entry <span class="keywordflow">in</span> archive.Entries)</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                    <span class="comment">//whether it&#39;s a plugin descriptor</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                    var isPluginDescriptor = entry.FullName</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                        .Equals($<span class="stringliteral">&quot;{uploadedItemDirectoryName}/{NopPluginDefaults.DescriptionFileName}&quot;</span>, StringComparison.InvariantCultureIgnoreCase);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160; </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    <span class="comment">//or whether it&#39;s a theme descriptor</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    var isThemeDescriptor = entry.FullName</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                        .Equals($<span class="stringliteral">&quot;{uploadedItemDirectoryName}/{NopPluginDefaults.ThemeDescriptionFileName}&quot;</span>, StringComparison.InvariantCultureIgnoreCase);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160; </div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    <span class="keywordflow">if</span> (!isPluginDescriptor &amp;&amp; !isThemeDescriptor)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                    <span class="keyword">using</span> var unzippedEntryStream = entry.Open();</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                    <span class="keyword">using</span> var reader = <span class="keyword">new</span> StreamReader(unzippedEntryStream);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                    <span class="comment">//whether a plugin is upload </span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                    <span class="keywordflow">if</span> (isPluginDescriptor)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                    {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                        descriptor = PluginDescriptor.GetPluginDescriptorFromText(reader.ReadToEnd());</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                        <span class="comment">//ensure that the plugin current version is supported</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                        <span class="keywordflow">if</span> (!((PluginDescriptor)descriptor).<a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_plugins_1_1_marketplace.html#a64f7d5006d258a9bebe60ae31f34174f">SupportedVersions</a>.Contains(<a class="code" href="class_nop_1_1_core_1_1_nop_version.html">NopVersion</a>.<a class="code" href="class_nop_1_1_core_1_1_nop_version.html#a639f42a8e4c2e1a882b0ddb9fcd29d43">CURRENT_VERSION</a>))</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                            <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception($<span class="stringliteral">&quot;This plugin doesn&#39;t support the current version - {NopVersion.CURRENT_VERSION}&quot;</span>);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                    }</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160; </div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                    <span class="comment">//or whether a theme is upload </span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                    <span class="keywordflow">if</span> (isThemeDescriptor)</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                        descriptor = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a832134e6c74903d23c7ef8f1e9827c1e">_themeProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_themes_1_1_i_theme_provider.html#a2abc03bb6ecf225bffe65a6105832080">GetThemeDescriptorFromText</a>(reader.ReadToEnd());</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                }</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            }</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160; </div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            <span class="keywordflow">if</span> (descriptor == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;No descriptor file is found. It should be in the root of the archive.&quot;</span>);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160; </div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(uploadedItemDirectoryName))</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception($<span class="stringliteral">&quot;Cannot get the {(descriptor is PluginDescriptor ? &quot;</span>plugin<span class="stringliteral">&quot; : &quot;</span>theme<span class="stringliteral">&quot;)} directory name&quot;</span>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            <span class="comment">//get path to upload</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            var directoryPath = descriptor is PluginDescriptor ? pluginsDirectory : themesDirectory;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            var pathToUpload = <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Combine</a>(directoryPath, uploadedItemDirectoryName);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;            <span class="comment">//ensure it&#39;s a new directory (e.g. some old files are not required when re-uploading a plugin)</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            <span class="comment">//furthermore, zip extract functionality cannot override existing files</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="comment">//but there could deletion issues (related to file locking, etc). In such cases the directory should be deleted manually</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">DirectoryExists</a>(pathToUpload))</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                <a class="code" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">_fileProvider</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a999a5548682c2c99ff60c5919378f41f">DeleteDirectory</a>(pathToUpload);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160; </div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            <span class="comment">//unzip archive</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            ZipFile.ExtractToDirectory(archivePath, directoryPath);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160; </div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            <span class="keywordflow">return</span> descriptor;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        }</div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_plugins_1_1_marketplace_html_a64f7d5006d258a9bebe60ae31f34174f"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_plugins_1_1_marketplace.html#a64f7d5006d258a9bebe60ae31f34174f">Nop.Web.Areas.Admin.Models.Plugins.Marketplace.SupportedVersions</a></div><div class="ttdeci">string SupportedVersions</div><div class="ttdef"><b>Definition:</b> OfficialFeedPluginModel.cs:18</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#acaebed45acc9c30d759a2c9d5b7da511">Nop.Services.Plugins.UploadService._fileProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a832134e6c74903d23c7ef8f1e9827c1e">Nop.Services.Plugins.UploadService._themeProvider</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a3bc640cd31b3594d06f387eb209491be">Nop.Core.Infrastructure.INopFileProvider.Combine()</a>, <a class="el" href="class_nop_1_1_core_1_1_nop_version.html#a639f42a8e4c2e1a882b0ddb9fcd29d43">Nop.Core.NopVersion.CURRENT_VERSION</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a999a5548682c2c99ff60c5919378f41f">Nop.Core.Infrastructure.INopFileProvider.DeleteDirectory()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#a6469e615754f5a836386ae06eae2a475">Nop.Core.Infrastructure.INopFileProvider.DirectoryExists()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_plugin_descriptor.html#af5132a2661cf7a12d51047151c1f96e0">Nop.Services.Plugins.PluginDescriptor.GetPluginDescriptorFromText()</a>, <a class="el" href="interface_nop_1_1_services_1_1_themes_1_1_i_theme_provider.html#a2abc03bb6ecf225bffe65a6105832080">Nop.Services.Themes.IThemeProvider.GetThemeDescriptorFromText()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html#aa8325219f308567a404dc473c2cf8f3a">Nop.Core.Infrastructure.INopFileProvider.MapPath()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_nop_plugin_defaults.html#a6cd845ec55471e78349de73391e3c993">Nop.Services.Plugins.NopPluginDefaults.Path</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_plugins_1_1_marketplace.html#a64f7d5006d258a9bebe60ae31f34174f">Nop.Web.Areas.Admin.Models.Plugins.Marketplace.SupportedVersions</a> e <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_nop_plugin_defaults.html#a15b12911473d55509bae04979240178d">Nop.Services.Plugins.NopPluginDefaults.ThemesPath</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#af1d9903b63be22f5e59be6ea9c204d4d">Nop.Services.Plugins.UploadService.UploadPluginsAndThemes()</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentação dos dados membro</h2>
<a id="acaebed45acc9c30d759a2c9d5b7da511"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaebed45acc9c30d759a2c9d5b7da511">&#9670;&nbsp;</a></span>_fileProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_nop_file_provider.html">INopFileProvider</a> Nop.Services.Plugins.UploadService._fileProvider</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a84a5ced7151019e81442994b71af360a">Nop.Services.Plugins.UploadService.CreateDirectory()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a8a7e891450a785e53b6a02cd0081cd28">Nop.Services.Plugins.UploadService.GetUploadedItems()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a36fc00aad73ada0c0338913044e77748">Nop.Services.Plugins.UploadService.UploadFavicon()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a06e459e2dcb3267c95b2e9c4893e72f0">Nop.Services.Plugins.UploadService.UploadIconsArchive()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a1622f1449a75fccabf793c40dd785ab8">Nop.Services.Plugins.UploadService.UploadLocalePattern()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#af439ca5e3a59969e89365d0d8b5f53c1">Nop.Services.Plugins.UploadService.UploadMultipleItems()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#af1d9903b63be22f5e59be6ea9c204d4d">Nop.Services.Plugins.UploadService.UploadPluginsAndThemes()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#aee25159aa72aa7332384de627ee01750">Nop.Services.Plugins.UploadService.UploadService()</a> e <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a7d23f7c5b9e56a8134cd4591153dec14">Nop.Services.Plugins.UploadService.UploadSingleItem()</a>.</p>

</div>
</div>
<a id="adcd5507764b721b294954f555aa06363"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcd5507764b721b294954f555aa06363">&#9670;&nbsp;</a></span>_storeContext</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html">IStoreContext</a> Nop.Services.Plugins.UploadService._storeContext</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a36fc00aad73ada0c0338913044e77748">Nop.Services.Plugins.UploadService.UploadFavicon()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a06e459e2dcb3267c95b2e9c4893e72f0">Nop.Services.Plugins.UploadService.UploadIconsArchive()</a> e <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#aee25159aa72aa7332384de627ee01750">Nop.Services.Plugins.UploadService.UploadService()</a>.</p>

</div>
</div>
<a id="a832134e6c74903d23c7ef8f1e9827c1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a832134e6c74903d23c7ef8f1e9827c1e">&#9670;&nbsp;</a></span>_themeProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_themes_1_1_i_theme_provider.html">IThemeProvider</a> Nop.Services.Plugins.UploadService._themeProvider</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#af439ca5e3a59969e89365d0d8b5f53c1">Nop.Services.Plugins.UploadService.UploadMultipleItems()</a>, <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#aee25159aa72aa7332384de627ee01750">Nop.Services.Plugins.UploadService.UploadService()</a> e <a class="el" href="class_nop_1_1_services_1_1_plugins_1_1_upload_service.html#a7d23f7c5b9e56a8134cd4591153dec14">Nop.Services.Plugins.UploadService.UploadSingleItem()</a>.</p>

</div>
</div>
<hr/>A documentação para esta classe foi gerada a partir do seguinte ficheiro:<ul>
<li>C:/Users/gabri/Documents/Projetos/GitHub/Estudos/Nopcommercer plugin/nopCommerce_4.40.3_Source - Copia/src/Libraries/Nop.Services/Plugins/<a class="el" href="_upload_service_8cs.html">UploadService.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Gerado por&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
