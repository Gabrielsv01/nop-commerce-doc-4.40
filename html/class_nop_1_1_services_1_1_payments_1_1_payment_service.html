<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NopCommerce 4.40: Referência à classe Nop.Services.Payments.PaymentService</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="download.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NopCommerce 4.40
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Gerado por Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Localizar','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Localizar');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_nop.html">Nop</a></li><li class="navelem"><a class="el" href="namespace_nop_1_1_services.html">Services</a></li><li class="navelem"><a class="el" href="namespace_nop_1_1_services_1_1_payments.html">Payments</a></li><li class="navelem"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html">PaymentService</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Membros públicos</a> &#124;
<a href="#pri-attribs">Atributos Privados</a> &#124;
<a href="class_nop_1_1_services_1_1_payments_1_1_payment_service-members.html">Mostrar lista completa dos membros</a>  </div>
  <div class="headertitle">
<div class="title">Referência à classe Nop.Services.Payments.PaymentService</div>  </div>
</div><!--header-->
<div class="contents">

<p>Payment service  
 <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#details">Mais...</a></p>
<div class="dynheader">
Diagrama de heranças da classe Nop.Services.Payments.PaymentService</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_nop_1_1_services_1_1_payments_1_1_payment_service.png" usemap="#Nop.Services.Payments.PaymentService_map" alt=""/>
  <map id="Nop.Services.Payments.PaymentService_map" name="Nop.Services.Payments.PaymentService_map">
<area href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html" title="Payment service interface" alt="Nop.Services.Payments.IPaymentService" shape="rect" coords="0,0,246,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Membros públicos</h2></td></tr>
<tr class="memitem:a442d2f8dd27ddcfa9f536e17f5872983"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a442d2f8dd27ddcfa9f536e17f5872983">PaymentService</a> (<a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a> customerService, IHttpContextAccessor httpContextAccessor, <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_plugin_manager.html">IPaymentPluginManager</a> paymentPluginManager, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings.html">PaymentSettings</a> paymentSettings, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_shopping_cart_settings.html">ShoppingCartSettings</a> shoppingCartSettings)</td></tr>
<tr class="separator:a442d2f8dd27ddcfa9f536e17f5872983"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdf5f6c6a04b57a09f2d3171fa5a8f34"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_result.html">ProcessPaymentResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#acdf5f6c6a04b57a09f2d3171fa5a8f34">ProcessPaymentAsync</a> (<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html">ProcessPaymentRequest</a> processPaymentRequest)</td></tr>
<tr class="memdesc:acdf5f6c6a04b57a09f2d3171fa5a8f34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process a payment  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#acdf5f6c6a04b57a09f2d3171fa5a8f34">Mais...</a><br /></td></tr>
<tr class="separator:acdf5f6c6a04b57a09f2d3171fa5a8f34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad39d50956754ccc4d125c5944efa077a"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ad39d50956754ccc4d125c5944efa077a">PostProcessPaymentAsync</a> (<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_post_process_payment_request.html">PostProcessPaymentRequest</a> postProcessPaymentRequest)</td></tr>
<tr class="memdesc:ad39d50956754ccc4d125c5944efa077a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Post process payment (used by payment gateways that require redirecting to a third-party URL)  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ad39d50956754ccc4d125c5944efa077a">Mais...</a><br /></td></tr>
<tr class="separator:ad39d50956754ccc4d125c5944efa077a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5a394dcb4e73d15593506df649f8204"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ab5a394dcb4e73d15593506df649f8204">CanRePostProcessPaymentAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order)</td></tr>
<tr class="memdesc:ab5a394dcb4e73d15593506df649f8204"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a value indicating whether customers can complete a payment after order is placed but not completed (for redirection payment methods)  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ab5a394dcb4e73d15593506df649f8204">Mais...</a><br /></td></tr>
<tr class="separator:ab5a394dcb4e73d15593506df649f8204"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf9c39a44cdc687e7ef45268146fbcd1"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; decimal &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#acf9c39a44cdc687e7ef45268146fbcd1">GetAdditionalHandlingFeeAsync</a> (IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_shopping_cart_item.html">ShoppingCartItem</a> &gt; cart, string paymentMethodSystemName)</td></tr>
<tr class="memdesc:acf9c39a44cdc687e7ef45268146fbcd1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets an additional handling fee of a payment method  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#acf9c39a44cdc687e7ef45268146fbcd1">Mais...</a><br /></td></tr>
<tr class="separator:acf9c39a44cdc687e7ef45268146fbcd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2237eefe40cfd2fd237dea8295a0dfd"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ac2237eefe40cfd2fd237dea8295a0dfd">SupportCaptureAsync</a> (string paymentMethodSystemName)</td></tr>
<tr class="memdesc:ac2237eefe40cfd2fd237dea8295a0dfd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a value indicating whether capture is supported by payment method  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ac2237eefe40cfd2fd237dea8295a0dfd">Mais...</a><br /></td></tr>
<tr class="separator:ac2237eefe40cfd2fd237dea8295a0dfd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8aea7ce7c2188ce283a4033f98eab498"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_capture_payment_result.html">CapturePaymentResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a8aea7ce7c2188ce283a4033f98eab498">CaptureAsync</a> (<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_capture_payment_request.html">CapturePaymentRequest</a> capturePaymentRequest)</td></tr>
<tr class="memdesc:a8aea7ce7c2188ce283a4033f98eab498"><td class="mdescLeft">&#160;</td><td class="mdescRight">Captures payment  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a8aea7ce7c2188ce283a4033f98eab498">Mais...</a><br /></td></tr>
<tr class="separator:a8aea7ce7c2188ce283a4033f98eab498"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a037da03dffea791623c54e29c0967521"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a037da03dffea791623c54e29c0967521">SupportPartiallyRefundAsync</a> (string paymentMethodSystemName)</td></tr>
<tr class="memdesc:a037da03dffea791623c54e29c0967521"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a value indicating whether partial refund is supported by payment method  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a037da03dffea791623c54e29c0967521">Mais...</a><br /></td></tr>
<tr class="separator:a037da03dffea791623c54e29c0967521"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add663d951f24b8a0fb81f9295e5713d0"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#add663d951f24b8a0fb81f9295e5713d0">SupportRefundAsync</a> (string paymentMethodSystemName)</td></tr>
<tr class="memdesc:add663d951f24b8a0fb81f9295e5713d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a value indicating whether refund is supported by payment method  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#add663d951f24b8a0fb81f9295e5713d0">Mais...</a><br /></td></tr>
<tr class="separator:add663d951f24b8a0fb81f9295e5713d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affd561b82dcce19aefc8a76a74499c16"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_refund_payment_result.html">RefundPaymentResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#affd561b82dcce19aefc8a76a74499c16">RefundAsync</a> (<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_refund_payment_request.html">RefundPaymentRequest</a> refundPaymentRequest)</td></tr>
<tr class="memdesc:affd561b82dcce19aefc8a76a74499c16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Refunds a payment  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#affd561b82dcce19aefc8a76a74499c16">Mais...</a><br /></td></tr>
<tr class="separator:affd561b82dcce19aefc8a76a74499c16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cb2e178280dba77821b1af8f1d9e80b"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a1cb2e178280dba77821b1af8f1d9e80b">SupportVoidAsync</a> (string paymentMethodSystemName)</td></tr>
<tr class="memdesc:a1cb2e178280dba77821b1af8f1d9e80b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a value indicating whether void is supported by payment method  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a1cb2e178280dba77821b1af8f1d9e80b">Mais...</a><br /></td></tr>
<tr class="separator:a1cb2e178280dba77821b1af8f1d9e80b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46985e6774ab6c805c3c5477df9232b6"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_void_payment_result.html">VoidPaymentResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a46985e6774ab6c805c3c5477df9232b6">VoidAsync</a> (<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_void_payment_request.html">VoidPaymentRequest</a> voidPaymentRequest)</td></tr>
<tr class="memdesc:a46985e6774ab6c805c3c5477df9232b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Voids a payment  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a46985e6774ab6c805c3c5477df9232b6">Mais...</a><br /></td></tr>
<tr class="separator:a46985e6774ab6c805c3c5477df9232b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cc40c7b55e756180e6c9a1fe3a26442"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="namespace_nop_1_1_services_1_1_payments.html#aef3ff9dcc532279768359b7656e72cc7">RecurringPaymentType</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a5cc40c7b55e756180e6c9a1fe3a26442">GetRecurringPaymentTypeAsync</a> (string paymentMethodSystemName)</td></tr>
<tr class="memdesc:a5cc40c7b55e756180e6c9a1fe3a26442"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a recurring payment type of payment method  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a5cc40c7b55e756180e6c9a1fe3a26442">Mais...</a><br /></td></tr>
<tr class="separator:a5cc40c7b55e756180e6c9a1fe3a26442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cb251ff9748808c4395697af0856660"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_result.html">ProcessPaymentResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a6cb251ff9748808c4395697af0856660">ProcessRecurringPaymentAsync</a> (<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html">ProcessPaymentRequest</a> processPaymentRequest)</td></tr>
<tr class="memdesc:a6cb251ff9748808c4395697af0856660"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process recurring payment  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a6cb251ff9748808c4395697af0856660">Mais...</a><br /></td></tr>
<tr class="separator:a6cb251ff9748808c4395697af0856660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f658aab106a0b48b623d247d2477958"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_cancel_recurring_payment_result.html">CancelRecurringPaymentResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a8f658aab106a0b48b623d247d2477958">CancelRecurringPaymentAsync</a> (<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_cancel_recurring_payment_request.html">CancelRecurringPaymentRequest</a> cancelPaymentRequest)</td></tr>
<tr class="memdesc:a8f658aab106a0b48b623d247d2477958"><td class="mdescLeft">&#160;</td><td class="mdescRight">Cancels a recurring payment  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a8f658aab106a0b48b623d247d2477958">Mais...</a><br /></td></tr>
<tr class="separator:a8f658aab106a0b48b623d247d2477958"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b30e7cb9d20515a9ea75491c2bed7a"><td class="memItemLeft" align="right" valign="top">virtual string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a95b30e7cb9d20515a9ea75491c2bed7a">GetMaskedCreditCardNumber</a> (string creditCardNumber)</td></tr>
<tr class="memdesc:a95b30e7cb9d20515a9ea75491c2bed7a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets masked credit card number  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a95b30e7cb9d20515a9ea75491c2bed7a">Mais...</a><br /></td></tr>
<tr class="separator:a95b30e7cb9d20515a9ea75491c2bed7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac96f8657c8c7e85da5c48a8ca49aaff2"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; decimal &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ac96f8657c8c7e85da5c48a8ca49aaff2">CalculateAdditionalFeeAsync</a> (IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_shopping_cart_item.html">ShoppingCartItem</a> &gt; cart, decimal fee, bool usePercentage)</td></tr>
<tr class="memdesc:ac96f8657c8c7e85da5c48a8ca49aaff2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate payment method fee  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ac96f8657c8c7e85da5c48a8ca49aaff2">Mais...</a><br /></td></tr>
<tr class="separator:ac96f8657c8c7e85da5c48a8ca49aaff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a175b2b3ac27eec8285d3e240a021369d"><td class="memItemLeft" align="right" valign="top">virtual string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a175b2b3ac27eec8285d3e240a021369d">SerializeCustomValues</a> (<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html">ProcessPaymentRequest</a> request)</td></tr>
<tr class="memdesc:a175b2b3ac27eec8285d3e240a021369d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serialize CustomValues of <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html" title="Represents a payment info holder">ProcessPaymentRequest</a>  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a175b2b3ac27eec8285d3e240a021369d">Mais...</a><br /></td></tr>
<tr class="separator:a175b2b3ac27eec8285d3e240a021369d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e28588fe660d06bc4b4639793d90230"><td class="memItemLeft" align="right" valign="top">virtual Dictionary&lt; string, object &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a2e28588fe660d06bc4b4639793d90230">DeserializeCustomValues</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order)</td></tr>
<tr class="memdesc:a2e28588fe660d06bc4b4639793d90230"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deserialize CustomValues of Order  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a2e28588fe660d06bc4b4639793d90230">Mais...</a><br /></td></tr>
<tr class="separator:a2e28588fe660d06bc4b4639793d90230"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafc3f3a77094c22dbfd3e2f3a8b76f2c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#aafc3f3a77094c22dbfd3e2f3a8b76f2c">GenerateOrderGuid</a> (<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html">ProcessPaymentRequest</a> processPaymentRequest)</td></tr>
<tr class="memdesc:aafc3f3a77094c22dbfd3e2f3a8b76f2c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate an order GUID  <a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#aafc3f3a77094c22dbfd3e2f3a8b76f2c">Mais...</a><br /></td></tr>
<tr class="separator:aafc3f3a77094c22dbfd3e2f3a8b76f2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Atributos Privados</h2></td></tr>
<tr class="memitem:a48d2b8f2fccd98798b96c55470c84c85"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">_customerService</a></td></tr>
<tr class="separator:a48d2b8f2fccd98798b96c55470c84c85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94b77d0a5ebcd2028ae7a2dfa7cf30e1"><td class="memItemLeft" align="right" valign="top">readonly IHttpContextAccessor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a94b77d0a5ebcd2028ae7a2dfa7cf30e1">_httpContextAccessor</a></td></tr>
<tr class="separator:a94b77d0a5ebcd2028ae7a2dfa7cf30e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36616dac2d46170666c347245c2f3134"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_plugin_manager.html">IPaymentPluginManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a></td></tr>
<tr class="separator:a36616dac2d46170666c347245c2f3134"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52cf79e405eb5b6c7bfab2c79f270a24"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings.html">PaymentSettings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a52cf79e405eb5b6c7bfab2c79f270a24">_paymentSettings</a></td></tr>
<tr class="separator:a52cf79e405eb5b6c7bfab2c79f270a24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd7bced28b87a8572dcf056ec9557af"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_shopping_cart_settings.html">ShoppingCartSettings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a3cd7bced28b87a8572dcf056ec9557af">_shoppingCartSettings</a></td></tr>
<tr class="separator:a3cd7bced28b87a8572dcf056ec9557af"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descrição detalhada</h2>
<div class="textblock"><p>Payment service </p>
</div><h2 class="groupheader">Documentação dos Construtores &amp; Destrutor</h2>
<a id="a442d2f8dd27ddcfa9f536e17f5872983"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a442d2f8dd27ddcfa9f536e17f5872983">&#9670;&nbsp;</a></span>PaymentService()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Nop.Services.Payments.PaymentService.PaymentService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a>&#160;</td>
          <td class="paramname"><em>customerService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IHttpContextAccessor&#160;</td>
          <td class="paramname"><em>httpContextAccessor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_plugin_manager.html">IPaymentPluginManager</a>&#160;</td>
          <td class="paramname"><em>paymentPluginManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings.html">PaymentSettings</a>&#160;</td>
          <td class="paramname"><em>paymentSettings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_shopping_cart_settings.html">ShoppingCartSettings</a>&#160;</td>
          <td class="paramname"><em>shoppingCartSettings</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">_customerService</a> = customerService;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a94b77d0a5ebcd2028ae7a2dfa7cf30e1">_httpContextAccessor</a> = httpContextAccessor;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a> = paymentPluginManager;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a52cf79e405eb5b6c7bfab2c79f270a24">_paymentSettings</a> = paymentSettings;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a3cd7bced28b87a8572dcf056ec9557af">_shoppingCartSettings</a> = shoppingCartSettings;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_payments_1_1_payment_service_html_a36616dac2d46170666c347245c2f3134"><div class="ttname"><a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a></div><div class="ttdeci">readonly IPaymentPluginManager _paymentPluginManager</div><div class="ttdef"><b>Definition:</b> PaymentService.cs:29</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_payments_1_1_payment_service_html_a3cd7bced28b87a8572dcf056ec9557af"><div class="ttname"><a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a3cd7bced28b87a8572dcf056ec9557af">Nop.Services.Payments.PaymentService._shoppingCartSettings</a></div><div class="ttdeci">readonly ShoppingCartSettings _shoppingCartSettings</div><div class="ttdef"><b>Definition:</b> PaymentService.cs:31</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_payments_1_1_payment_service_html_a48d2b8f2fccd98798b96c55470c84c85"><div class="ttname"><a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">Nop.Services.Payments.PaymentService._customerService</a></div><div class="ttdeci">readonly ICustomerService _customerService</div><div class="ttdef"><b>Definition:</b> PaymentService.cs:27</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_payments_1_1_payment_service_html_a52cf79e405eb5b6c7bfab2c79f270a24"><div class="ttname"><a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a52cf79e405eb5b6c7bfab2c79f270a24">Nop.Services.Payments.PaymentService._paymentSettings</a></div><div class="ttdeci">readonly PaymentSettings _paymentSettings</div><div class="ttdef"><b>Definition:</b> PaymentService.cs:30</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_payments_1_1_payment_service_html_a94b77d0a5ebcd2028ae7a2dfa7cf30e1"><div class="ttname"><a href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a94b77d0a5ebcd2028ae7a2dfa7cf30e1">Nop.Services.Payments.PaymentService._httpContextAccessor</a></div><div class="ttdeci">readonly IHttpContextAccessor _httpContextAccessor</div><div class="ttdef"><b>Definition:</b> PaymentService.cs:28</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">Nop.Services.Payments.PaymentService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a94b77d0a5ebcd2028ae7a2dfa7cf30e1">Nop.Services.Payments.PaymentService._httpContextAccessor</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a52cf79e405eb5b6c7bfab2c79f270a24">Nop.Services.Payments.PaymentService._paymentSettings</a> e <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a3cd7bced28b87a8572dcf056ec9557af">Nop.Services.Payments.PaymentService._shoppingCartSettings</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentação dos métodos</h2>
<a id="ac96f8657c8c7e85da5c48a8ca49aaff2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac96f8657c8c7e85da5c48a8ca49aaff2">&#9670;&nbsp;</a></span>CalculateAdditionalFeeAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;decimal&gt; Nop.Services.Payments.PaymentService.CalculateAdditionalFeeAsync </td>
          <td>(</td>
          <td class="paramtype">IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_shopping_cart_item.html">ShoppingCartItem</a> &gt;&#160;</td>
          <td class="paramname"><em>cart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">decimal&#160;</td>
          <td class="paramname"><em>fee</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>usePercentage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Calculate payment method fee </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">cart</td><td>Shopping cart</td></tr>
    <tr><td class="paramname">fee</td><td>Fee value</td></tr>
    <tr><td class="paramname">usePercentage</td><td>Is fee amount specified as percentage or fixed value?</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the result </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#a199eddedf493b82daeb044f8f9b9756d">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">if</span> (fee &lt;= 0)</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                <span class="keywordflow">return</span> fee;</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            decimal <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            <span class="keywordflow">if</span> (usePercentage)</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            {</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                <span class="comment">//percentage</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                var orderTotalCalculationService = <a class="code" href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html">EngineContext</a>.<a class="code" href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html#a3aa3185b6b7474f2781a575e880645fd">Current</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_engine.html#a9cc3489ec1597daa4c030815dcdd897e">Resolve</a>&lt;<a class="code" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_total_calculation_service.html">IOrderTotalCalculationService</a>&gt;();</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                var orderTotalWithoutPaymentFee = (await orderTotalCalculationService.GetShoppingCartTotalAsync(cart, usePaymentMethodAdditionalFee: <span class="keyword">false</span>)).shoppingCartTotal ?? 0;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = (decimal)((<span class="keywordtype">float</span>)orderTotalWithoutPaymentFee * (float)fee / 100f);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;            {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                <span class="comment">//fixed value</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = fee;</div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160; </div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_infrastructure_1_1_engine_context_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html">Nop.Core.Infrastructure.EngineContext</a></div><div class="ttdoc">Provides access to the singleton instance of the Nop engine.</div><div class="ttdef"><b>Definition:</b> EngineContext.cs:9</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_infrastructure_1_1_engine_context_html_a3aa3185b6b7474f2781a575e880645fd"><div class="ttname"><a href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html#a3aa3185b6b7474f2781a575e880645fd">Nop.Core.Infrastructure.EngineContext.Current</a></div><div class="ttdeci">static IEngine Current</div><div class="ttdoc">Gets the singleton Nop engine used to access Nop services.</div><div class="ttdef"><b>Definition:</b> EngineContext.cs:40</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_engine_html_a9cc3489ec1597daa4c030815dcdd897e"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_engine.html#a9cc3489ec1597daa4c030815dcdd897e">Nop.Core.Infrastructure.IEngine.Resolve</a></div><div class="ttdeci">object Resolve(Type type, IServiceScope scope=null)</div><div class="ttdoc">Resolve dependency</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_orders_1_1_i_order_total_calculation_service_html"><div class="ttname"><a href="interface_nop_1_1_services_1_1_orders_1_1_i_order_total_calculation_service.html">Nop.Services.Orders.IOrderTotalCalculationService</a></div><div class="ttdoc">Order service interface</div><div class="ttdef"><b>Definition:</b> IOrderTotalCalculationService.cs:13</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_models_1_1_blogs_html_a6cc3986434c188bc64f7d71789d4a5c8"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a></div><div class="ttdeci">return result</div><div class="ttdef"><b>Definition:</b> BlogPagingFilteringModel.cs:21</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html#a3aa3185b6b7474f2781a575e880645fd">Nop.Core.Infrastructure.EngineContext.Current</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_engine.html#a9cc3489ec1597daa4c030815dcdd897e">Nop.Core.Infrastructure.IEngine.Resolve()</a> e <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a>.</p>

</div>
</div>
<a id="a8f658aab106a0b48b623d247d2477958"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f658aab106a0b48b623d247d2477958">&#9670;&nbsp;</a></span>CancelRecurringPaymentAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_cancel_recurring_payment_result.html">CancelRecurringPaymentResult</a>&gt; Nop.Services.Payments.PaymentService.CancelRecurringPaymentAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_cancel_recurring_payment_request.html">CancelRecurringPaymentRequest</a>&#160;</td>
          <td class="paramname"><em>cancelPaymentRequest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Cancels a recurring payment </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">cancelPaymentRequest</td><td>Request</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the result </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#aa621e3969430087afb0b96eeaf6bfbf0">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        {</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            <span class="keywordflow">if</span> (cancelPaymentRequest.Order.OrderTotal == decimal.Zero)</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> CancelRecurringPaymentResult();</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a>.<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(cancelPaymentRequest.Order.PaymentMethodSystemName)</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>(<span class="stringliteral">&quot;Payment method couldn&#39;t be loaded&quot;</span>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <span class="keywordflow">return</span> await paymentMethod.CancelRecurringPaymentAsync(cancelPaymentRequest);</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_nop_exception_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_nop_exception.html">Nop.Core.NopException</a></div><div class="ttdoc">Represents errors that occur during application execution</div><div class="ttdef"><b>Definition:</b> NopException.cs:11</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager_html_ae65d47d1226a9c2099ff48e24a976235"><div class="ttname"><a href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager.LoadPluginBySystemNameAsync</a></div><div class="ttdeci">Task&lt; TPlugin &gt; LoadPluginBySystemNameAsync(string systemName, Customer customer=null, int storeId=0)</div><div class="ttdoc">Load plugin by system name</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a>, <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_cancel_recurring_payment_request.html#adbaa355e5ba6045355bd16c316fa8107">Nop.Services.Payments.CancelRecurringPaymentRequest.Order</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a5707771d888f12d4a74e1e2eac82f720">Nop.Core.Domain.Orders.Order.OrderTotal</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1a4dc20567fdbe33a1f5a1a6ad9a71a2">Nop.Core.Domain.Orders.Order.PaymentMethodSystemName</a>.</p>

</div>
</div>
<a id="ab5a394dcb4e73d15593506df649f8204"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5a394dcb4e73d15593506df649f8204">&#9670;&nbsp;</a></span>CanRePostProcessPaymentAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;bool&gt; Nop.Services.Payments.PaymentService.CanRePostProcessPaymentAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a value indicating whether customers can complete a payment after order is placed but not completed (for redirection payment methods) </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the result </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#adfa1b437eba991e72604126025ceddb0">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        {</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a52cf79e405eb5b6c7bfab2c79f270a24">_paymentSettings</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings.html#af733f3b94a59b1b92ac61407399a004d">AllowRePostingPayments</a>)</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160; </div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            var customer = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">GetCustomerByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a>.<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1a4dc20567fdbe33a1f5a1a6ad9a71a2">PaymentMethodSystemName</a>, customer, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>);</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keywordflow">if</span> (paymentMethod == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>; <span class="comment">//Payment method couldn&#39;t be loaded (for example, was uninstalled)</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="keywordflow">if</span> (paymentMethod.PaymentMethodType != <a class="code" href="namespace_nop_1_1_services_1_1_payments.html#a089cf94adcc85702620451da45d46335">PaymentMethodType</a>.Redirection)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">//this option is available only for redirection payment methods</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160; </div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keywordflow">if</span> (order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#aca1560b7ce7d1f158ed3bbb2ae867c4d">Deleted</a>)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">//do not allow for deleted orders</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="keywordflow">if</span> (order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1da26c037c2fa677811f7ae1b6748286">OrderStatus</a> == <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_orders.html#a110e048090478f8f42845b47c90139e8">OrderStatus</a>.Cancelled)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">//do not allow for cancelled orders</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            <span class="keywordflow">if</span> (order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1ef8e44cb2bff7de9ab65a583f03252c">PaymentStatus</a> != <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_payments.html#a5af4d422e00c0b088770533afd7d2c22">PaymentStatus</a>.Pending)</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;  <span class="comment">//payment status should be Pending</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160; </div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;            <span class="keywordflow">return</span> await paymentMethod.CanRePostProcessPaymentAsync(order);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_a1a4dc20567fdbe33a1f5a1a6ad9a71a2"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1a4dc20567fdbe33a1f5a1a6ad9a71a2">Nop.Core.Domain.Orders.Order.PaymentMethodSystemName</a></div><div class="ttdeci">string PaymentMethodSystemName</div><div class="ttdoc">Gets or sets the payment method system name</div><div class="ttdef"><b>Definition:</b> Order.cs:69</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_a1da26c037c2fa677811f7ae1b6748286"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1da26c037c2fa677811f7ae1b6748286">Nop.Core.Domain.Orders.Order.OrderStatus</a></div><div class="ttdeci">OrderStatus OrderStatus</div><div class="ttdoc">Gets or sets the order status</div><div class="ttdef"><b>Definition:</b> Order.cs:304</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_a1ef8e44cb2bff7de9ab65a583f03252c"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1ef8e44cb2bff7de9ab65a583f03252c">Nop.Core.Domain.Orders.Order.PaymentStatus</a></div><div class="ttdeci">PaymentStatus PaymentStatus</div><div class="ttdoc">Gets or sets the payment status</div><div class="ttdef"><b>Definition:</b> Order.cs:313</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_a6eab9b1126cda0970526b3c4d9af9aed"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a></div><div class="ttdeci">int StoreId</div><div class="ttdoc">Gets or sets the store identifier</div><div class="ttdef"><b>Definition:</b> Order.cs:24</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_aca1560b7ce7d1f158ed3bbb2ae867c4d"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#aca1560b7ce7d1f158ed3bbb2ae867c4d">Nop.Core.Domain.Orders.Order.Deleted</a></div><div class="ttdeci">bool Deleted</div><div class="ttdoc">Gets or sets a value indicating whether the entity has been deleted</div><div class="ttdef"><b>Definition:</b> Order.cs:279</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_afc851a198d160f4084e1398b3b4892c3"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a></div><div class="ttdeci">int CustomerId</div><div class="ttdoc">Gets or sets the customer identifier</div><div class="ttdef"><b>Definition:</b> Order.cs:29</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings_html_af733f3b94a59b1b92ac61407399a004d"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings.html#af733f3b94a59b1b92ac61407399a004d">Nop.Core.Domain.Payments.PaymentSettings.AllowRePostingPayments</a></div><div class="ttdeci">bool AllowRePostingPayments</div><div class="ttdoc">Gets or sets a value indicating whether customers are allowed to repost (complete) payments for redir...</div><div class="ttdef"><b>Definition:</b> PaymentSettings.cs:24</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_customers_1_1_i_customer_service_html_a9d2dc587d116a6f656792c4f4cf22e09"><div class="ttname"><a href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync</a></div><div class="ttdeci">Task&lt; Customer &gt; GetCustomerByIdAsync(int customerId)</div><div class="ttdoc">Gets a customer</div></div>
<div class="ttc" id="anamespace_nop_1_1_core_1_1_domain_1_1_orders_html_a110e048090478f8f42845b47c90139e8"><div class="ttname"><a href="namespace_nop_1_1_core_1_1_domain_1_1_orders.html#a110e048090478f8f42845b47c90139e8">Nop.Core.Domain.Orders.OrderStatus</a></div><div class="ttdeci">OrderStatus</div><div class="ttdoc">Represents an order status enumeration</div><div class="ttdef"><b>Definition:</b> OrderStatus.cs:7</div></div>
<div class="ttc" id="anamespace_nop_1_1_core_1_1_domain_1_1_payments_html_a5af4d422e00c0b088770533afd7d2c22"><div class="ttname"><a href="namespace_nop_1_1_core_1_1_domain_1_1_payments.html#a5af4d422e00c0b088770533afd7d2c22">Nop.Core.Domain.Payments.PaymentStatus</a></div><div class="ttdeci">PaymentStatus</div><div class="ttdoc">Represents a payment status enumeration</div><div class="ttdef"><b>Definition:</b> PaymentStatus.cs:7</div></div>
<div class="ttc" id="anamespace_nop_1_1_services_1_1_payments_html_a089cf94adcc85702620451da45d46335"><div class="ttname"><a href="namespace_nop_1_1_services_1_1_payments.html#a089cf94adcc85702620451da45d46335">Nop.Services.Payments.PaymentMethodType</a></div><div class="ttdeci">PaymentMethodType</div><div class="ttdoc">Represents a payment method type</div><div class="ttdef"><b>Definition:</b> PaymentMethodType.cs:7</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">Nop.Services.Payments.PaymentService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a52cf79e405eb5b6c7bfab2c79f270a24">Nop.Services.Payments.PaymentService._paymentSettings</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings.html#af733f3b94a59b1b92ac61407399a004d">Nop.Core.Domain.Payments.PaymentSettings.AllowRePostingPayments</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#aca1560b7ce7d1f158ed3bbb2ae867c4d">Nop.Core.Domain.Orders.Order.Deleted</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1da26c037c2fa677811f7ae1b6748286">Nop.Core.Domain.Orders.Order.OrderStatus</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1a4dc20567fdbe33a1f5a1a6ad9a71a2">Nop.Core.Domain.Orders.Order.PaymentMethodSystemName</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1ef8e44cb2bff7de9ab65a583f03252c">Nop.Core.Domain.Orders.Order.PaymentStatus</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="a8aea7ce7c2188ce283a4033f98eab498"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8aea7ce7c2188ce283a4033f98eab498">&#9670;&nbsp;</a></span>CaptureAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_capture_payment_result.html">CapturePaymentResult</a>&gt; Nop.Services.Payments.PaymentService.CaptureAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_capture_payment_request.html">CapturePaymentRequest</a>&#160;</td>
          <td class="paramname"><em>capturePaymentRequest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Captures payment </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">capturePaymentRequest</td><td>Capture payment request</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the capture payment result </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#acdb2f9127ddea3c4121026adec3f4d32">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        {</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a>.<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(capturePaymentRequest.Order.PaymentMethodSystemName)</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>(<span class="stringliteral">&quot;Payment method couldn&#39;t be loaded&quot;</span>);</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160; </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <span class="keywordflow">return</span> await paymentMethod.CaptureAsync(capturePaymentRequest);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a>, <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_capture_payment_request.html#ae4773b7ef213b565d0ce8a2873d24f23">Nop.Services.Payments.CapturePaymentRequest.Order</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1a4dc20567fdbe33a1f5a1a6ad9a71a2">Nop.Core.Domain.Orders.Order.PaymentMethodSystemName</a>.</p>

</div>
</div>
<a id="a2e28588fe660d06bc4b4639793d90230"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e28588fe660d06bc4b4639793d90230">&#9670;&nbsp;</a></span>DeserializeCustomValues()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual Dictionary&lt;string, object&gt; Nop.Services.Payments.PaymentService.DeserializeCustomValues </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deserialize CustomValues of Order </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>Serialized CustomValues CustomValues</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#aa4ebb9ce309fe00bb9657f9f41bd11e6">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrWhiteSpace(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a8a2b4447509b6940bfd0bf9ca2bf71a5">CustomValuesXml</a>))</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> Dictionary&lt;string, object&gt;();</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160; </div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;            var serializer = <span class="keyword">new</span> XmlSerializer(typeof(DictionarySerializer));</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160; </div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keyword">using</span> var textReader = <span class="keyword">new</span> StringReader(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a8a2b4447509b6940bfd0bf9ca2bf71a5">CustomValuesXml</a>);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <span class="keyword">using</span> var xmlReader = XmlReader.Create(textReader);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordflow">if</span> (serializer.Deserialize(xmlReader) is DictionarySerializer ds)</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                <span class="keywordflow">return</span> ds.Dictionary;</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">new</span> Dictionary&lt;string, object&gt;();</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_a8a2b4447509b6940bfd0bf9ca2bf71a5"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a8a2b4447509b6940bfd0bf9ca2bf71a5">Nop.Core.Domain.Orders.Order.CustomValuesXml</a></div><div class="ttdeci">string CustomValuesXml</div><div class="ttdoc">Gets or sets the serialized CustomValues (values from ProcessPaymentRequest)</div><div class="ttdef"><b>Definition:</b> Order.cs:274</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a8a2b4447509b6940bfd0bf9ca2bf71a5">Nop.Core.Domain.Orders.Order.CustomValuesXml</a>.</p>

</div>
</div>
<a id="aafc3f3a77094c22dbfd3e2f3a8b76f2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafc3f3a77094c22dbfd3e2f3a8b76f2c">&#9670;&nbsp;</a></span>GenerateOrderGuid()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void Nop.Services.Payments.PaymentService.GenerateOrderGuid </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html">ProcessPaymentRequest</a>&#160;</td>
          <td class="paramname"><em>processPaymentRequest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Generate an order GUID </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">processPaymentRequest</td><td>Process payment request</td></tr>
  </table>
  </dd>
</dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#acfe7d860d8657ec9ff38b7cef2e0c74d">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        {</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            <span class="keywordflow">if</span> (processPaymentRequest == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            <span class="comment">//we should use the same GUID for multiple payment attempts</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="comment">//this way a payment gateway can prevent security issues such as credit card brute-force attacks</span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            <span class="comment">//in order to avoid any possible limitations by payment gateway we reset GUID periodically</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;            var previousPaymentRequest = <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a94b77d0a5ebcd2028ae7a2dfa7cf30e1">_httpContextAccessor</a>.HttpContext.Session.Get&lt;ProcessPaymentRequest&gt;(<span class="stringliteral">&quot;OrderPaymentInfo&quot;</span>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a52cf79e405eb5b6c7bfab2c79f270a24">_paymentSettings</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings.html#a02963dd78b8336b3a3f16e353fa84a15">RegenerateOrderGuidInterval</a> &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                previousPaymentRequest != <span class="keyword">null</span> &amp;&amp;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                previousPaymentRequest.OrderGuidGeneratedOnUtc.HasValue)</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            {</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                var interval = DateTime.UtcNow - previousPaymentRequest.OrderGuidGeneratedOnUtc.Value;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                <span class="keywordflow">if</span> (interval.TotalSeconds &lt; <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a52cf79e405eb5b6c7bfab2c79f270a24">_paymentSettings</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings.html#a02963dd78b8336b3a3f16e353fa84a15">RegenerateOrderGuidInterval</a>)</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                    processPaymentRequest.OrderGuid = previousPaymentRequest.OrderGuid;</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                    processPaymentRequest.OrderGuidGeneratedOnUtc = previousPaymentRequest.OrderGuidGeneratedOnUtc;</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                }</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            }</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160; </div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;            <span class="keywordflow">if</span> (processPaymentRequest.OrderGuid == Guid.Empty)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;            {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                processPaymentRequest.OrderGuid = Guid.NewGuid();</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                processPaymentRequest.OrderGuidGeneratedOnUtc = DateTime.UtcNow;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings_html_a02963dd78b8336b3a3f16e353fa84a15"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings.html#a02963dd78b8336b3a3f16e353fa84a15">Nop.Core.Domain.Payments.PaymentSettings.RegenerateOrderGuidInterval</a></div><div class="ttdeci">int RegenerateOrderGuidInterval</div><div class="ttdoc">Gets or sets a interval (in seconds) to reuse the same order GUID during an order placement for multi...</div><div class="ttdef"><b>Definition:</b> PaymentSettings.cs:50</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a94b77d0a5ebcd2028ae7a2dfa7cf30e1">Nop.Services.Payments.PaymentService._httpContextAccessor</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a52cf79e405eb5b6c7bfab2c79f270a24">Nop.Services.Payments.PaymentService._paymentSettings</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html#a1ad6e75bc8d6088bdd0ce3d710e3ee89">Nop.Services.Payments.ProcessPaymentRequest.OrderGuid</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html#adfeb659c1d7a1f5ea1b6571e74e77107">Nop.Services.Payments.ProcessPaymentRequest.OrderGuidGeneratedOnUtc</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings.html#a02963dd78b8336b3a3f16e353fa84a15">Nop.Core.Domain.Payments.PaymentSettings.RegenerateOrderGuidInterval</a>.</p>

</div>
</div>
<a id="acf9c39a44cdc687e7ef45268146fbcd1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf9c39a44cdc687e7ef45268146fbcd1">&#9670;&nbsp;</a></span>GetAdditionalHandlingFeeAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;decimal&gt; Nop.Services.Payments.PaymentService.GetAdditionalHandlingFeeAsync </td>
          <td>(</td>
          <td class="paramtype">IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_shopping_cart_item.html">ShoppingCartItem</a> &gt;&#160;</td>
          <td class="paramname"><em>cart</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>paymentMethodSystemName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets an additional handling fee of a payment method </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">cart</td><td>Shopping cart</td></tr>
    <tr><td class="paramname">paymentMethodSystemName</td><td>Payment method system name</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the additional handling fee </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#a9fc76bc9d2ffa2e9b6e3b64e4c985068">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(paymentMethodSystemName))</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="keywordflow">return</span> decimal.Zero;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            var customer = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">GetCustomerByIdAsync</a>(cart.FirstOrDefault()?.CustomerId ?? 0);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a>.<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(paymentMethodSystemName, customer, cart.FirstOrDefault()?.StoreId ?? 0);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            <span class="keywordflow">if</span> (paymentMethod == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <span class="keywordflow">return</span> decimal.Zero;</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            var <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = await paymentMethod.GetAdditionalHandlingFeeAsync(cart);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> &lt; decimal.Zero)</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = decimal.Zero;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160; </div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a3cd7bced28b87a8572dcf056ec9557af">_shoppingCartSettings</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_shopping_cart_settings.html#ad835871dd73a4ef185aa18222d78cfa3">RoundPricesDuringCalculation</a>)</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160; </div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            var priceCalculationService = <a class="code" href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html">EngineContext</a>.<a class="code" href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html#a3aa3185b6b7474f2781a575e880645fd">Current</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_engine.html#a9cc3489ec1597daa4c030815dcdd897e">Resolve</a>&lt;<a class="code" href="interface_nop_1_1_services_1_1_catalog_1_1_i_price_calculation_service.html">IPriceCalculationService</a>&gt;();</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = await priceCalculationService.RoundPriceAsync(<a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160; </div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_shopping_cart_settings_html_ad835871dd73a4ef185aa18222d78cfa3"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_shopping_cart_settings.html#ad835871dd73a4ef185aa18222d78cfa3">Nop.Core.Domain.Orders.ShoppingCartSettings.RoundPricesDuringCalculation</a></div><div class="ttdeci">bool RoundPricesDuringCalculation</div><div class="ttdoc">Gets or sets a value indicating whether to round calculated prices and total during calculation</div><div class="ttdef"><b>Definition:</b> ShoppingCartSettings.cs:100</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_catalog_1_1_i_price_calculation_service_html"><div class="ttname"><a href="interface_nop_1_1_services_1_1_catalog_1_1_i_price_calculation_service.html">Nop.Services.Catalog.IPriceCalculationService</a></div><div class="ttdoc">Price calculation service</div><div class="ttdef"><b>Definition:</b> IPriceCalculationService.cs:15</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">Nop.Services.Payments.PaymentService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a3cd7bced28b87a8572dcf056ec9557af">Nop.Services.Payments.PaymentService._shoppingCartSettings</a>, <a class="el" href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html#a3aa3185b6b7474f2781a575e880645fd">Nop.Core.Infrastructure.EngineContext.Current</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_engine.html#a9cc3489ec1597daa4c030815dcdd897e">Nop.Core.Infrastructure.IEngine.Resolve()</a>, <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_shopping_cart_settings.html#ad835871dd73a4ef185aa18222d78cfa3">Nop.Core.Domain.Orders.ShoppingCartSettings.RoundPricesDuringCalculation</a>.</p>

</div>
</div>
<a id="a95b30e7cb9d20515a9ea75491c2bed7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95b30e7cb9d20515a9ea75491c2bed7a">&#9670;&nbsp;</a></span>GetMaskedCreditCardNumber()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual string Nop.Services.Payments.PaymentService.GetMaskedCreditCardNumber </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>creditCardNumber</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets masked credit card number </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">creditCardNumber</td><td>Credit card number</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>Masked credit card number</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#a1692ed1ef503fa2ad4385d8239234b3b">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(creditCardNumber))</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                <span class="keywordflow">return</span> <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160; </div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keywordflow">if</span> (creditCardNumber.Length &lt;= 4)</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <span class="keywordflow">return</span> creditCardNumber;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            var last4 = creditCardNumber[(creditCardNumber.Length - 4)..creditCardNumber.Length];</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            var maskedChars = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            for (var i = 0; i &lt; creditCardNumber.Length - 4; i++)</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            {</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                maskedChars += <span class="stringliteral">&quot;*&quot;</span>;</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            }</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160; </div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            <span class="keywordflow">return</span> maskedChars + last4;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a5cc40c7b55e756180e6c9a1fe3a26442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cc40c7b55e756180e6c9a1fe3a26442">&#9670;&nbsp;</a></span>GetRecurringPaymentTypeAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="namespace_nop_1_1_services_1_1_payments.html#aef3ff9dcc532279768359b7656e72cc7">RecurringPaymentType</a>&gt; Nop.Services.Payments.PaymentService.GetRecurringPaymentTypeAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>paymentMethodSystemName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a recurring payment type of payment method </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">paymentMethodSystemName</td><td>Payment method system name</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains a recurring payment type of payment method </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#a28a938d0a5192f91ac7024c081b232e9">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;        {</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a>.<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(paymentMethodSystemName);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordflow">if</span> (paymentMethod == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_services_1_1_payments.html#aef3ff9dcc532279768359b7656e72cc7">RecurringPaymentType</a>.NotSupported;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;            </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">return</span> paymentMethod.RecurringPaymentType;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div>
<div class="ttc" id="anamespace_nop_1_1_services_1_1_payments_html_aef3ff9dcc532279768359b7656e72cc7"><div class="ttname"><a href="namespace_nop_1_1_services_1_1_payments.html#aef3ff9dcc532279768359b7656e72cc7">Nop.Services.Payments.RecurringPaymentType</a></div><div class="ttdeci">RecurringPaymentType</div><div class="ttdoc">Represents a recurring payment type</div><div class="ttdef"><b>Definition:</b> RecurringPaymentType.cs:7</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a> e <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>.</p>

</div>
</div>
<a id="ad39d50956754ccc4d125c5944efa077a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad39d50956754ccc4d125c5944efa077a">&#9670;&nbsp;</a></span>PostProcessPaymentAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Services.Payments.PaymentService.PostProcessPaymentAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_post_process_payment_request.html">PostProcessPaymentRequest</a>&#160;</td>
          <td class="paramname"><em>postProcessPaymentRequest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Post process payment (used by payment gateways that require redirecting to a third-party URL) </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">postProcessPaymentRequest</td><td>Payment info required for an order processing</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#aa48c9ef2ff5b93559d6000f7f941a1ee">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            <span class="comment">//already paid or order.OrderTotal == decimal.Zero</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            <span class="keywordflow">if</span> (postProcessPaymentRequest.Order.PaymentStatus == <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_payments.html#a5af4d422e00c0b088770533afd7d2c22">PaymentStatus</a>.Paid)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160; </div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            var customer = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">GetCustomerByIdAsync</a>(postProcessPaymentRequest.Order.CustomerId);</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                .<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(postProcessPaymentRequest.Order.PaymentMethodSystemName, customer, postProcessPaymentRequest.Order.StoreId)</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>(<span class="stringliteral">&quot;Payment method couldn&#39;t be loaded&quot;</span>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            await paymentMethod.PostProcessPaymentAsync(postProcessPaymentRequest);</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">Nop.Services.Payments.PaymentService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_post_process_payment_request.html#aacce67462b6cf0f8c7ecf140c0b79143">Nop.Services.Payments.PostProcessPaymentRequest.Order</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1a4dc20567fdbe33a1f5a1a6ad9a71a2">Nop.Core.Domain.Orders.Order.PaymentMethodSystemName</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1ef8e44cb2bff7de9ab65a583f03252c">Nop.Core.Domain.Orders.Order.PaymentStatus</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="acdf5f6c6a04b57a09f2d3171fa5a8f34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acdf5f6c6a04b57a09f2d3171fa5a8f34">&#9670;&nbsp;</a></span>ProcessPaymentAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_result.html">ProcessPaymentResult</a>&gt; Nop.Services.Payments.PaymentService.ProcessPaymentAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html">ProcessPaymentRequest</a>&#160;</td>
          <td class="paramname"><em>processPaymentRequest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process a payment </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">processPaymentRequest</td><td>Payment info required for an order processing</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the process payment result </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#a5c0d724362d95efd5d4f14120d8663ab">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="keywordflow">if</span> (processPaymentRequest.OrderTotal == decimal.Zero)</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            {</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;                var <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = <span class="keyword">new</span> ProcessPaymentResult</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                    NewPaymentStatus = <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_payments.html#a5af4d422e00c0b088770533afd7d2c22">PaymentStatus</a>.Paid</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                };</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <span class="comment">//We should strip out any white space or dash in the CC number entered.</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrWhiteSpace(processPaymentRequest.CreditCardNumber))</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                processPaymentRequest.CreditCardNumber = processPaymentRequest.CreditCardNumber.Replace(<span class="stringliteral">&quot; &quot;</span>, <span class="keywordtype">string</span>.Empty);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                processPaymentRequest.CreditCardNumber = processPaymentRequest.CreditCardNumber.Replace(<span class="stringliteral">&quot;-&quot;</span>, <span class="keywordtype">string</span>.Empty);</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            }</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            var customer = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">GetCustomerByIdAsync</a>(processPaymentRequest.CustomerId);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                .<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(processPaymentRequest.PaymentMethodSystemName, customer, processPaymentRequest.StoreId)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>(<span class="stringliteral">&quot;Payment method couldn&#39;t be loaded&quot;</span>);</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160; </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <span class="keywordflow">return</span> await paymentMethod.ProcessPaymentAsync(processPaymentRequest);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">Nop.Services.Payments.PaymentService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html#abd502ed34204ecf609c94cb6a0ef7687">Nop.Services.Payments.ProcessPaymentRequest.CreditCardNumber</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html#a098b0e1fef0218d4da085f5e1db550d3">Nop.Services.Payments.ProcessPaymentRequest.CustomerId</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html#a0c5837b2c79b22f63e3825f06ebc848d">Nop.Services.Payments.ProcessPaymentRequest.OrderTotal</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html#a6929faec75eea9a7ee1af7ad7ed88813">Nop.Services.Payments.ProcessPaymentRequest.PaymentMethodSystemName</a>, <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a> e <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html#a1734b4d0645df9858d9e4940dfdafb58">Nop.Services.Payments.ProcessPaymentRequest.StoreId</a>.</p>

</div>
</div>
<a id="a6cb251ff9748808c4395697af0856660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cb251ff9748808c4395697af0856660">&#9670;&nbsp;</a></span>ProcessRecurringPaymentAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_result.html">ProcessPaymentResult</a>&gt; Nop.Services.Payments.PaymentService.ProcessRecurringPaymentAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html">ProcessPaymentRequest</a>&#160;</td>
          <td class="paramname"><em>processPaymentRequest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Process recurring payment </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">processPaymentRequest</td><td>Payment info required for an order processing</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the process payment result </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#ab17cc75a304e6bf10a1579a61da97ffe">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">if</span> (processPaymentRequest.OrderTotal == decimal.Zero)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                var <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = <span class="keyword">new</span> ProcessPaymentResult</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                    NewPaymentStatus = <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_payments.html#a5af4d422e00c0b088770533afd7d2c22">PaymentStatus</a>.Paid</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                };</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;            }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160; </div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            var customer = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">GetCustomerByIdAsync</a>(processPaymentRequest.CustomerId);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                .<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(processPaymentRequest.PaymentMethodSystemName, customer, processPaymentRequest.StoreId)</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>(<span class="stringliteral">&quot;Payment method couldn&#39;t be loaded&quot;</span>);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            <span class="keywordflow">return</span> await paymentMethod.ProcessRecurringPaymentAsync(processPaymentRequest);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a48d2b8f2fccd98798b96c55470c84c85">Nop.Services.Payments.PaymentService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html#a098b0e1fef0218d4da085f5e1db550d3">Nop.Services.Payments.ProcessPaymentRequest.CustomerId</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html#a0c5837b2c79b22f63e3825f06ebc848d">Nop.Services.Payments.ProcessPaymentRequest.OrderTotal</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html#a6929faec75eea9a7ee1af7ad7ed88813">Nop.Services.Payments.ProcessPaymentRequest.PaymentMethodSystemName</a>, <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a> e <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html#a1734b4d0645df9858d9e4940dfdafb58">Nop.Services.Payments.ProcessPaymentRequest.StoreId</a>.</p>

</div>
</div>
<a id="affd561b82dcce19aefc8a76a74499c16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affd561b82dcce19aefc8a76a74499c16">&#9670;&nbsp;</a></span>RefundAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_refund_payment_result.html">RefundPaymentResult</a>&gt; Nop.Services.Payments.PaymentService.RefundAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_refund_payment_request.html">RefundPaymentRequest</a>&#160;</td>
          <td class="paramname"><em>refundPaymentRequest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Refunds a payment </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">refundPaymentRequest</td><td>Request</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the result </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#a44d3a3bee742272dc64a0b83b04101c4">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a>.<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(refundPaymentRequest.Order.PaymentMethodSystemName)</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>(<span class="stringliteral">&quot;Payment method couldn&#39;t be loaded&quot;</span>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160; </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;            <span class="keywordflow">return</span> await paymentMethod.RefundAsync(refundPaymentRequest);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a>, <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_refund_payment_request.html#a38b73d2892ef1f7baf5a4ea090947a1d">Nop.Services.Payments.RefundPaymentRequest.Order</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1a4dc20567fdbe33a1f5a1a6ad9a71a2">Nop.Core.Domain.Orders.Order.PaymentMethodSystemName</a>.</p>

</div>
</div>
<a id="a175b2b3ac27eec8285d3e240a021369d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a175b2b3ac27eec8285d3e240a021369d">&#9670;&nbsp;</a></span>SerializeCustomValues()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual string Nop.Services.Payments.PaymentService.SerializeCustomValues </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html">ProcessPaymentRequest</a>&#160;</td>
          <td class="paramname"><em>request</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Serialize CustomValues of <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html" title="Represents a payment info holder">ProcessPaymentRequest</a> </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">request</td><td>Request</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>Serialized CustomValues</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#ad3b6aafb6be58943f50971afab659d51">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;        {</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">if</span> (request == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(request));</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160; </div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;            <span class="keywordflow">if</span> (!request.CustomValues.Any())</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160; </div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="comment">//XmlSerializer won&#39;t serialize objects that implement IDictionary by default.</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <span class="comment">//http://msdn.microsoft.com/en-us/magazine/cc164135.aspx </span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="comment">//also see http://ropox.ru/tag/ixmlserializable/ (Russian language)</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            var ds = <span class="keyword">new</span> DictionarySerializer(request.CustomValues);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            var xs = <span class="keyword">new</span> XmlSerializer(typeof(DictionarySerializer));</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160; </div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <span class="keyword">using</span> var textWriter = <span class="keyword">new</span> StringWriter();</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <span class="keyword">using</span> (var xmlWriter = XmlWriter.Create(textWriter))</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                xs.Serialize(xmlWriter, ds);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            var <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = textWriter.ToString();</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_process_payment_request.html#ae35372445678837bccb47f4fed62e4c7">Nop.Services.Payments.ProcessPaymentRequest.CustomValues</a> e <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a>.</p>

</div>
</div>
<a id="ac2237eefe40cfd2fd237dea8295a0dfd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2237eefe40cfd2fd237dea8295a0dfd">&#9670;&nbsp;</a></span>SupportCaptureAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;bool&gt; Nop.Services.Payments.PaymentService.SupportCaptureAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>paymentMethodSystemName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a value indicating whether capture is supported by payment method </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">paymentMethodSystemName</td><td>Payment method system name</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains a value indicating whether capture is supported </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#ac4114c61ee93cea4b4ebe74a8124cc67">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a>.<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(paymentMethodSystemName);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            <span class="keywordflow">if</span> (paymentMethod == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            <span class="keywordflow">return</span> paymentMethod.SupportCapture;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a> e <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>.</p>

</div>
</div>
<a id="a037da03dffea791623c54e29c0967521"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a037da03dffea791623c54e29c0967521">&#9670;&nbsp;</a></span>SupportPartiallyRefundAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;bool&gt; Nop.Services.Payments.PaymentService.SupportPartiallyRefundAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>paymentMethodSystemName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a value indicating whether partial refund is supported by payment method </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">paymentMethodSystemName</td><td>Payment method system name</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains a value indicating whether partial refund is supported </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#a21dea00d8356fce31ec403fefc3ddf05">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a>.<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(paymentMethodSystemName);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;            <span class="keywordflow">if</span> (paymentMethod == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">return</span> paymentMethod.SupportPartiallyRefund;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a> e <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>.</p>

</div>
</div>
<a id="add663d951f24b8a0fb81f9295e5713d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add663d951f24b8a0fb81f9295e5713d0">&#9670;&nbsp;</a></span>SupportRefundAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;bool&gt; Nop.Services.Payments.PaymentService.SupportRefundAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>paymentMethodSystemName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a value indicating whether refund is supported by payment method </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">paymentMethodSystemName</td><td>Payment method system name</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains a value indicating whether refund is supported </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#aac25bcffd6598b31a9ca21c0d7d1f4f8">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        {</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a>.<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(paymentMethodSystemName);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            <span class="keywordflow">if</span> (paymentMethod == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">return</span> paymentMethod.SupportRefund;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a> e <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>.</p>

</div>
</div>
<a id="a1cb2e178280dba77821b1af8f1d9e80b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cb2e178280dba77821b1af8f1d9e80b">&#9670;&nbsp;</a></span>SupportVoidAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;bool&gt; Nop.Services.Payments.PaymentService.SupportVoidAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>paymentMethodSystemName</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a value indicating whether void is supported by payment method </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">paymentMethodSystemName</td><td>Payment method system name</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains a value indicating whether void is supported </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#a378d87b846f0d35d1f66f5d0360c50a7">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a>.<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(paymentMethodSystemName);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <span class="keywordflow">if</span> (paymentMethod == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">return</span> paymentMethod.SupportVoid;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a> e <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>.</p>

</div>
</div>
<a id="a46985e6774ab6c805c3c5477df9232b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46985e6774ab6c805c3c5477df9232b6">&#9670;&nbsp;</a></span>VoidAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_services_1_1_payments_1_1_void_payment_result.html">VoidPaymentResult</a>&gt; Nop.Services.Payments.PaymentService.VoidAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_services_1_1_payments_1_1_void_payment_request.html">VoidPaymentRequest</a>&#160;</td>
          <td class="paramname"><em>voidPaymentRequest</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Voids a payment </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">voidPaymentRequest</td><td>Request</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the result </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_service.html#af2d45e491bb6dd457a036f0acfbfeaed">Nop.Services.Payments.IPaymentService</a>.</p>
<div class="fragment"><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            var paymentMethod = await <a class="code" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">_paymentPluginManager</a>.<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(voidPaymentRequest.Order.PaymentMethodSystemName)</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                ?? <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>(<span class="stringliteral">&quot;Payment method couldn&#39;t be loaded&quot;</span>);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160; </div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            <span class="keywordflow">return</span> await paymentMethod.VoidAsync(voidPaymentRequest);</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a36616dac2d46170666c347245c2f3134">Nop.Services.Payments.PaymentService._paymentPluginManager</a>, <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_void_payment_request.html#adca1c0030caff4f9b7cb7e04b8bd572d">Nop.Services.Payments.VoidPaymentRequest.Order</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a1a4dc20567fdbe33a1f5a1a6ad9a71a2">Nop.Core.Domain.Orders.Order.PaymentMethodSystemName</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentação dos dados membro</h2>
<a id="a48d2b8f2fccd98798b96c55470c84c85"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a48d2b8f2fccd98798b96c55470c84c85">&#9670;&nbsp;</a></span>_customerService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a> Nop.Services.Payments.PaymentService._customerService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ab5a394dcb4e73d15593506df649f8204">Nop.Services.Payments.PaymentService.CanRePostProcessPaymentAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#acf9c39a44cdc687e7ef45268146fbcd1">Nop.Services.Payments.PaymentService.GetAdditionalHandlingFeeAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a442d2f8dd27ddcfa9f536e17f5872983">Nop.Services.Payments.PaymentService.PaymentService()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ad39d50956754ccc4d125c5944efa077a">Nop.Services.Payments.PaymentService.PostProcessPaymentAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#acdf5f6c6a04b57a09f2d3171fa5a8f34">Nop.Services.Payments.PaymentService.ProcessPaymentAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a6cb251ff9748808c4395697af0856660">Nop.Services.Payments.PaymentService.ProcessRecurringPaymentAsync()</a>.</p>

</div>
</div>
<a id="a94b77d0a5ebcd2028ae7a2dfa7cf30e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a94b77d0a5ebcd2028ae7a2dfa7cf30e1">&#9670;&nbsp;</a></span>_httpContextAccessor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IHttpContextAccessor Nop.Services.Payments.PaymentService._httpContextAccessor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#aafc3f3a77094c22dbfd3e2f3a8b76f2c">Nop.Services.Payments.PaymentService.GenerateOrderGuid()</a> e <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a442d2f8dd27ddcfa9f536e17f5872983">Nop.Services.Payments.PaymentService.PaymentService()</a>.</p>

</div>
</div>
<a id="a36616dac2d46170666c347245c2f3134"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36616dac2d46170666c347245c2f3134">&#9670;&nbsp;</a></span>_paymentPluginManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_payments_1_1_i_payment_plugin_manager.html">IPaymentPluginManager</a> Nop.Services.Payments.PaymentService._paymentPluginManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a8f658aab106a0b48b623d247d2477958">Nop.Services.Payments.PaymentService.CancelRecurringPaymentAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ab5a394dcb4e73d15593506df649f8204">Nop.Services.Payments.PaymentService.CanRePostProcessPaymentAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a8aea7ce7c2188ce283a4033f98eab498">Nop.Services.Payments.PaymentService.CaptureAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#acf9c39a44cdc687e7ef45268146fbcd1">Nop.Services.Payments.PaymentService.GetAdditionalHandlingFeeAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a5cc40c7b55e756180e6c9a1fe3a26442">Nop.Services.Payments.PaymentService.GetRecurringPaymentTypeAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a442d2f8dd27ddcfa9f536e17f5872983">Nop.Services.Payments.PaymentService.PaymentService()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ad39d50956754ccc4d125c5944efa077a">Nop.Services.Payments.PaymentService.PostProcessPaymentAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#acdf5f6c6a04b57a09f2d3171fa5a8f34">Nop.Services.Payments.PaymentService.ProcessPaymentAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a6cb251ff9748808c4395697af0856660">Nop.Services.Payments.PaymentService.ProcessRecurringPaymentAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#affd561b82dcce19aefc8a76a74499c16">Nop.Services.Payments.PaymentService.RefundAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ac2237eefe40cfd2fd237dea8295a0dfd">Nop.Services.Payments.PaymentService.SupportCaptureAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a037da03dffea791623c54e29c0967521">Nop.Services.Payments.PaymentService.SupportPartiallyRefundAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#add663d951f24b8a0fb81f9295e5713d0">Nop.Services.Payments.PaymentService.SupportRefundAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a1cb2e178280dba77821b1af8f1d9e80b">Nop.Services.Payments.PaymentService.SupportVoidAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a46985e6774ab6c805c3c5477df9232b6">Nop.Services.Payments.PaymentService.VoidAsync()</a>.</p>

</div>
</div>
<a id="a52cf79e405eb5b6c7bfab2c79f270a24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52cf79e405eb5b6c7bfab2c79f270a24">&#9670;&nbsp;</a></span>_paymentSettings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_payments_1_1_payment_settings.html">PaymentSettings</a> Nop.Services.Payments.PaymentService._paymentSettings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#ab5a394dcb4e73d15593506df649f8204">Nop.Services.Payments.PaymentService.CanRePostProcessPaymentAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#aafc3f3a77094c22dbfd3e2f3a8b76f2c">Nop.Services.Payments.PaymentService.GenerateOrderGuid()</a> e <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a442d2f8dd27ddcfa9f536e17f5872983">Nop.Services.Payments.PaymentService.PaymentService()</a>.</p>

</div>
</div>
<a id="a3cd7bced28b87a8572dcf056ec9557af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cd7bced28b87a8572dcf056ec9557af">&#9670;&nbsp;</a></span>_shoppingCartSettings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_shopping_cart_settings.html">ShoppingCartSettings</a> Nop.Services.Payments.PaymentService._shoppingCartSettings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#acf9c39a44cdc687e7ef45268146fbcd1">Nop.Services.Payments.PaymentService.GetAdditionalHandlingFeeAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_payments_1_1_payment_service.html#a442d2f8dd27ddcfa9f536e17f5872983">Nop.Services.Payments.PaymentService.PaymentService()</a>.</p>

</div>
</div>
<hr/>A documentação para esta classe foi gerada a partir do seguinte ficheiro:<ul>
<li>C:/Users/gabri/Documents/Projetos/GitHub/Estudos/Nopcommercer plugin/nopCommerce_4.40.3_Source - Copia/src/Libraries/Nop.Services/Payments/<a class="el" href="_payment_service_8cs.html">PaymentService.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Gerado por&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
