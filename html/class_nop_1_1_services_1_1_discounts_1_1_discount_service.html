<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NopCommerce 4.40: Referência à classe Nop.Services.Discounts.DiscountService</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="download.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NopCommerce 4.40
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Gerado por Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Localizar','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Localizar');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_nop.html">Nop</a></li><li class="navelem"><a class="el" href="namespace_nop_1_1_services.html">Services</a></li><li class="navelem"><a class="el" href="namespace_nop_1_1_services_1_1_discounts.html">Discounts</a></li><li class="navelem"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html">DiscountService</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Membros públicos</a> &#124;
<a href="#pro-methods">Membros protegidos</a> &#124;
<a href="#pri-attribs">Atributos Privados</a> &#124;
<a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service-members.html">Mostrar lista completa dos membros</a>  </div>
  <div class="headertitle">
<div class="title">Referência à classe Nop.Services.Discounts.DiscountService</div>  </div>
</div><!--header-->
<div class="contents">

<p>Discount service  
 <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#details">Mais...</a></p>
<div class="dynheader">
Diagrama de heranças da classe Nop.Services.Discounts.DiscountService</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_nop_1_1_services_1_1_discounts_1_1_discount_service.png" usemap="#Nop.Services.Discounts.DiscountService_map" alt=""/>
  <map id="Nop.Services.Discounts.DiscountService_map" name="Nop.Services.Discounts.DiscountService_map">
<area href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html" title="Discount service interface" alt="Nop.Services.Discounts.IDiscountService" shape="rect" coords="0,0,248,24"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Membros públicos</h2></td></tr>
<tr class="memitem:a33a9da51fb7787206c7bead8d3983d1d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a33a9da51fb7787206c7bead8d3983d1d">DiscountService</a> (<a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a> customerService, <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_plugin_manager.html">IDiscountPluginManager</a> discountPluginManager, <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html">ILocalizationService</a> localizationService, <a class="el" href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html">IProductService</a> productService, <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> &gt; discountRepository, <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a> &gt; discountRequirementRepository, <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_usage_history.html">DiscountUsageHistory</a> &gt; discountUsageHistoryRepository, <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> &gt; orderRepository, <a class="el" href="interface_nop_1_1_core_1_1_caching_1_1_i_static_cache_manager.html">IStaticCacheManager</a> staticCacheManager, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html">IStoreContext</a> storeContext)</td></tr>
<tr class="separator:a33a9da51fb7787206c7bead8d3983d1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75610f9260b052131869500464aa2610"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a75610f9260b052131869500464aa2610">DeleteDiscountAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> discount)</td></tr>
<tr class="memdesc:a75610f9260b052131869500464aa2610"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete discount  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a75610f9260b052131869500464aa2610">Mais...</a><br /></td></tr>
<tr class="separator:a75610f9260b052131869500464aa2610"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae37476608061cf4c3c9e9205ac3d98c6"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ae37476608061cf4c3c9e9205ac3d98c6">GetDiscountByIdAsync</a> (int discountId)</td></tr>
<tr class="memdesc:ae37476608061cf4c3c9e9205ac3d98c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a discount  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ae37476608061cf4c3c9e9205ac3d98c6">Mais...</a><br /></td></tr>
<tr class="separator:ae37476608061cf4c3c9e9205ac3d98c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace11e14b00b4ad1661619230802064e7"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ace11e14b00b4ad1661619230802064e7">GetAllDiscountsAsync</a> (<a class="el" href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a0528a9e289aca2a985743fdf3b419703">DiscountType</a>? discountType=null, string couponCode=null, string discountName=null, bool showHidden=false, DateTime? startDateUtc=null, DateTime? endDateUtc=null)</td></tr>
<tr class="memdesc:ace11e14b00b4ad1661619230802064e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all discounts  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ace11e14b00b4ad1661619230802064e7">Mais...</a><br /></td></tr>
<tr class="separator:ace11e14b00b4ad1661619230802064e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5900a17be57567dd1cbf4680baee9b37"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5900a17be57567dd1cbf4680baee9b37">GetAppliedDiscountsAsync&lt; T &gt;</a> (<a class="el" href="interface_nop_1_1_core_1_1_domain_1_1_discounts_1_1_i_discount_supported.html">IDiscountSupported</a>&lt; T &gt; entity)</td></tr>
<tr class="memdesc:a5900a17be57567dd1cbf4680baee9b37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets discounts applied to entity  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5900a17be57567dd1cbf4680baee9b37">Mais...</a><br /></td></tr>
<tr class="separator:a5900a17be57567dd1cbf4680baee9b37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a340c0e83bf99911958a5e38ba7b52e16"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a340c0e83bf99911958a5e38ba7b52e16">InsertDiscountAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> discount)</td></tr>
<tr class="memdesc:a340c0e83bf99911958a5e38ba7b52e16"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a discount  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a340c0e83bf99911958a5e38ba7b52e16">Mais...</a><br /></td></tr>
<tr class="separator:a340c0e83bf99911958a5e38ba7b52e16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01ec46d6bb1cac9e5b8bcb88fbde8607"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01ec46d6bb1cac9e5b8bcb88fbde8607">UpdateDiscountAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> discount)</td></tr>
<tr class="memdesc:a01ec46d6bb1cac9e5b8bcb88fbde8607"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates the discount  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01ec46d6bb1cac9e5b8bcb88fbde8607">Mais...</a><br /></td></tr>
<tr class="separator:a01ec46d6bb1cac9e5b8bcb88fbde8607"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6019cffc900f5f27bf2eddceaa7533f4"><td class="memItemLeft" align="right" valign="top">virtual decimal&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6019cffc900f5f27bf2eddceaa7533f4">GetDiscountAmount</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> discount, decimal amount)</td></tr>
<tr class="memdesc:a6019cffc900f5f27bf2eddceaa7533f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets the discount amount for the specified value  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6019cffc900f5f27bf2eddceaa7533f4">Mais...</a><br /></td></tr>
<tr class="separator:a6019cffc900f5f27bf2eddceaa7533f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a13a3d5a024b4c1bef87d5858f51e49d6"><td class="memItemLeft" align="right" valign="top">virtual List&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a13a3d5a024b4c1bef87d5858f51e49d6">GetPreferredDiscount</a> (IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> &gt; discounts, decimal amount, out decimal discountAmount)</td></tr>
<tr class="memdesc:a13a3d5a024b4c1bef87d5858f51e49d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get preferred discount (with maximum discount value)  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a13a3d5a024b4c1bef87d5858f51e49d6">Mais...</a><br /></td></tr>
<tr class="separator:a13a3d5a024b4c1bef87d5858f51e49d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afda665165e0ad9ab7203cc37fb6f824e"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#afda665165e0ad9ab7203cc37fb6f824e">ContainsDiscount</a> (IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> &gt; discounts, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> discount)</td></tr>
<tr class="memdesc:afda665165e0ad9ab7203cc37fb6f824e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether a list of discounts already contains a certain discount instance  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#afda665165e0ad9ab7203cc37fb6f824e">Mais...</a><br /></td></tr>
<tr class="separator:afda665165e0ad9ab7203cc37fb6f824e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa71c8e5823d75825751c27c52920d118"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa71c8e5823d75825751c27c52920d118">GetAllDiscountRequirementsAsync</a> (int discountId=0, bool topLevelOnly=false)</td></tr>
<tr class="memdesc:aa71c8e5823d75825751c27c52920d118"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get all discount requirements  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa71c8e5823d75825751c27c52920d118">Mais...</a><br /></td></tr>
<tr class="separator:aa71c8e5823d75825751c27c52920d118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1992ceb827be9ab749d21bd5e59f3455"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a1992ceb827be9ab749d21bd5e59f3455">GetDiscountRequirementByIdAsync</a> (int discountRequirementId)</td></tr>
<tr class="memdesc:a1992ceb827be9ab749d21bd5e59f3455"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a discount requirement  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a1992ceb827be9ab749d21bd5e59f3455">Mais...</a><br /></td></tr>
<tr class="separator:a1992ceb827be9ab749d21bd5e59f3455"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c6b5e43639710a9943ac5c0e786e0e8"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5c6b5e43639710a9943ac5c0e786e0e8">GetDiscountRequirementsByParentAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a> discountRequirement)</td></tr>
<tr class="memdesc:a5c6b5e43639710a9943ac5c0e786e0e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets child discount requirements  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5c6b5e43639710a9943ac5c0e786e0e8">Mais...</a><br /></td></tr>
<tr class="separator:a5c6b5e43639710a9943ac5c0e786e0e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2cde2db5116c6294fe3ba4831a7c351d"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a2cde2db5116c6294fe3ba4831a7c351d">DeleteDiscountRequirementAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a> discountRequirement, bool recursive=false)</td></tr>
<tr class="memdesc:a2cde2db5116c6294fe3ba4831a7c351d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete discount requirement  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a2cde2db5116c6294fe3ba4831a7c351d">Mais...</a><br /></td></tr>
<tr class="separator:a2cde2db5116c6294fe3ba4831a7c351d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7a881dcea8f1dbcbcb69d83f28abccb"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#af7a881dcea8f1dbcbcb69d83f28abccb">InsertDiscountRequirementAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a> discountRequirement)</td></tr>
<tr class="memdesc:af7a881dcea8f1dbcbcb69d83f28abccb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Inserts a discount requirement  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#af7a881dcea8f1dbcbcb69d83f28abccb">Mais...</a><br /></td></tr>
<tr class="separator:af7a881dcea8f1dbcbcb69d83f28abccb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af0fe2f1de2f6ec8fe59dbb37c06a6eea"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#af0fe2f1de2f6ec8fe59dbb37c06a6eea">UpdateDiscountRequirementAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a> discountRequirement)</td></tr>
<tr class="memdesc:af0fe2f1de2f6ec8fe59dbb37c06a6eea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Updates a discount requirement  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#af0fe2f1de2f6ec8fe59dbb37c06a6eea">Mais...</a><br /></td></tr>
<tr class="separator:af0fe2f1de2f6ec8fe59dbb37c06a6eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac99d7e812be28814755a58c8bc4809ed"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_validation_result.html">DiscountValidationResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ac99d7e812be28814755a58c8bc4809ed">ValidateDiscountAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> discount, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer)</td></tr>
<tr class="memdesc:ac99d7e812be28814755a58c8bc4809ed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate discount  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ac99d7e812be28814755a58c8bc4809ed">Mais...</a><br /></td></tr>
<tr class="separator:ac99d7e812be28814755a58c8bc4809ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01b72a4010ac89b58b0262a65dda750a"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_validation_result.html">DiscountValidationResult</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01b72a4010ac89b58b0262a65dda750a">ValidateDiscountAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> discount, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, string[] couponCodesToValidate)</td></tr>
<tr class="memdesc:a01b72a4010ac89b58b0262a65dda750a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Validate discount  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01b72a4010ac89b58b0262a65dda750a">Mais...</a><br /></td></tr>
<tr class="separator:a01b72a4010ac89b58b0262a65dda750a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb7db5be2629abd191b6cb9ee9c80b3b"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_usage_history.html">DiscountUsageHistory</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#afb7db5be2629abd191b6cb9ee9c80b3b">GetDiscountUsageHistoryByIdAsync</a> (int discountUsageHistoryId)</td></tr>
<tr class="memdesc:afb7db5be2629abd191b6cb9ee9c80b3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets a discount usage history record  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#afb7db5be2629abd191b6cb9ee9c80b3b">Mais...</a><br /></td></tr>
<tr class="separator:afb7db5be2629abd191b6cb9ee9c80b3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82773c7d05d67d1515bb09c01af45830"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="interface_nop_1_1_core_1_1_i_paged_list.html">IPagedList</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_usage_history.html">DiscountUsageHistory</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a82773c7d05d67d1515bb09c01af45830">GetAllDiscountUsageHistoryAsync</a> (int? discountId=null, int? customerId=null, int? orderId=null, int pageIndex=0, int pageSize=int.MaxValue)</td></tr>
<tr class="memdesc:a82773c7d05d67d1515bb09c01af45830"><td class="mdescLeft">&#160;</td><td class="mdescRight">Gets all discount usage history records  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a82773c7d05d67d1515bb09c01af45830">Mais...</a><br /></td></tr>
<tr class="separator:a82773c7d05d67d1515bb09c01af45830"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7fdd3deac83776ca54a8da1bd90e068"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ac7fdd3deac83776ca54a8da1bd90e068">InsertDiscountUsageHistoryAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_usage_history.html">DiscountUsageHistory</a> discountUsageHistory)</td></tr>
<tr class="memdesc:ac7fdd3deac83776ca54a8da1bd90e068"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert discount usage history record  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ac7fdd3deac83776ca54a8da1bd90e068">Mais...</a><br /></td></tr>
<tr class="separator:ac7fdd3deac83776ca54a8da1bd90e068"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeee5d6a8c83ebd74f77b2a6f8b073676"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aeee5d6a8c83ebd74f77b2a6f8b073676">DeleteDiscountUsageHistoryAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_usage_history.html">DiscountUsageHistory</a> discountUsageHistory)</td></tr>
<tr class="memdesc:aeee5d6a8c83ebd74f77b2a6f8b073676"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete discount usage history record  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aeee5d6a8c83ebd74f77b2a6f8b073676">Mais...</a><br /></td></tr>
<tr class="separator:aeee5d6a8c83ebd74f77b2a6f8b073676"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Membros protegidos</h2></td></tr>
<tr class="memitem:a6f4b481604d8da9468e9931854bd70b3"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; bool &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6f4b481604d8da9468e9931854bd70b3">GetValidationResultAsync</a> (IEnumerable&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a> &gt; requirements, <a class="el" href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a490365ec8b9b10c68a75faf7599579ad">RequirementGroupInteractionType</a> groupInteractionType, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, List&lt; string &gt; errors)</td></tr>
<tr class="memdesc:a6f4b481604d8da9468e9931854bd70b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get discount validation result  <a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6f4b481604d8da9468e9931854bd70b3">Mais...</a><br /></td></tr>
<tr class="separator:a6f4b481604d8da9468e9931854bd70b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Atributos Privados</h2></td></tr>
<tr class="memitem:aa0f1b626d11051fd9478ea08691b078c"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa0f1b626d11051fd9478ea08691b078c">_customerService</a></td></tr>
<tr class="separator:aa0f1b626d11051fd9478ea08691b078c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47e8b463e721b62764c422fb897c2fdb"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_plugin_manager.html">IDiscountPluginManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a47e8b463e721b62764c422fb897c2fdb">_discountPluginManager</a></td></tr>
<tr class="separator:a47e8b463e721b62764c422fb897c2fdb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3940566704511945fcf1335c16b25a64"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html">ILocalizationService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a3940566704511945fcf1335c16b25a64">_localizationService</a></td></tr>
<tr class="separator:a3940566704511945fcf1335c16b25a64"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bfd458bddec2625db574edceafdc450"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html">IProductService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7bfd458bddec2625db574edceafdc450">_productService</a></td></tr>
<tr class="separator:a7bfd458bddec2625db574edceafdc450"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b70e805d0454c0015a3aef140331fae"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">_discountRepository</a></td></tr>
<tr class="separator:a6b70e805d0454c0015a3aef140331fae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f28560c885d0cd2af5b7b67e092330f"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">_discountRequirementRepository</a></td></tr>
<tr class="separator:a7f28560c885d0cd2af5b7b67e092330f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebfe1d356b57721e10184a9875e96a4d"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_usage_history.html">DiscountUsageHistory</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aebfe1d356b57721e10184a9875e96a4d">_discountUsageHistoryRepository</a></td></tr>
<tr class="separator:aebfe1d356b57721e10184a9875e96a4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a03034604eefece50a0f13606cc448c"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7a03034604eefece50a0f13606cc448c">_orderRepository</a></td></tr>
<tr class="separator:a7a03034604eefece50a0f13606cc448c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14d98a51b913f4f080ee4db60c74458f"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_core_1_1_caching_1_1_i_static_cache_manager.html">IStaticCacheManager</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a14d98a51b913f4f080ee4db60c74458f">_staticCacheManager</a></td></tr>
<tr class="separator:a14d98a51b913f4f080ee4db60c74458f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae98a07fb064c50a788228e3e685a4f0a"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html">IStoreContext</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ae98a07fb064c50a788228e3e685a4f0a">_storeContext</a></td></tr>
<tr class="separator:ae98a07fb064c50a788228e3e685a4f0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descrição detalhada</h2>
<div class="textblock"><p>Discount service </p>
</div><h2 class="groupheader">Documentação dos Construtores &amp; Destrutor</h2>
<a id="a33a9da51fb7787206c7bead8d3983d1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33a9da51fb7787206c7bead8d3983d1d">&#9670;&nbsp;</a></span>DiscountService()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Nop.Services.Discounts.DiscountService.DiscountService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a>&#160;</td>
          <td class="paramname"><em>customerService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_plugin_manager.html">IDiscountPluginManager</a>&#160;</td>
          <td class="paramname"><em>discountPluginManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html">ILocalizationService</a>&#160;</td>
          <td class="paramname"><em>localizationService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html">IProductService</a>&#160;</td>
          <td class="paramname"><em>productService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> &gt;&#160;</td>
          <td class="paramname"><em>discountRepository</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a> &gt;&#160;</td>
          <td class="paramname"><em>discountRequirementRepository</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_usage_history.html">DiscountUsageHistory</a> &gt;&#160;</td>
          <td class="paramname"><em>discountUsageHistoryRepository</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> &gt;&#160;</td>
          <td class="paramname"><em>orderRepository</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_core_1_1_caching_1_1_i_static_cache_manager.html">IStaticCacheManager</a>&#160;</td>
          <td class="paramname"><em>staticCacheManager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html">IStoreContext</a>&#160;</td>
          <td class="paramname"><em>storeContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        {</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa0f1b626d11051fd9478ea08691b078c">_customerService</a> = customerService;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a47e8b463e721b62764c422fb897c2fdb">_discountPluginManager</a> = discountPluginManager;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a3940566704511945fcf1335c16b25a64">_localizationService</a> = localizationService;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7bfd458bddec2625db574edceafdc450">_productService</a> = productService;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">_discountRepository</a> = discountRepository;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">_discountRequirementRepository</a> = discountRequirementRepository;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aebfe1d356b57721e10184a9875e96a4d">_discountUsageHistoryRepository</a> = discountUsageHistoryRepository;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7a03034604eefece50a0f13606cc448c">_orderRepository</a> = orderRepository;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a14d98a51b913f4f080ee4db60c74458f">_staticCacheManager</a> = staticCacheManager;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ae98a07fb064c50a788228e3e685a4f0a">_storeContext</a> = storeContext;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_a14d98a51b913f4f080ee4db60c74458f"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a14d98a51b913f4f080ee4db60c74458f">Nop.Services.Discounts.DiscountService._staticCacheManager</a></div><div class="ttdeci">readonly IStaticCacheManager _staticCacheManager</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:34</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_a3940566704511945fcf1335c16b25a64"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a3940566704511945fcf1335c16b25a64">Nop.Services.Discounts.DiscountService._localizationService</a></div><div class="ttdeci">readonly ILocalizationService _localizationService</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:28</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_a47e8b463e721b62764c422fb897c2fdb"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a47e8b463e721b62764c422fb897c2fdb">Nop.Services.Discounts.DiscountService._discountPluginManager</a></div><div class="ttdeci">readonly IDiscountPluginManager _discountPluginManager</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:27</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_a6b70e805d0454c0015a3aef140331fae"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">Nop.Services.Discounts.DiscountService._discountRepository</a></div><div class="ttdeci">readonly IRepository&lt; Discount &gt; _discountRepository</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:30</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_a7a03034604eefece50a0f13606cc448c"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7a03034604eefece50a0f13606cc448c">Nop.Services.Discounts.DiscountService._orderRepository</a></div><div class="ttdeci">readonly IRepository&lt; Order &gt; _orderRepository</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:33</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_a7bfd458bddec2625db574edceafdc450"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7bfd458bddec2625db574edceafdc450">Nop.Services.Discounts.DiscountService._productService</a></div><div class="ttdeci">readonly IProductService _productService</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:29</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_a7f28560c885d0cd2af5b7b67e092330f"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">Nop.Services.Discounts.DiscountService._discountRequirementRepository</a></div><div class="ttdeci">readonly IRepository&lt; DiscountRequirement &gt; _discountRequirementRepository</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:31</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_aa0f1b626d11051fd9478ea08691b078c"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa0f1b626d11051fd9478ea08691b078c">Nop.Services.Discounts.DiscountService._customerService</a></div><div class="ttdeci">readonly ICustomerService _customerService</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:26</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_ae98a07fb064c50a788228e3e685a4f0a"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ae98a07fb064c50a788228e3e685a4f0a">Nop.Services.Discounts.DiscountService._storeContext</a></div><div class="ttdeci">readonly IStoreContext _storeContext</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:35</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_aebfe1d356b57721e10184a9875e96a4d"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aebfe1d356b57721e10184a9875e96a4d">Nop.Services.Discounts.DiscountService._discountUsageHistoryRepository</a></div><div class="ttdeci">readonly IRepository&lt; DiscountUsageHistory &gt; _discountUsageHistoryRepository</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:32</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa0f1b626d11051fd9478ea08691b078c">Nop.Services.Discounts.DiscountService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a47e8b463e721b62764c422fb897c2fdb">Nop.Services.Discounts.DiscountService._discountPluginManager</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">Nop.Services.Discounts.DiscountService._discountRepository</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">Nop.Services.Discounts.DiscountService._discountRequirementRepository</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aebfe1d356b57721e10184a9875e96a4d">Nop.Services.Discounts.DiscountService._discountUsageHistoryRepository</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a3940566704511945fcf1335c16b25a64">Nop.Services.Discounts.DiscountService._localizationService</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7a03034604eefece50a0f13606cc448c">Nop.Services.Discounts.DiscountService._orderRepository</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7bfd458bddec2625db574edceafdc450">Nop.Services.Discounts.DiscountService._productService</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a14d98a51b913f4f080ee4db60c74458f">Nop.Services.Discounts.DiscountService._staticCacheManager</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ae98a07fb064c50a788228e3e685a4f0a">Nop.Services.Discounts.DiscountService._storeContext</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentação dos métodos</h2>
<a id="afda665165e0ad9ab7203cc37fb6f824e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afda665165e0ad9ab7203cc37fb6f824e">&#9670;&nbsp;</a></span>ContainsDiscount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool Nop.Services.Discounts.DiscountService.ContainsDiscount </td>
          <td>(</td>
          <td class="paramtype">IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> &gt;&#160;</td>
          <td class="paramname"><em>discounts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a>&#160;</td>
          <td class="paramname"><em>discount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check whether a list of discounts already contains a certain discount instance </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discounts</td><td>A list of discounts</td></tr>
    <tr><td class="paramname">discount</td><td>Discount to check</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>Result</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#aa31e5a6b1f11b300175fa360eb12b768">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            <span class="keywordflow">if</span> (discounts == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(discounts));</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160; </div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="keywordflow">if</span> (discount == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(discount));</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160; </div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="keywordflow">return</span> discounts.Any(dis1 =&gt; discount.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a> == dis1.Id);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_base_entity_html_a6908f7c042a024f82d7e7947e75bca53"><div class="ttname"><a href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Nop.Core.BaseEntity.Id</a></div><div class="ttdeci">int Id</div><div class="ttdoc">Gets or sets the entity identifier</div><div class="ttdef"><b>Definition:</b> BaseEntity.cs:11</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Nop.Core.BaseEntity.Id</a>.</p>

</div>
</div>
<a id="a75610f9260b052131869500464aa2610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a75610f9260b052131869500464aa2610">&#9670;&nbsp;</a></span>DeleteDiscountAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Services.Discounts.DiscountService.DeleteDiscountAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a>&#160;</td>
          <td class="paramname"><em>discount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete discount </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discount</td><td>Discount</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#abe847cd2f08a1d40565651e74543ae91">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;            <span class="comment">//first, delete related discount requirements</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">_discountRequirementRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a8e54f00f8fa70b8ee758015f453e067e">DeleteAsync</a>(await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa71c8e5823d75825751c27c52920d118">GetAllDiscountRequirementsAsync</a>(discount.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a>));</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;            <span class="comment">//then delete the discount</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">_discountRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a8e54f00f8fa70b8ee758015f453e067e">DeleteAsync</a>(discount);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_aa71c8e5823d75825751c27c52920d118"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa71c8e5823d75825751c27c52920d118">Nop.Services.Discounts.DiscountService.GetAllDiscountRequirementsAsync</a></div><div class="ttdeci">virtual async Task&lt; IList&lt; DiscountRequirement &gt; &gt; GetAllDiscountRequirementsAsync(int discountId=0, bool topLevelOnly=false)</div><div class="ttdoc">Get all discount requirements</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:383</div></div>
<div class="ttc" id="ainterface_nop_1_1_data_1_1_i_repository_html_a8e54f00f8fa70b8ee758015f453e067e"><div class="ttname"><a href="interface_nop_1_1_data_1_1_i_repository.html#a8e54f00f8fa70b8ee758015f453e067e">Nop.Data.IRepository.DeleteAsync</a></div><div class="ttdeci">Task DeleteAsync(TEntity entity, bool publishEvent=true)</div><div class="ttdoc">Delete the entity entry</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">Nop.Services.Discounts.DiscountService._discountRepository</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">Nop.Services.Discounts.DiscountService._discountRequirementRepository</a>, <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a8e54f00f8fa70b8ee758015f453e067e">Nop.Data.IRepository&lt; TEntity &gt;.DeleteAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa71c8e5823d75825751c27c52920d118">Nop.Services.Discounts.DiscountService.GetAllDiscountRequirementsAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Nop.Core.BaseEntity.Id</a>.</p>

</div>
</div>
<a id="a2cde2db5116c6294fe3ba4831a7c351d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cde2db5116c6294fe3ba4831a7c351d">&#9670;&nbsp;</a></span>DeleteDiscountRequirementAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Services.Discounts.DiscountService.DeleteDiscountRequirementAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a>&#160;</td>
          <td class="paramname"><em>discountRequirement</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>recursive</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete discount requirement </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discountRequirement</td><td>Discount requirement</td></tr>
    <tr><td class="paramname">recursive</td><td>A value indicating whether to recursively delete child requirements</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a6d0c56dfe84cad33f4310b68a5a093be">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;            <span class="keywordflow">if</span> (discountRequirement == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(discountRequirement));</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;            <span class="keywordflow">if</span> (recursive &amp;&amp; await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5c6b5e43639710a9943ac5c0e786e0e8">GetDiscountRequirementsByParentAsync</a>(discountRequirement) is IList&lt;DiscountRequirement&gt; children &amp;&amp; children.Any())</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                <span class="keywordflow">foreach</span> (var child <span class="keywordflow">in</span> children)</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a2cde2db5116c6294fe3ba4831a7c351d">DeleteDiscountRequirementAsync</a>(child, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160; </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">_discountRequirementRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a8e54f00f8fa70b8ee758015f453e067e">DeleteAsync</a>(discountRequirement);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_a2cde2db5116c6294fe3ba4831a7c351d"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a2cde2db5116c6294fe3ba4831a7c351d">Nop.Services.Discounts.DiscountService.DeleteDiscountRequirementAsync</a></div><div class="ttdeci">virtual async Task DeleteDiscountRequirementAsync(DiscountRequirement discountRequirement, bool recursive=false)</div><div class="ttdoc">Delete discount requirement</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:432</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_a5c6b5e43639710a9943ac5c0e786e0e8"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5c6b5e43639710a9943ac5c0e786e0e8">Nop.Services.Discounts.DiscountService.GetDiscountRequirementsByParentAsync</a></div><div class="ttdeci">virtual async Task&lt; IList&lt; DiscountRequirement &gt; &gt; GetDiscountRequirementsByParentAsync(DiscountRequirement discountRequirement)</div><div class="ttdoc">Gets child discount requirements</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:416</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">Nop.Services.Discounts.DiscountService._discountRequirementRepository</a>, <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a8e54f00f8fa70b8ee758015f453e067e">Nop.Data.IRepository&lt; TEntity &gt;.DeleteAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5c6b5e43639710a9943ac5c0e786e0e8">Nop.Services.Discounts.DiscountService.GetDiscountRequirementsByParentAsync()</a>.</p>

</div>
</div>
<a id="aeee5d6a8c83ebd74f77b2a6f8b073676"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeee5d6a8c83ebd74f77b2a6f8b073676">&#9670;&nbsp;</a></span>DeleteDiscountUsageHistoryAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Services.Discounts.DiscountService.DeleteDiscountUsageHistoryAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_usage_history.html">DiscountUsageHistory</a>&#160;</td>
          <td class="paramname"><em>discountUsageHistory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Delete discount usage history record </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discountUsageHistory</td><td>Discount usage history record</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#ada27da2e4727b5ef9667c9554c2a57c1">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;        {</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aebfe1d356b57721e10184a9875e96a4d">_discountUsageHistoryRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a8e54f00f8fa70b8ee758015f453e067e">DeleteAsync</a>(discountUsageHistory);</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aebfe1d356b57721e10184a9875e96a4d">Nop.Services.Discounts.DiscountService._discountUsageHistoryRepository</a> e <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a8e54f00f8fa70b8ee758015f453e067e">Nop.Data.IRepository&lt; TEntity &gt;.DeleteAsync()</a>.</p>

</div>
</div>
<a id="aa71c8e5823d75825751c27c52920d118"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa71c8e5823d75825751c27c52920d118">&#9670;&nbsp;</a></span>GetAllDiscountRequirementsAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a>&gt; &gt; Nop.Services.Discounts.DiscountService.GetAllDiscountRequirementsAsync </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>discountId</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>topLevelOnly</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get all discount requirements </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discountId</td><td>Discount identifier</td></tr>
    <tr><td class="paramname">topLevelOnly</td><td>Whether to load top-level requirements only (without parent identifier)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the requirements </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a3e1c6fc48388c9398f1fe753c02d9711">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        {</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">_discountRequirementRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a92f1bc87970e089b130c44cea0c46417">GetAllAsync</a>(query =&gt;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;            {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                <span class="comment">//filter by discount</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                <span class="keywordflow">if</span> (discountId &gt; 0)</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    query = query.Where(requirement =&gt; requirement.DiscountId == discountId);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                <span class="comment">//filter by top-level</span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a4cf4e33536c481efb4671a4518aa4c4e">if</a> (topLevelOnly)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                    query = query.Where(requirement =&gt; !requirement.ParentId.HasValue);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160; </div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                query = query.OrderBy(requirement =&gt; requirement.Id);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160; </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                <span class="keywordflow">return</span> query;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            });</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_data_1_1_i_repository_html_a92f1bc87970e089b130c44cea0c46417"><div class="ttname"><a href="interface_nop_1_1_data_1_1_i_repository.html#a92f1bc87970e089b130c44cea0c46417">Nop.Data.IRepository.GetAllAsync</a></div><div class="ttdeci">Task&lt; IList&lt; TEntity &gt; &gt; GetAllAsync(Func&lt; IQueryable&lt; TEntity &gt;, IQueryable&lt; TEntity &gt;&gt; func=null, Func&lt; IStaticCacheManager, CacheKey &gt; getCacheKey=null, bool includeDeleted=true)</div><div class="ttdoc">Get all entity entries</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_models_1_1_blogs_html_a4cf4e33536c481efb4671a4518aa4c4e"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a4cf4e33536c481efb4671a4518aa4c4e">Nop.Web.Models.Blogs.if</a></div><div class="ttdeci">if(!string.IsNullOrEmpty(Month))</div><div class="ttdef"><b>Definition:</b> BlogPagingFilteringModel.cs:13</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">Nop.Services.Discounts.DiscountService._discountRequirementRepository</a>, <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a92f1bc87970e089b130c44cea0c46417">Nop.Data.IRepository&lt; TEntity &gt;.GetAllAsync()</a> e <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a4cf4e33536c481efb4671a4518aa4c4e">Nop.Web.Models.Blogs.if()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a75610f9260b052131869500464aa2610">Nop.Services.Discounts.DiscountService.DeleteDiscountAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01b72a4010ac89b58b0262a65dda750a">Nop.Services.Discounts.DiscountService.ValidateDiscountAsync()</a>.</p>

</div>
</div>
<a id="ace11e14b00b4ad1661619230802064e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace11e14b00b4ad1661619230802064e7">&#9670;&nbsp;</a></span>GetAllDiscountsAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a>&gt; &gt; Nop.Services.Discounts.DiscountService.GetAllDiscountsAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a0528a9e289aca2a985743fdf3b419703">DiscountType</a>?&#160;</td>
          <td class="paramname"><em>discountType</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>couponCode</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>discountName</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>showHidden</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime?&#160;</td>
          <td class="paramname"><em>startDateUtc</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DateTime?&#160;</td>
          <td class="paramname"><em>endDateUtc</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets all discounts </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discountType</td><td>Discount type; pass null to load all records</td></tr>
    <tr><td class="paramname">couponCode</td><td>Coupon code to find (exact match); pass null or empty to load all records</td></tr>
    <tr><td class="paramname">discountName</td><td>Discount name; pass null or empty to load all records</td></tr>
    <tr><td class="paramname">showHidden</td><td>A value indicating whether to show expired and not started discounts</td></tr>
    <tr><td class="paramname">startDateUtc</td><td>Discount start date; pass null to load all records</td></tr>
    <tr><td class="paramname">endDateUtc</td><td>Discount end date; pass null to load all records</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the discounts </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a5765fffedf5f3d379a5a14e52fe6c130">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;        {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <span class="comment">//we load all discounts, and filter them using &quot;discountType&quot; parameter later (in memory)</span></div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            <span class="comment">//we do it because we know that this method is invoked several times per HTTP request with distinct &quot;discountType&quot; parameter</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;            <span class="comment">//that&#39;s why let&#39;s access the database only once</span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;            var discounts = (await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">_discountRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a92f1bc87970e089b130c44cea0c46417">GetAllAsync</a>(query =&gt;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;            {</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="keywordflow">if</span> (!showHidden)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                    query = query.Where(discount =&gt;</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                        (!discount.StartDateUtc.HasValue || discount.StartDateUtc &lt;= DateTime.UtcNow) &amp;&amp;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                        (!discount.EndDateUtc.HasValue || discount.EndDateUtc &gt;= DateTime.UtcNow));</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                <span class="comment">//filter by coupon code</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a4cf4e33536c481efb4671a4518aa4c4e">if</a> (!<span class="keywordtype">string</span>.IsNullOrEmpty(couponCode))</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    query = query.Where(discount =&gt; discount.CouponCode == couponCode);</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                <span class="comment">//filter by name</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a4cf4e33536c481efb4671a4518aa4c4e">if</a> (!<span class="keywordtype">string</span>.IsNullOrEmpty(discountName))</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    query = query.Where(discount =&gt; discount.Name.Contains(discountName));</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160; </div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                query = query.OrderBy(discount =&gt; discount.Name).ThenBy(discount =&gt; discount.Id);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                <span class="keywordflow">return</span> query;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            }, cache =&gt; cache.PrepareKeyForDefaultCache(NopDiscountDefaults.DiscountAllCacheKey, </div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                showHidden, couponCode ?? <span class="keywordtype">string</span>.Empty, discountName ?? <span class="keywordtype">string</span>.Empty)))</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            .AsQueryable();</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="comment">//we know that this method is usually invoked multiple times</span></div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            <span class="comment">//that&#39;s why we filter discounts by type and dates on the application layer</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;            <span class="keywordflow">if</span> (discountType.HasValue)</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                discounts = discounts.Where(discount =&gt; discount.DiscountType == discountType.Value);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="comment">//filter by dates</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;            <span class="keywordflow">if</span> (startDateUtc.HasValue)</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                discounts = discounts.Where(discount =&gt;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    !discount.StartDateUtc.HasValue || discount.StartDateUtc &gt;= startDateUtc.Value);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;            <span class="keywordflow">if</span> (endDateUtc.HasValue)</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                discounts = discounts.Where(discount =&gt;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                    !discount.EndDateUtc.HasValue || discount.EndDateUtc &lt;= endDateUtc.Value);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160; </div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordflow">return</span> discounts.ToList();</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">Nop.Services.Discounts.DiscountService._discountRepository</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_nop_discount_defaults.html#ac491bb5e55ded939873c904328860064">Nop.Services.Discounts.NopDiscountDefaults.DiscountAllCacheKey</a>, <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a92f1bc87970e089b130c44cea0c46417">Nop.Data.IRepository&lt; TEntity &gt;.GetAllAsync()</a> e <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a4cf4e33536c481efb4671a4518aa4c4e">Nop.Web.Models.Blogs.if()</a>.</p>

</div>
</div>
<a id="a82773c7d05d67d1515bb09c01af45830"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82773c7d05d67d1515bb09c01af45830">&#9670;&nbsp;</a></span>GetAllDiscountUsageHistoryAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="interface_nop_1_1_core_1_1_i_paged_list.html">IPagedList</a>&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_usage_history.html">DiscountUsageHistory</a>&gt; &gt; Nop.Services.Discounts.DiscountService.GetAllDiscountUsageHistoryAsync </td>
          <td>(</td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>discountId</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>customerId</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>orderId</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pageIndex</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pageSize</em> = <code>int.MaxValue</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets all discount usage history records </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discountId</td><td>Discount identifier; null to load all records</td></tr>
    <tr><td class="paramname">customerId</td><td>Customer identifier; null to load all records</td></tr>
    <tr><td class="paramname">orderId</td><td>Order identifier; null to load all records</td></tr>
    <tr><td class="paramname">pageIndex</td><td>Page index</td></tr>
    <tr><td class="paramname">pageSize</td><td>Page size</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the discount usage history records </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a0473d241079dd560242837ac5c9f7460">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        {</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aebfe1d356b57721e10184a9875e96a4d">_discountUsageHistoryRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#aad1563671021d49594b565230aaf58d8">GetAllPagedAsync</a>(query =&gt;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            {</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                <span class="comment">//filter by discount</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;                <span class="keywordflow">if</span> (discountId.HasValue &amp;&amp; discountId.Value &gt; 0)</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                    query = query.Where(historyRecord =&gt; historyRecord.DiscountId == discountId.Value);</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160; </div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                <span class="comment">//filter by customer</span></div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a4cf4e33536c481efb4671a4518aa4c4e">if</a> (customerId.HasValue &amp;&amp; customerId.Value &gt; 0)</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;                    query = from duh in query</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                        join order in <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7a03034604eefece50a0f13606cc448c">_orderRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a60d582452490ce8497c2808acbab5f6c">Table</a> on duh.OrderId equals order.Id</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                        where order.CustomerId == customerId</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                        select duh;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160; </div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                <span class="comment">//filter by order</span></div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a4cf4e33536c481efb4671a4518aa4c4e">if</a> (orderId.HasValue &amp;&amp; orderId.Value &gt; 0)</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                    query = query.Where(historyRecord =&gt; historyRecord.OrderId == orderId.Value);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                <span class="comment">//ignore deleted orders</span></div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                query = from duh in query</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;                    join order in <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7a03034604eefece50a0f13606cc448c">_orderRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a60d582452490ce8497c2808acbab5f6c">Table</a> on duh.OrderId equals order.Id</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                    where !order.Deleted</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                    select duh;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                <span class="comment">//order</span></div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;                query = query.OrderByDescending(historyRecord =&gt; historyRecord.CreatedOnUtc)</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                    .ThenBy(historyRecord =&gt; historyRecord.Id);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160; </div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;                <span class="keywordflow">return</span> query;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;            }, pageIndex, pageSize);</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_data_1_1_i_repository_html_a60d582452490ce8497c2808acbab5f6c"><div class="ttname"><a href="interface_nop_1_1_data_1_1_i_repository.html#a60d582452490ce8497c2808acbab5f6c">Nop.Data.IRepository.Table</a></div><div class="ttdeci">IQueryable&lt; TEntity &gt; Table</div><div class="ttdoc">Gets a table</div><div class="ttdef"><b>Definition:</b> IRepository.cs:210</div></div>
<div class="ttc" id="ainterface_nop_1_1_data_1_1_i_repository_html_aad1563671021d49594b565230aaf58d8"><div class="ttname"><a href="interface_nop_1_1_data_1_1_i_repository.html#aad1563671021d49594b565230aaf58d8">Nop.Data.IRepository.GetAllPagedAsync</a></div><div class="ttdeci">Task&lt; IPagedList&lt; TEntity &gt; &gt; GetAllPagedAsync(Func&lt; IQueryable&lt; TEntity &gt;, IQueryable&lt; TEntity &gt;&gt; func=null, int pageIndex=0, int pageSize=int.MaxValue, bool getOnlyTotalCount=false, bool includeDeleted=true)</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aebfe1d356b57721e10184a9875e96a4d">Nop.Services.Discounts.DiscountService._discountUsageHistoryRepository</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7a03034604eefece50a0f13606cc448c">Nop.Services.Discounts.DiscountService._orderRepository</a>, <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#aad1563671021d49594b565230aaf58d8">Nop.Data.IRepository&lt; TEntity &gt;.GetAllPagedAsync()</a>, <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a4cf4e33536c481efb4671a4518aa4c4e">Nop.Web.Models.Blogs.if()</a> e <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a60d582452490ce8497c2808acbab5f6c">Nop.Data.IRepository&lt; TEntity &gt;.Table</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01b72a4010ac89b58b0262a65dda750a">Nop.Services.Discounts.DiscountService.ValidateDiscountAsync()</a>.</p>

</div>
</div>
<a id="a5900a17be57567dd1cbf4680baee9b37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5900a17be57567dd1cbf4680baee9b37">&#9670;&nbsp;</a></span>GetAppliedDiscountsAsync&lt; T &gt;()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a>&gt; &gt; Nop.Services.Discounts.DiscountService.GetAppliedDiscountsAsync&lt; T &gt; </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_core_1_1_domain_1_1_discounts_1_1_i_discount_supported.html">IDiscountSupported</a>&lt; T &gt;&#160;</td>
          <td class="paramname"><em>entity</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets discounts applied to entity </p>
<dl class="tparams"><dt>Parâmetros de template</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">T</td><td>Type based on DiscountMapping</td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">entity</td><td>Entity which supports discounts (IDiscountSupported&lt;T&gt;)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the list of discounts </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a4c6ee146a23b717ea6561b8812c6fa3c">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="typeconstraint">
<dl><dt><b>Restrições do Tipo</b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>T</em></td><td>&#160;:</td><td valign="top"><em>DiscountMapping</em></td><td>&#160;</td></tr>
</table>
</dd>
</dl>
</div>
<div class="fragment"><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                                                                                                                     : <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_mapping.html">DiscountMapping</a></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        {</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;            var discountMappingRepository = <a class="code" href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html">EngineContext</a>.<a class="code" href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html#a3aa3185b6b7474f2781a575e880645fd">Current</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_engine.html#a9cc3489ec1597daa4c030815dcdd897e">Resolve</a>&lt;<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository&lt;T&gt;</a>&gt;();</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160; </div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            var cacheKey = <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a14d98a51b913f4f080ee4db60c74458f">_staticCacheManager</a>.<a class="code" href="interface_nop_1_1_core_1_1_caching_1_1_i_static_cache_manager.html#ae0d7b4f85ef5eecb2a080a4126fd3f80">PrepareKeyForShortTermCache</a>(NopDiscountDefaults.AppliedDiscountsCacheKey, entity.GetType().Name, entity);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160; </div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;            var appliedDiscounts= await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a14d98a51b913f4f080ee4db60c74458f">_staticCacheManager</a>.GetAsync(cacheKey,</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                async () =&gt;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                    <span class="keywordflow">return</span> await (from d in <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">_discountRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a60d582452490ce8497c2808acbab5f6c">Table</a></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                        join ad in discountMappingRepository.Table on d.Id equals ad.DiscountId</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                        where ad.EntityId == entity.<a class="code" href="interface_nop_1_1_core_1_1_domain_1_1_discounts_1_1_i_discount_supported.html#a21f5a3b83402fdbc847fb92755cecf18">Id</a></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                        select d).ToListAsync();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                });</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160; </div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">return</span> appliedDiscounts;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_mapping_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_mapping.html">Nop.Core.Domain.Discounts.DiscountMapping</a></div><div class="ttdef"><b>Definition:</b> DiscountMapping.cs:4</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_infrastructure_1_1_engine_context_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html">Nop.Core.Infrastructure.EngineContext</a></div><div class="ttdoc">Provides access to the singleton instance of the Nop engine.</div><div class="ttdef"><b>Definition:</b> EngineContext.cs:9</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_infrastructure_1_1_engine_context_html_a3aa3185b6b7474f2781a575e880645fd"><div class="ttname"><a href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html#a3aa3185b6b7474f2781a575e880645fd">Nop.Core.Infrastructure.EngineContext.Current</a></div><div class="ttdeci">static IEngine Current</div><div class="ttdoc">Gets the singleton Nop engine used to access Nop services.</div><div class="ttdef"><b>Definition:</b> EngineContext.cs:40</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_caching_1_1_i_static_cache_manager_html_ae0d7b4f85ef5eecb2a080a4126fd3f80"><div class="ttname"><a href="interface_nop_1_1_core_1_1_caching_1_1_i_static_cache_manager.html#ae0d7b4f85ef5eecb2a080a4126fd3f80">Nop.Core.Caching.IStaticCacheManager.PrepareKeyForShortTermCache</a></div><div class="ttdeci">CacheKey PrepareKeyForShortTermCache(CacheKey cacheKey, params object[] cacheKeyParameters)</div><div class="ttdoc">Create a copy of cache key using the short cache time and fills it by passed parameters</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_domain_1_1_discounts_1_1_i_discount_supported_html_a21f5a3b83402fdbc847fb92755cecf18"><div class="ttname"><a href="interface_nop_1_1_core_1_1_domain_1_1_discounts_1_1_i_discount_supported.html#a21f5a3b83402fdbc847fb92755cecf18">Nop.Core.Domain.Discounts.IDiscountSupported.Id</a></div><div class="ttdeci">int Id</div><div class="ttdef"><b>Definition:</b> IDiscountSupported.cs:8</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_infrastructure_1_1_i_engine_html_a9cc3489ec1597daa4c030815dcdd897e"><div class="ttname"><a href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_engine.html#a9cc3489ec1597daa4c030815dcdd897e">Nop.Core.Infrastructure.IEngine.Resolve</a></div><div class="ttdeci">object Resolve(Type type, IServiceScope scope=null)</div><div class="ttdoc">Resolve dependency</div></div>
<div class="ttc" id="ainterface_nop_1_1_data_1_1_i_repository_html"><div class="ttname"><a href="interface_nop_1_1_data_1_1_i_repository.html">Nop.Data.IRepository</a></div><div class="ttdoc">Represents an entity repository</div><div class="ttdef"><b>Definition:</b> IRepository.cs:17</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">Nop.Services.Discounts.DiscountService._discountRepository</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a14d98a51b913f4f080ee4db60c74458f">Nop.Services.Discounts.DiscountService._staticCacheManager</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_nop_discount_defaults.html#ae9db32aa1c600b7268757523321baff9">Nop.Services.Discounts.NopDiscountDefaults.AppliedDiscountsCacheKey</a>, <a class="el" href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html#a3aa3185b6b7474f2781a575e880645fd">Nop.Core.Infrastructure.EngineContext.Current</a>, <a class="el" href="interface_nop_1_1_core_1_1_caching_1_1_i_static_cache_manager.html#ae0d7b4f85ef5eecb2a080a4126fd3f80">Nop.Core.Caching.IStaticCacheManager.PrepareKeyForShortTermCache()</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_engine.html#a9cc3489ec1597daa4c030815dcdd897e">Nop.Core.Infrastructure.IEngine.Resolve()</a> e <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a60d582452490ce8497c2808acbab5f6c">Nop.Data.IRepository&lt; TEntity &gt;.Table</a>.</p>

</div>
</div>
<a id="a6019cffc900f5f27bf2eddceaa7533f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6019cffc900f5f27bf2eddceaa7533f4">&#9670;&nbsp;</a></span>GetDiscountAmount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual decimal Nop.Services.Discounts.DiscountService.GetDiscountAmount </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a>&#160;</td>
          <td class="paramname"><em>discount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">decimal&#160;</td>
          <td class="paramname"><em>amount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets the discount amount for the specified value </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discount</td><td>Discount</td></tr>
    <tr><td class="paramname">amount</td><td>Amount</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>The discount amount</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a6969a30cb68956a0f479bf104de5bd79">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        {</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <span class="keywordflow">if</span> (discount == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(discount));</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            <span class="comment">//calculate discount amount</span></div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            decimal <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            <span class="keywordflow">if</span> (discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a3e50a4c9ca8f05787729987fb391fa17">UsePercentage</a>)</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = (decimal)((<span class="keywordtype">float</span>)amount * (float)discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a3904648ba770b998a280a5bc6d2d0fac">DiscountPercentage</a> / 100f);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="keywordflow">else</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a5a031091ae813aaa38ee317f5d4e2eea">DiscountAmount</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160; </div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <span class="comment">//validate maximum discount amount</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">if</span> (discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a3e50a4c9ca8f05787729987fb391fa17">UsePercentage</a> &amp;&amp;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a15db286b2ad6d729a55af0b97dcbab1b">MaximumDiscountAmount</a>.HasValue &amp;&amp;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> &gt; discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a15db286b2ad6d729a55af0b97dcbab1b">MaximumDiscountAmount</a>.Value)</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a15db286b2ad6d729a55af0b97dcbab1b">MaximumDiscountAmount</a>.Value;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> &lt; decimal.Zero)</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = decimal.Zero;</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_html_a15db286b2ad6d729a55af0b97dcbab1b"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a15db286b2ad6d729a55af0b97dcbab1b">Nop.Core.Domain.Discounts.Discount.MaximumDiscountAmount</a></div><div class="ttdeci">decimal? MaximumDiscountAmount</div><div class="ttdoc">Gets or sets the maximum discount amount (used with &quot;UsePercentage&quot;)</div><div class="ttdef"><b>Definition:</b> Discount.cs:43</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_html_a3904648ba770b998a280a5bc6d2d0fac"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a3904648ba770b998a280a5bc6d2d0fac">Nop.Core.Domain.Discounts.Discount.DiscountPercentage</a></div><div class="ttdeci">decimal DiscountPercentage</div><div class="ttdoc">Gets or sets the discount percentage</div><div class="ttdef"><b>Definition:</b> Discount.cs:33</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_html_a3e50a4c9ca8f05787729987fb391fa17"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a3e50a4c9ca8f05787729987fb391fa17">Nop.Core.Domain.Discounts.Discount.UsePercentage</a></div><div class="ttdeci">bool UsePercentage</div><div class="ttdoc">Gets or sets a value indicating whether to use percentage</div><div class="ttdef"><b>Definition:</b> Discount.cs:28</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_html_a5a031091ae813aaa38ee317f5d4e2eea"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a5a031091ae813aaa38ee317f5d4e2eea">Nop.Core.Domain.Discounts.Discount.DiscountAmount</a></div><div class="ttdeci">decimal DiscountAmount</div><div class="ttdoc">Gets or sets the discount amount</div><div class="ttdef"><b>Definition:</b> Discount.cs:38</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_models_1_1_blogs_html_a6cc3986434c188bc64f7d71789d4a5c8"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a></div><div class="ttdeci">return result</div><div class="ttdef"><b>Definition:</b> BlogPagingFilteringModel.cs:21</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a5a031091ae813aaa38ee317f5d4e2eea">Nop.Core.Domain.Discounts.Discount.DiscountAmount</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a3904648ba770b998a280a5bc6d2d0fac">Nop.Core.Domain.Discounts.Discount.DiscountPercentage</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a15db286b2ad6d729a55af0b97dcbab1b">Nop.Core.Domain.Discounts.Discount.MaximumDiscountAmount</a>, <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a3e50a4c9ca8f05787729987fb391fa17">Nop.Core.Domain.Discounts.Discount.UsePercentage</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_tests_1_1_nop_1_1_services_1_1_tests_1_1_discounts_1_1_discount_extensions.html#a77774bc166869cc52289905dca69296b">Nop.Tests.Nop.Services.Tests.Discounts.DiscountExtensions.GetDiscountAmount()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a13a3d5a024b4c1bef87d5858f51e49d6">Nop.Services.Discounts.DiscountService.GetPreferredDiscount()</a>.</p>

</div>
</div>
<a id="ae37476608061cf4c3c9e9205ac3d98c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae37476608061cf4c3c9e9205ac3d98c6">&#9670;&nbsp;</a></span>GetDiscountByIdAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a>&gt; Nop.Services.Discounts.DiscountService.GetDiscountByIdAsync </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>discountId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a discount </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discountId</td><td>Discount identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the discount </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a9697750465b8fa7893867cb73d358842">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">_discountRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a83ceffb612cb7d97b1b0518a5fea707c">GetByIdAsync</a>(discountId, cache =&gt; <span class="keywordflow">default</span>);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_data_1_1_i_repository_html_a83ceffb612cb7d97b1b0518a5fea707c"><div class="ttname"><a href="interface_nop_1_1_data_1_1_i_repository.html#a83ceffb612cb7d97b1b0518a5fea707c">Nop.Data.IRepository.GetByIdAsync</a></div><div class="ttdeci">Task&lt; TEntity &gt; GetByIdAsync(int? id, Func&lt; IStaticCacheManager, CacheKey &gt; getCacheKey=null, bool includeDeleted=true)</div><div class="ttdoc">Get the entity entry</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">Nop.Services.Discounts.DiscountService._discountRepository</a> e <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a83ceffb612cb7d97b1b0518a5fea707c">Nop.Data.IRepository&lt; TEntity &gt;.GetByIdAsync()</a>.</p>

</div>
</div>
<a id="a1992ceb827be9ab749d21bd5e59f3455"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1992ceb827be9ab749d21bd5e59f3455">&#9670;&nbsp;</a></span>GetDiscountRequirementByIdAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a>&gt; Nop.Services.Discounts.DiscountService.GetDiscountRequirementByIdAsync </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>discountRequirementId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get a discount requirement </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discountRequirementId</td><td>Discount requirement identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a1987868484c03d489973d7d4c183686f">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        {</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;            <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">_discountRequirementRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a83ceffb612cb7d97b1b0518a5fea707c">GetByIdAsync</a>(discountRequirementId, cache =&gt; <span class="keywordflow">default</span>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">Nop.Services.Discounts.DiscountService._discountRequirementRepository</a> e <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a83ceffb612cb7d97b1b0518a5fea707c">Nop.Data.IRepository&lt; TEntity &gt;.GetByIdAsync()</a>.</p>

</div>
</div>
<a id="a5c6b5e43639710a9943ac5c0e786e0e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c6b5e43639710a9943ac5c0e786e0e8">&#9670;&nbsp;</a></span>GetDiscountRequirementsByParentAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a>&gt; &gt; Nop.Services.Discounts.DiscountService.GetDiscountRequirementsByParentAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a>&#160;</td>
          <td class="paramname"><em>discountRequirement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets child discount requirements </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discountRequirement</td><td>Parent discount requirement</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#ab24d4d8850f798e70841f34f2d1c88be">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;            <span class="keywordflow">if</span> (discountRequirement is <span class="keyword">null</span>)</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(discountRequirement));</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160; </div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">_discountRequirementRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a60d582452490ce8497c2808acbab5f6c">Table</a></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                .Where(dr =&gt; dr.ParentId == discountRequirement.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a>)</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                .ToListAsync();</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">Nop.Services.Discounts.DiscountService._discountRequirementRepository</a>, <a class="el" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Nop.Core.BaseEntity.Id</a> e <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a60d582452490ce8497c2808acbab5f6c">Nop.Data.IRepository&lt; TEntity &gt;.Table</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a2cde2db5116c6294fe3ba4831a7c351d">Nop.Services.Discounts.DiscountService.DeleteDiscountRequirementAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6f4b481604d8da9468e9931854bd70b3">Nop.Services.Discounts.DiscountService.GetValidationResultAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01b72a4010ac89b58b0262a65dda750a">Nop.Services.Discounts.DiscountService.ValidateDiscountAsync()</a>.</p>

</div>
</div>
<a id="afb7db5be2629abd191b6cb9ee9c80b3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb7db5be2629abd191b6cb9ee9c80b3b">&#9670;&nbsp;</a></span>GetDiscountUsageHistoryByIdAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_usage_history.html">DiscountUsageHistory</a>&gt; Nop.Services.Discounts.DiscountService.GetDiscountUsageHistoryByIdAsync </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>discountUsageHistoryId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Gets a discount usage history record </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discountUsageHistoryId</td><td>Discount usage history record identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the discount usage history </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a90a77c9cd68213c4c7c94b98c4bd2031">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        {</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aebfe1d356b57721e10184a9875e96a4d">_discountUsageHistoryRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a83ceffb612cb7d97b1b0518a5fea707c">GetByIdAsync</a>(discountUsageHistoryId);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aebfe1d356b57721e10184a9875e96a4d">Nop.Services.Discounts.DiscountService._discountUsageHistoryRepository</a> e <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a83ceffb612cb7d97b1b0518a5fea707c">Nop.Data.IRepository&lt; TEntity &gt;.GetByIdAsync()</a>.</p>

</div>
</div>
<a id="a13a3d5a024b4c1bef87d5858f51e49d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a13a3d5a024b4c1bef87d5858f51e49d6">&#9670;&nbsp;</a></span>GetPreferredDiscount()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual List&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a>&gt; Nop.Services.Discounts.DiscountService.GetPreferredDiscount </td>
          <td>(</td>
          <td class="paramtype">IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a> &gt;&#160;</td>
          <td class="paramname"><em>discounts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">decimal&#160;</td>
          <td class="paramname"><em>amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">out decimal&#160;</td>
          <td class="paramname"><em>discountAmount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get preferred discount (with maximum discount value) </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discounts</td><td>A list of discounts to check</td></tr>
    <tr><td class="paramname">amount</td><td>Amount (initial value)</td></tr>
    <tr><td class="paramname">discountAmount</td><td>Discount amount</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>Preferred discount</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#ac0680331ca9fd90950767f9c0b4476dd">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            <span class="keywordflow">if</span> (discounts == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(discounts));</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160; </div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            var <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = <span class="keyword">new</span> List&lt;Discount&gt;();</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;            discountAmount = decimal.Zero;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            <span class="keywordflow">if</span> (!discounts.Any())</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160; </div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="comment">//first we check simple discounts</span></div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;            <span class="keywordflow">foreach</span> (var discount <span class="keywordflow">in</span> discounts)</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;            {</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                var currentDiscountValue = <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6019cffc900f5f27bf2eddceaa7533f4">GetDiscountAmount</a>(discount, amount);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                <span class="keywordflow">if</span> (currentDiscountValue &lt;= discountAmount)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160; </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                discountAmount = currentDiscountValue;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160; </div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.Clear();</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.Add(discount);</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            }</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="comment">//now let&#39;s check cumulative discounts</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;            <span class="comment">//right now we calculate discount values based on the original amount value</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="comment">//please keep it in mind if you&#39;re going to use discounts with &quot;percentage&quot;</span></div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            var cumulativeDiscounts = discounts.Where(x =&gt; x.IsCumulative).OrderBy(x =&gt; x.Name).ToList();</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;            <span class="keywordflow">if</span> (cumulativeDiscounts.Count &lt;= 1)</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            var cumulativeDiscountAmount = cumulativeDiscounts.Sum(d =&gt; <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6019cffc900f5f27bf2eddceaa7533f4">GetDiscountAmount</a>(d, amount));</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            <span class="keywordflow">if</span> (cumulativeDiscountAmount &lt;= discountAmount)</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160; </div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            discountAmount = cumulativeDiscountAmount;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;            <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.Clear();</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;            <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.AddRange(cumulativeDiscounts);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160; </div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_a6019cffc900f5f27bf2eddceaa7533f4"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6019cffc900f5f27bf2eddceaa7533f4">Nop.Services.Discounts.DiscountService.GetDiscountAmount</a></div><div class="ttdeci">virtual decimal GetDiscountAmount(Discount discount, decimal amount)</div><div class="ttdoc">Gets the discount amount for the specified value</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:280</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6019cffc900f5f27bf2eddceaa7533f4">Nop.Services.Discounts.DiscountService.GetDiscountAmount()</a> e <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a>.</p>

</div>
</div>
<a id="a6f4b481604d8da9468e9931854bd70b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f4b481604d8da9468e9931854bd70b3">&#9670;&nbsp;</a></span>GetValidationResultAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;bool&gt; Nop.Services.Discounts.DiscountService.GetValidationResultAsync </td>
          <td>(</td>
          <td class="paramtype">IEnumerable&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a> &gt;&#160;</td>
          <td class="paramname"><em>requirements</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a490365ec8b9b10c68a75faf7599579ad">RequirementGroupInteractionType</a>&#160;</td>
          <td class="paramname"><em>groupInteractionType</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">List&lt; string &gt;&#160;</td>
          <td class="paramname"><em>errors</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get discount validation result </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">requirements</td><td>Collection of discount requirement</td></tr>
    <tr><td class="paramname">groupInteractionType</td><td>Interaction type within the group of requirements</td></tr>
    <tr><td class="paramname">customer</td><td>Customer</td></tr>
    <tr><td class="paramname">errors</td><td>Errors</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the rue if result is valid; otherwise false </dd></dl>
<div class="fragment"><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        {</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            var <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160; </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <span class="keywordflow">foreach</span> (var requirement <span class="keywordflow">in</span> requirements)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                <span class="keywordflow">if</span> (requirement.IsGroup)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                {</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                    var childRequirements = await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5c6b5e43639710a9943ac5c0e786e0e8">GetDiscountRequirementsByParentAsync</a>(requirement);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                    <span class="comment">//get child requirements for the group</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                    var interactionType = requirement.InteractionType ?? <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a490365ec8b9b10c68a75faf7599579ad">RequirementGroupInteractionType</a>.And;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6f4b481604d8da9468e9931854bd70b3">GetValidationResultAsync</a>(childRequirements, interactionType, customer, errors);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                }</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                    <span class="comment">//or try to get validation result for the requirement</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                    var requirementRulePlugin = await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a47e8b463e721b62764c422fb897c2fdb">_discountPluginManager</a></div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                        .<a class="code" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">LoadPluginBySystemNameAsync</a>(requirement.DiscountRequirementRuleSystemName, customer, (await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ae98a07fb064c50a788228e3e685a4f0a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>()).Id);</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                    <span class="keywordflow">if</span> (requirementRulePlugin == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                    var ruleResult = await requirementRulePlugin.CheckRequirementAsync(<span class="keyword">new</span> DiscountRequirementValidationRequest</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                    {</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                        <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_discounts.html#a7b8ad57875368a2319ee7799937d90fb">DiscountRequirementId</a> = requirement.Id,</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                        <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> = customer,</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                        <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#a547a17773c8cb66c82ab17a0f133550e">Store</a> = await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ae98a07fb064c50a788228e3e685a4f0a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>()</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    });</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160; </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                    <span class="comment">//add validation error</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                    <span class="keywordflow">if</span> (!ruleResult.IsValid)</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                        var userError = !<span class="keywordtype">string</span>.IsNullOrEmpty(ruleResult.UserError)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                            ? ruleResult.UserError</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                            : await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a3940566704511945fcf1335c16b25a64">_localizationService</a>.<a class="code" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html#ac1ae5d2f3ddfea87ce1f780c9294656a">GetResourceAsync</a>(<span class="stringliteral">&quot;ShoppingCart.Discount.CannotBeUsed&quot;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                        errors.Add(userError);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                    }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = ruleResult.IsValid;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                }</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                <span class="comment">//all requirements must be met, so return false</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                <span class="keywordflow">if</span> (!<a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> &amp;&amp; groupInteractionType == <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a490365ec8b9b10c68a75faf7599579ad">RequirementGroupInteractionType</a>.And)</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160; </div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                <span class="comment">//any of requirements must be met, so return true</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> &amp;&amp; groupInteractionType == <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a490365ec8b9b10c68a75faf7599579ad">RequirementGroupInteractionType</a>.Or)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160; </div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Nop.Core.Domain.Customers.Customer</a></div><div class="ttdoc">Represents a customer</div><div class="ttdef"><b>Definition:</b> Customer.cs:10</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_a6f4b481604d8da9468e9931854bd70b3"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6f4b481604d8da9468e9931854bd70b3">Nop.Services.Discounts.DiscountService.GetValidationResultAsync</a></div><div class="ttdeci">async Task&lt; bool &gt; GetValidationResultAsync(IEnumerable&lt; DiscountRequirement &gt; requirements, RequirementGroupInteractionType groupInteractionType, Customer customer, List&lt; string &gt; errors)</div><div class="ttdoc">Get discount validation result</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:79</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_i_store_context_html_ab98a28cdb13e78df5beea58801148f19"><div class="ttname"><a href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync</a></div><div class="ttdeci">Task&lt; Store &gt; GetCurrentStoreAsync()</div><div class="ttdoc">Gets the current store</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_localization_1_1_i_localization_service_html_ac1ae5d2f3ddfea87ce1f780c9294656a"><div class="ttname"><a href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html#ac1ae5d2f3ddfea87ce1f780c9294656a">Nop.Services.Localization.ILocalizationService.GetResourceAsync</a></div><div class="ttdeci">Task&lt; string &gt; GetResourceAsync(string resourceKey)</div><div class="ttdoc">Gets a resource string based on the specified ResourceKey property.</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager_html_ae65d47d1226a9c2099ff48e24a976235"><div class="ttname"><a href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager.LoadPluginBySystemNameAsync</a></div><div class="ttdeci">Task&lt; TPlugin &gt; LoadPluginBySystemNameAsync(string systemName, Customer customer=null, int storeId=0)</div><div class="ttdoc">Load plugin by system name</div></div>
<div class="ttc" id="anamespace_nop_1_1_core_1_1_domain_1_1_discounts_html_a490365ec8b9b10c68a75faf7599579ad"><div class="ttname"><a href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a490365ec8b9b10c68a75faf7599579ad">Nop.Core.Domain.Discounts.RequirementGroupInteractionType</a></div><div class="ttdeci">RequirementGroupInteractionType</div><div class="ttdoc">Represents an interaction type within the group of requirements</div><div class="ttdef"><b>Definition:</b> RequirementGroupInteractionType.cs:7</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog_html_a547a17773c8cb66c82ab17a0f133550e"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#a547a17773c8cb66c82ab17a0f133550e">Nop.Web.Areas.Admin.Models.Catalog.Store</a></div><div class="ttdeci">string Store</div><div class="ttdef"><b>Definition:</b> TierPriceModel.cs:41</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_discounts_html_a7b8ad57875368a2319ee7799937d90fb"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_discounts.html#a7b8ad57875368a2319ee7799937d90fb">Nop.Web.Areas.Admin.Models.Discounts.DiscountRequirementId</a></div><div class="ttdeci">int DiscountRequirementId</div><div class="ttdef"><b>Definition:</b> DiscountRequirementRuleModel.cs:23</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a47e8b463e721b62764c422fb897c2fdb">Nop.Services.Discounts.DiscountService._discountPluginManager</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a3940566704511945fcf1335c16b25a64">Nop.Services.Discounts.DiscountService._localizationService</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ae98a07fb064c50a788228e3e685a4f0a">Nop.Services.Discounts.DiscountService._storeContext</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_discounts.html#a7b8ad57875368a2319ee7799937d90fb">Nop.Web.Areas.Admin.Models.Discounts.DiscountRequirementId</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5c6b5e43639710a9943ac5c0e786e0e8">Nop.Services.Discounts.DiscountService.GetDiscountRequirementsByParentAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html#ac1ae5d2f3ddfea87ce1f780c9294656a">Nop.Services.Localization.ILocalizationService.GetResourceAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_plugins_1_1_i_plugin_manager.html#ae65d47d1226a9c2099ff48e24a976235">Nop.Services.Plugins.IPluginManager&lt; TPlugin &gt;.LoadPluginBySystemNameAsync()</a> e <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01b72a4010ac89b58b0262a65dda750a">Nop.Services.Discounts.DiscountService.ValidateDiscountAsync()</a>.</p>

</div>
</div>
<a id="a340c0e83bf99911958a5e38ba7b52e16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a340c0e83bf99911958a5e38ba7b52e16">&#9670;&nbsp;</a></span>InsertDiscountAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Services.Discounts.DiscountService.InsertDiscountAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a>&#160;</td>
          <td class="paramname"><em>discount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inserts a discount </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discount</td><td>Discount</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#aab2a62a15faa81c0a44b6a1f58a85fdb">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">_discountRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a48e1afad4ac0521e531e1e0bce14b953">InsertAsync</a>(discount);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_data_1_1_i_repository_html_a48e1afad4ac0521e531e1e0bce14b953"><div class="ttname"><a href="interface_nop_1_1_data_1_1_i_repository.html#a48e1afad4ac0521e531e1e0bce14b953">Nop.Data.IRepository.InsertAsync</a></div><div class="ttdeci">Task InsertAsync(TEntity entity, bool publishEvent=true)</div><div class="ttdoc">Insert the entity entry</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">Nop.Services.Discounts.DiscountService._discountRepository</a> e <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a48e1afad4ac0521e531e1e0bce14b953">Nop.Data.IRepository&lt; TEntity &gt;.InsertAsync()</a>.</p>

</div>
</div>
<a id="af7a881dcea8f1dbcbcb69d83f28abccb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7a881dcea8f1dbcbcb69d83f28abccb">&#9670;&nbsp;</a></span>InsertDiscountRequirementAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Services.Discounts.DiscountService.InsertDiscountRequirementAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a>&#160;</td>
          <td class="paramname"><em>discountRequirement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Inserts a discount requirement </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discountRequirement</td><td>Discount requirement</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a0a399b8338856ab09f7f9676d4ca6b96">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;        {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">_discountRequirementRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a48e1afad4ac0521e531e1e0bce14b953">InsertAsync</a>(discountRequirement);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">Nop.Services.Discounts.DiscountService._discountRequirementRepository</a> e <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a48e1afad4ac0521e531e1e0bce14b953">Nop.Data.IRepository&lt; TEntity &gt;.InsertAsync()</a>.</p>

</div>
</div>
<a id="ac7fdd3deac83776ca54a8da1bd90e068"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7fdd3deac83776ca54a8da1bd90e068">&#9670;&nbsp;</a></span>InsertDiscountUsageHistoryAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Services.Discounts.DiscountService.InsertDiscountUsageHistoryAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_usage_history.html">DiscountUsageHistory</a>&#160;</td>
          <td class="paramname"><em>discountUsageHistory</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Insert discount usage history record </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discountUsageHistory</td><td>Discount usage history record</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a71efd382f143d24db78abe78f04f134e">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;        {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aebfe1d356b57721e10184a9875e96a4d">_discountUsageHistoryRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a48e1afad4ac0521e531e1e0bce14b953">InsertAsync</a>(discountUsageHistory);</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aebfe1d356b57721e10184a9875e96a4d">Nop.Services.Discounts.DiscountService._discountUsageHistoryRepository</a> e <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a48e1afad4ac0521e531e1e0bce14b953">Nop.Data.IRepository&lt; TEntity &gt;.InsertAsync()</a>.</p>

</div>
</div>
<a id="a01ec46d6bb1cac9e5b8bcb88fbde8607"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01ec46d6bb1cac9e5b8bcb88fbde8607">&#9670;&nbsp;</a></span>UpdateDiscountAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Services.Discounts.DiscountService.UpdateDiscountAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a>&#160;</td>
          <td class="paramname"><em>discount</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates the discount </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discount</td><td>Discount</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a9f184e22a36df991797f551de90bec5b">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        {</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">_discountRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a622cf52fafe306533584a002af92ebc0">UpdateAsync</a>(discount);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_data_1_1_i_repository_html_a622cf52fafe306533584a002af92ebc0"><div class="ttname"><a href="interface_nop_1_1_data_1_1_i_repository.html#a622cf52fafe306533584a002af92ebc0">Nop.Data.IRepository.UpdateAsync</a></div><div class="ttdeci">Task UpdateAsync(TEntity entity, bool publishEvent=true)</div><div class="ttdoc">Update the entity entry</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6b70e805d0454c0015a3aef140331fae">Nop.Services.Discounts.DiscountService._discountRepository</a> e <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a622cf52fafe306533584a002af92ebc0">Nop.Data.IRepository&lt; TEntity &gt;.UpdateAsync()</a>.</p>

</div>
</div>
<a id="af0fe2f1de2f6ec8fe59dbb37c06a6eea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af0fe2f1de2f6ec8fe59dbb37c06a6eea">&#9670;&nbsp;</a></span>UpdateDiscountRequirementAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Services.Discounts.DiscountService.UpdateDiscountRequirementAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a>&#160;</td>
          <td class="paramname"><em>discountRequirement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Updates a discount requirement </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discountRequirement</td><td>Discount requirement</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#aec17aec9b6c96e7c20cef79a58811536">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">_discountRequirementRepository</a>.<a class="code" href="interface_nop_1_1_data_1_1_i_repository.html#a622cf52fafe306533584a002af92ebc0">UpdateAsync</a>(discountRequirement);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7f28560c885d0cd2af5b7b67e092330f">Nop.Services.Discounts.DiscountService._discountRequirementRepository</a> e <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html#a622cf52fafe306533584a002af92ebc0">Nop.Data.IRepository&lt; TEntity &gt;.UpdateAsync()</a>.</p>

</div>
</div>
<a id="ac99d7e812be28814755a58c8bc4809ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac99d7e812be28814755a58c8bc4809ed">&#9670;&nbsp;</a></span>ValidateDiscountAsync() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_validation_result.html">DiscountValidationResult</a>&gt; Nop.Services.Discounts.DiscountService.ValidateDiscountAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a>&#160;</td>
          <td class="paramname"><em>discount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validate discount </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discount</td><td>Discount</td></tr>
    <tr><td class="paramname">customer</td><td>Customer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the discount validation result </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a3a59db1e83800413854383954282bfe7">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;            <span class="keywordflow">if</span> (discount == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(discount));</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160; </div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;            var couponCodesToValidate = await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa0f1b626d11051fd9478ea08691b078c">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#abb64c4c0e3d32b94a97081e354b9ab6e">ParseAppliedDiscountCouponCodesAsync</a>(customer);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;            </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ac99d7e812be28814755a58c8bc4809ed">ValidateDiscountAsync</a>(discount, customer, couponCodesToValidate);</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_ac99d7e812be28814755a58c8bc4809ed"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ac99d7e812be28814755a58c8bc4809ed">Nop.Services.Discounts.DiscountService.ValidateDiscountAsync</a></div><div class="ttdeci">virtual async Task&lt; DiscountValidationResult &gt; ValidateDiscountAsync(Discount discount, Customer customer)</div><div class="ttdoc">Validate discount</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:477</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_customers_1_1_i_customer_service_html_abb64c4c0e3d32b94a97081e354b9ab6e"><div class="ttname"><a href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#abb64c4c0e3d32b94a97081e354b9ab6e">Nop.Services.Customers.ICustomerService.ParseAppliedDiscountCouponCodesAsync</a></div><div class="ttdeci">Task&lt; string[]&gt; ParseAppliedDiscountCouponCodesAsync(Customer customer)</div><div class="ttdoc">Gets coupon codes</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa0f1b626d11051fd9478ea08691b078c">Nop.Services.Discounts.DiscountService._customerService</a> e <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#abb64c4c0e3d32b94a97081e354b9ab6e">Nop.Services.Customers.ICustomerService.ParseAppliedDiscountCouponCodesAsync()</a>.</p>

</div>
</div>
<a id="a01b72a4010ac89b58b0262a65dda750a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01b72a4010ac89b58b0262a65dda750a">&#9670;&nbsp;</a></span>ValidateDiscountAsync() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_validation_result.html">DiscountValidationResult</a>&gt; Nop.Services.Discounts.DiscountService.ValidateDiscountAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a>&#160;</td>
          <td class="paramname"><em>discount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string[]&#160;</td>
          <td class="paramname"><em>couponCodesToValidate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Validate discount </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">discount</td><td>Discount</td></tr>
    <tr><td class="paramname">customer</td><td>Customer</td></tr>
    <tr><td class="paramname">couponCodesToValidate</td><td>Coupon codes to validate</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the discount validation result </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_service.html#a67327c43a605e63d8ec63e755c2783b1">Nop.Services.Discounts.IDiscountService</a>.</p>
<div class="fragment"><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;        {</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;            <span class="keywordflow">if</span> (discount == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(discount));</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160; </div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            <span class="comment">//invalid by default</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;            var <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = <span class="keyword">new</span> DiscountValidationResult();</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160; </div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;            <span class="comment">//check coupon code</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;            <span class="keywordflow">if</span> (discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#ab1dbdf8caaaf66bac9b432df78160ca8">RequiresCouponCode</a>)</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            {</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#aeffddcb6fe51605ec172fa8d8e16ac58">CouponCode</a>))</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160; </div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                <span class="keywordflow">if</span> (couponCodesToValidate == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                <span class="keywordflow">if</span> (!couponCodesToValidate.Any(x =&gt; x.Equals(discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#aeffddcb6fe51605ec172fa8d8e16ac58">CouponCode</a>, StringComparison.InvariantCultureIgnoreCase)))</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160; </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;            <span class="comment">//Do not allow discounts applied to order subtotal or total when a customer has gift cards in the cart.</span></div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="comment">//Otherwise, this customer can purchase gift cards with discount and get more than paid (&quot;free money&quot;).</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            <span class="keywordflow">if</span> (discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#af55d2e88851346b4a336935484b36c4e">DiscountType</a> == <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a0528a9e289aca2a985743fdf3b419703">DiscountType</a>.AssignedToOrderSubTotal ||</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#af55d2e88851346b4a336935484b36c4e">DiscountType</a> == <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a0528a9e289aca2a985743fdf3b419703">DiscountType</a>.AssignedToOrderTotal)</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;            {</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                <span class="comment">//TODO: try to move into constructor</span></div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                var shoppingCartService = <a class="code" href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html">EngineContext</a>.<a class="code" href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html#a3aa3185b6b7474f2781a575e880645fd">Current</a>.<a class="code" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_engine.html#a9cc3489ec1597daa4c030815dcdd897e">Resolve</a>&lt;<a class="code" href="interface_nop_1_1_services_1_1_orders_1_1_i_shopping_cart_service.html">IShoppingCartService</a>&gt;();</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                var cart = await shoppingCartService.<a class="code" href="interface_nop_1_1_services_1_1_orders_1_1_i_shopping_cart_service.html#a57f855d8ca2ffb0465bc91d84ae253e1">GetShoppingCartAsync</a>(customer,</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                    <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_orders.html#ae2fb88620fcd3889e6e0504e7b18e806">ShoppingCartType</a>.ShoppingCart, storeId: (await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ae98a07fb064c50a788228e3e685a4f0a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>()).Id);</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160; </div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                var cartProductIds = cart.Select(ci =&gt; ci.ProductId).ToArray();</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                <span class="keywordflow">if</span> (await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7bfd458bddec2625db574edceafdc450">_productService</a>.<a class="code" href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html#acde16597bcb6a4a131ec4766afcf94c6">HasAnyGiftCardProductAsync</a>(cartProductIds))</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                {</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.Errors = <span class="keyword">new</span> List&lt;string&gt; {await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a3940566704511945fcf1335c16b25a64">_localizationService</a>.<a class="code" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html#ac1ae5d2f3ddfea87ce1f780c9294656a">GetResourceAsync</a>(<span class="stringliteral">&quot;ShoppingCart.Discount.CannotBeUsedWithGiftCards&quot;</span>) };</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                }</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            }</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160; </div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;            <span class="comment">//check date range</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;            var now = DateTime.UtcNow;</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;            <span class="keywordflow">if</span> (discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a8c063aa0cb589ee470a7d3e44f8f686d">StartDateUtc</a>.HasValue)</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            {</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                var startDate = DateTime.SpecifyKind(discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a8c063aa0cb589ee470a7d3e44f8f686d">StartDateUtc</a>.Value, DateTimeKind.Utc);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;                <span class="keywordflow">if</span> (startDate.CompareTo(now) &gt; 0)</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                {</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.Errors = <span class="keyword">new</span> List&lt;string&gt; {await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a3940566704511945fcf1335c16b25a64">_localizationService</a>.<a class="code" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html#ac1ae5d2f3ddfea87ce1f780c9294656a">GetResourceAsync</a>(<span class="stringliteral">&quot;ShoppingCart.Discount.NotStartedYet&quot;</span>) };</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                }</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            }</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160; </div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordflow">if</span> (discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a05a703c608811c0a6ddb8e876498611b">EndDateUtc</a>.HasValue)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            {</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                var endDate = DateTime.SpecifyKind(discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a05a703c608811c0a6ddb8e876498611b">EndDateUtc</a>.Value, DateTimeKind.Utc);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                <span class="keywordflow">if</span> (endDate.CompareTo(now) &lt; 0)</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                {</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.Errors = <span class="keyword">new</span> List&lt;string&gt; {await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a3940566704511945fcf1335c16b25a64">_localizationService</a>.<a class="code" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html#ac1ae5d2f3ddfea87ce1f780c9294656a">GetResourceAsync</a>(<span class="stringliteral">&quot;ShoppingCart.Discount.Expired&quot;</span>) };</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                }</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;            }</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="comment">//discount limitation</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            <span class="keywordflow">switch</span> (discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a5c8f5ff2a4f1be7797a69af6827199b9">DiscountLimitation</a>)</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            {</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a834a20ec3ce3532471ededbbb72cb54f">DiscountLimitationType</a>.NTimesOnly:</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                    {</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                        var usedTimes = (await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a82773c7d05d67d1515bb09c01af45830">GetAllDiscountUsageHistoryAsync</a>(discount.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a>, <span class="keyword">null</span>, <span class="keyword">null</span>, 0, 1)).TotalCount;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                        <span class="keywordflow">if</span> (usedTimes &gt;= discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a9cbc1105707ac911d6a5ce4ae2c83426">LimitationTimes</a>)</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                            <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                    }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a834a20ec3ce3532471ededbbb72cb54f">DiscountLimitationType</a>.NTimesPerCustomer:</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                    {</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                        <span class="keywordflow">if</span> (await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa0f1b626d11051fd9478ea08691b078c">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#af6b928fad7e1ea6d21e194c5aa74fc6b">IsRegisteredAsync</a>(customer))</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                        {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                            var usedTimes = (await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a82773c7d05d67d1515bb09c01af45830">GetAllDiscountUsageHistoryAsync</a>(discount.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a>, customer.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a>, <span class="keyword">null</span>, 0, 1)).TotalCount;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                            <span class="keywordflow">if</span> (usedTimes &gt;= discount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a9cbc1105707ac911d6a5ce4ae2c83426">LimitationTimes</a>)</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                            {</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.Errors = <span class="keyword">new</span> List&lt;string&gt; {await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a3940566704511945fcf1335c16b25a64">_localizationService</a>.<a class="code" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html#ac1ae5d2f3ddfea87ce1f780c9294656a">GetResourceAsync</a>(<span class="stringliteral">&quot;ShoppingCart.Discount.CannotBeUsedAnymore&quot;</span>) };</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                                </div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                                <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                            }</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                        }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                    }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a834a20ec3ce3532471ededbbb72cb54f">DiscountLimitationType</a>.Unlimited:</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160; </div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <span class="comment">//discount requirements</span></div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            var key = <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a14d98a51b913f4f080ee4db60c74458f">_staticCacheManager</a>.<a class="code" href="interface_nop_1_1_core_1_1_caching_1_1_i_static_cache_manager.html#a6e6f64bac714480ec4f5b11c01d405b8">PrepareKeyForDefaultCache</a>(NopDiscountDefaults.DiscountRequirementsByDiscountCacheKey, discount);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160; </div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            var requirements = await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a14d98a51b913f4f080ee4db60c74458f">_staticCacheManager</a>.GetAsync(key, async () =&gt; await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa71c8e5823d75825751c27c52920d118">GetAllDiscountRequirementsAsync</a>(discount.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a>, <span class="keyword">true</span>));</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160; </div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            <span class="comment">//get top-level group</span></div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            var topLevelGroup = requirements.FirstOrDefault();</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;            <span class="keywordflow">if</span> (topLevelGroup == <span class="keyword">null</span> || (topLevelGroup.IsGroup &amp;&amp; !(await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5c6b5e43639710a9943ac5c0e786e0e8">GetDiscountRequirementsByParentAsync</a>(topLevelGroup)).Any()) || !topLevelGroup.InteractionType.HasValue)</div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            {</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                <span class="comment">//there are no requirements, so discount is valid</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.IsValid = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160; </div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;            }</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160; </div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="comment">//requirements exist, let&#39;s check them</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            var errors = <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.IsValid = await <a class="code" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6f4b481604d8da9468e9931854bd70b3">GetValidationResultAsync</a>(requirements, topLevelGroup.InteractionType.Value, customer, errors);</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            <span class="comment">//set errors if result is not valid</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.IsValid)</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.Errors = errors;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160; </div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_html_a05a703c608811c0a6ddb8e876498611b"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a05a703c608811c0a6ddb8e876498611b">Nop.Core.Domain.Discounts.Discount.EndDateUtc</a></div><div class="ttdeci">DateTime? EndDateUtc</div><div class="ttdoc">Gets or sets the discount end date and time</div><div class="ttdef"><b>Definition:</b> Discount.cs:53</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_html_a5c8f5ff2a4f1be7797a69af6827199b9"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a5c8f5ff2a4f1be7797a69af6827199b9">Nop.Core.Domain.Discounts.Discount.DiscountLimitation</a></div><div class="ttdeci">DiscountLimitationType DiscountLimitation</div><div class="ttdoc">Gets or sets the discount limitation</div><div class="ttdef"><b>Definition:</b> Discount.cs:105</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_html_a8c063aa0cb589ee470a7d3e44f8f686d"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a8c063aa0cb589ee470a7d3e44f8f686d">Nop.Core.Domain.Discounts.Discount.StartDateUtc</a></div><div class="ttdeci">DateTime? StartDateUtc</div><div class="ttdoc">Gets or sets the discount start date and time</div><div class="ttdef"><b>Definition:</b> Discount.cs:48</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_html_a9cbc1105707ac911d6a5ce4ae2c83426"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a9cbc1105707ac911d6a5ce4ae2c83426">Nop.Core.Domain.Discounts.Discount.LimitationTimes</a></div><div class="ttdeci">int LimitationTimes</div><div class="ttdoc">Gets or sets the discount limitation times (used when Limitation is set to &quot;N Times Only&quot; or &quot;N Times...</div><div class="ttdef"><b>Definition:</b> Discount.cs:78</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_html_ab1dbdf8caaaf66bac9b432df78160ca8"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#ab1dbdf8caaaf66bac9b432df78160ca8">Nop.Core.Domain.Discounts.Discount.RequiresCouponCode</a></div><div class="ttdeci">bool RequiresCouponCode</div><div class="ttdoc">Gets or sets a value indicating whether discount requires coupon code</div><div class="ttdef"><b>Definition:</b> Discount.cs:58</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_html_aeffddcb6fe51605ec172fa8d8e16ac58"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#aeffddcb6fe51605ec172fa8d8e16ac58">Nop.Core.Domain.Discounts.Discount.CouponCode</a></div><div class="ttdeci">string CouponCode</div><div class="ttdoc">Gets or sets the coupon code</div><div class="ttdef"><b>Definition:</b> Discount.cs:63</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_html_af55d2e88851346b4a336935484b36c4e"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#af55d2e88851346b4a336935484b36c4e">Nop.Core.Domain.Discounts.Discount.DiscountType</a></div><div class="ttdeci">DiscountType DiscountType</div><div class="ttdoc">Gets or sets the discount type</div><div class="ttdef"><b>Definition:</b> Discount.cs:96</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_discounts_1_1_discount_service_html_a82773c7d05d67d1515bb09c01af45830"><div class="ttname"><a href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a82773c7d05d67d1515bb09c01af45830">Nop.Services.Discounts.DiscountService.GetAllDiscountUsageHistoryAsync</a></div><div class="ttdeci">virtual async Task&lt; IPagedList&lt; DiscountUsageHistory &gt; &gt; GetAllDiscountUsageHistoryAsync(int? discountId=null, int? customerId=null, int? orderId=null, int pageIndex=0, int pageSize=int.MaxValue)</div><div class="ttdoc">Gets all discount usage history records</div><div class="ttdef"><b>Definition:</b> DiscountService.cs:652</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_caching_1_1_i_static_cache_manager_html_a6e6f64bac714480ec4f5b11c01d405b8"><div class="ttname"><a href="interface_nop_1_1_core_1_1_caching_1_1_i_static_cache_manager.html#a6e6f64bac714480ec4f5b11c01d405b8">Nop.Core.Caching.IStaticCacheManager.PrepareKeyForDefaultCache</a></div><div class="ttdeci">CacheKey PrepareKeyForDefaultCache(CacheKey cacheKey, params object[] cacheKeyParameters)</div><div class="ttdoc">Create a copy of cache key using the default cache time and fills it by passed parameters</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_catalog_1_1_i_product_service_html_acde16597bcb6a4a131ec4766afcf94c6"><div class="ttname"><a href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html#acde16597bcb6a4a131ec4766afcf94c6">Nop.Services.Catalog.IProductService.HasAnyGiftCardProductAsync</a></div><div class="ttdeci">Task&lt; bool &gt; HasAnyGiftCardProductAsync(int[] productIds)</div><div class="ttdoc">Gets the value whether the sequence contains gift card products</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_customers_1_1_i_customer_service_html_af6b928fad7e1ea6d21e194c5aa74fc6b"><div class="ttname"><a href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#af6b928fad7e1ea6d21e194c5aa74fc6b">Nop.Services.Customers.ICustomerService.IsRegisteredAsync</a></div><div class="ttdeci">Task&lt; bool &gt; IsRegisteredAsync(Customer customer, bool onlyActiveCustomerRoles=true)</div><div class="ttdoc">Gets a value indicating whether customer is registered</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_orders_1_1_i_shopping_cart_service_html"><div class="ttname"><a href="interface_nop_1_1_services_1_1_orders_1_1_i_shopping_cart_service.html">Nop.Services.Orders.IShoppingCartService</a></div><div class="ttdoc">Shopping cart service</div><div class="ttdef"><b>Definition:</b> IShoppingCartService.cs:15</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_orders_1_1_i_shopping_cart_service_html_a57f855d8ca2ffb0465bc91d84ae253e1"><div class="ttname"><a href="interface_nop_1_1_services_1_1_orders_1_1_i_shopping_cart_service.html#a57f855d8ca2ffb0465bc91d84ae253e1">Nop.Services.Orders.IShoppingCartService.GetShoppingCartAsync</a></div><div class="ttdeci">Task&lt; IList&lt; ShoppingCartItem &gt; &gt; GetShoppingCartAsync(Customer customer, ShoppingCartType? shoppingCartType=null, int storeId=0, int? productId=null, DateTime? createdFromUtc=null, DateTime? createdToUtc=null)</div><div class="ttdoc">Gets shopping cart</div></div>
<div class="ttc" id="anamespace_nop_1_1_core_1_1_domain_1_1_discounts_html_a0528a9e289aca2a985743fdf3b419703"><div class="ttname"><a href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a0528a9e289aca2a985743fdf3b419703">Nop.Core.Domain.Discounts.DiscountType</a></div><div class="ttdeci">DiscountType</div><div class="ttdoc">Represents a discount type</div><div class="ttdef"><b>Definition:</b> DiscountType.cs:7</div></div>
<div class="ttc" id="anamespace_nop_1_1_core_1_1_domain_1_1_discounts_html_a834a20ec3ce3532471ededbbb72cb54f"><div class="ttname"><a href="namespace_nop_1_1_core_1_1_domain_1_1_discounts.html#a834a20ec3ce3532471ededbbb72cb54f">Nop.Core.Domain.Discounts.DiscountLimitationType</a></div><div class="ttdeci">DiscountLimitationType</div><div class="ttdoc">Represents a discount limitation type</div><div class="ttdef"><b>Definition:</b> DiscountLimitationType.cs:7</div></div>
<div class="ttc" id="anamespace_nop_1_1_core_1_1_domain_1_1_orders_html_ae2fb88620fcd3889e6e0504e7b18e806"><div class="ttname"><a href="namespace_nop_1_1_core_1_1_domain_1_1_orders.html#ae2fb88620fcd3889e6e0504e7b18e806">Nop.Core.Domain.Orders.ShoppingCartType</a></div><div class="ttdeci">ShoppingCartType</div><div class="ttdoc">Represents a shopping cart type</div><div class="ttdef"><b>Definition:</b> ShoppingCartType.cs:7</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa0f1b626d11051fd9478ea08691b078c">Nop.Services.Discounts.DiscountService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a3940566704511945fcf1335c16b25a64">Nop.Services.Discounts.DiscountService._localizationService</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a7bfd458bddec2625db574edceafdc450">Nop.Services.Discounts.DiscountService._productService</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a14d98a51b913f4f080ee4db60c74458f">Nop.Services.Discounts.DiscountService._staticCacheManager</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ae98a07fb064c50a788228e3e685a4f0a">Nop.Services.Discounts.DiscountService._storeContext</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#aeffddcb6fe51605ec172fa8d8e16ac58">Nop.Core.Domain.Discounts.Discount.CouponCode</a>, <a class="el" href="class_nop_1_1_core_1_1_infrastructure_1_1_engine_context.html#a3aa3185b6b7474f2781a575e880645fd">Nop.Core.Infrastructure.EngineContext.Current</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a5c8f5ff2a4f1be7797a69af6827199b9">Nop.Core.Domain.Discounts.Discount.DiscountLimitation</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_nop_discount_defaults.html#ae24293ce27b948389b585b9e9ffb1554">Nop.Services.Discounts.NopDiscountDefaults.DiscountRequirementsByDiscountCacheKey</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#af55d2e88851346b4a336935484b36c4e">Nop.Core.Domain.Discounts.Discount.DiscountType</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a05a703c608811c0a6ddb8e876498611b">Nop.Core.Domain.Discounts.Discount.EndDateUtc</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa71c8e5823d75825751c27c52920d118">Nop.Services.Discounts.DiscountService.GetAllDiscountRequirementsAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a82773c7d05d67d1515bb09c01af45830">Nop.Services.Discounts.DiscountService.GetAllDiscountUsageHistoryAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5c6b5e43639710a9943ac5c0e786e0e8">Nop.Services.Discounts.DiscountService.GetDiscountRequirementsByParentAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html#ac1ae5d2f3ddfea87ce1f780c9294656a">Nop.Services.Localization.ILocalizationService.GetResourceAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_orders_1_1_i_shopping_cart_service.html#a57f855d8ca2ffb0465bc91d84ae253e1">Nop.Services.Orders.IShoppingCartService.GetShoppingCartAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6f4b481604d8da9468e9931854bd70b3">Nop.Services.Discounts.DiscountService.GetValidationResultAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html#acde16597bcb6a4a131ec4766afcf94c6">Nop.Services.Catalog.IProductService.HasAnyGiftCardProductAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Nop.Core.BaseEntity.Id</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#af6b928fad7e1ea6d21e194c5aa74fc6b">Nop.Services.Customers.ICustomerService.IsRegisteredAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a9cbc1105707ac911d6a5ce4ae2c83426">Nop.Core.Domain.Discounts.Discount.LimitationTimes</a>, <a class="el" href="interface_nop_1_1_core_1_1_caching_1_1_i_static_cache_manager.html#a6e6f64bac714480ec4f5b11c01d405b8">Nop.Core.Caching.IStaticCacheManager.PrepareKeyForDefaultCache()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#ab1dbdf8caaaf66bac9b432df78160ca8">Nop.Core.Domain.Discounts.Discount.RequiresCouponCode</a>, <a class="el" href="interface_nop_1_1_core_1_1_infrastructure_1_1_i_engine.html#a9cc3489ec1597daa4c030815dcdd897e">Nop.Core.Infrastructure.IEngine.Resolve()</a>, <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html#a8c063aa0cb589ee470a7d3e44f8f686d">Nop.Core.Domain.Discounts.Discount.StartDateUtc</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentação dos dados membro</h2>
<a id="aa0f1b626d11051fd9478ea08691b078c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa0f1b626d11051fd9478ea08691b078c">&#9670;&nbsp;</a></span>_customerService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a> Nop.Services.Discounts.DiscountService._customerService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a33a9da51fb7787206c7bead8d3983d1d">Nop.Services.Discounts.DiscountService.DiscountService()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ac99d7e812be28814755a58c8bc4809ed">Nop.Services.Discounts.DiscountService.ValidateDiscountAsync()</a>.</p>

</div>
</div>
<a id="a47e8b463e721b62764c422fb897c2fdb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47e8b463e721b62764c422fb897c2fdb">&#9670;&nbsp;</a></span>_discountPluginManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_discounts_1_1_i_discount_plugin_manager.html">IDiscountPluginManager</a> Nop.Services.Discounts.DiscountService._discountPluginManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a33a9da51fb7787206c7bead8d3983d1d">Nop.Services.Discounts.DiscountService.DiscountService()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6f4b481604d8da9468e9931854bd70b3">Nop.Services.Discounts.DiscountService.GetValidationResultAsync()</a>.</p>

</div>
</div>
<a id="a6b70e805d0454c0015a3aef140331fae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b70e805d0454c0015a3aef140331fae">&#9670;&nbsp;</a></span>_discountRepository</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount.html">Discount</a>&gt; Nop.Services.Discounts.DiscountService._discountRepository</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a75610f9260b052131869500464aa2610">Nop.Services.Discounts.DiscountService.DeleteDiscountAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a33a9da51fb7787206c7bead8d3983d1d">Nop.Services.Discounts.DiscountService.DiscountService()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ace11e14b00b4ad1661619230802064e7">Nop.Services.Discounts.DiscountService.GetAllDiscountsAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5900a17be57567dd1cbf4680baee9b37">Nop.Services.Discounts.DiscountService.GetAppliedDiscountsAsync&lt; T &gt;()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ae37476608061cf4c3c9e9205ac3d98c6">Nop.Services.Discounts.DiscountService.GetDiscountByIdAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a340c0e83bf99911958a5e38ba7b52e16">Nop.Services.Discounts.DiscountService.InsertDiscountAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01ec46d6bb1cac9e5b8bcb88fbde8607">Nop.Services.Discounts.DiscountService.UpdateDiscountAsync()</a>.</p>

</div>
</div>
<a id="a7f28560c885d0cd2af5b7b67e092330f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f28560c885d0cd2af5b7b67e092330f">&#9670;&nbsp;</a></span>_discountRequirementRepository</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_requirement.html">DiscountRequirement</a>&gt; Nop.Services.Discounts.DiscountService._discountRequirementRepository</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a75610f9260b052131869500464aa2610">Nop.Services.Discounts.DiscountService.DeleteDiscountAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a2cde2db5116c6294fe3ba4831a7c351d">Nop.Services.Discounts.DiscountService.DeleteDiscountRequirementAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a33a9da51fb7787206c7bead8d3983d1d">Nop.Services.Discounts.DiscountService.DiscountService()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aa71c8e5823d75825751c27c52920d118">Nop.Services.Discounts.DiscountService.GetAllDiscountRequirementsAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a1992ceb827be9ab749d21bd5e59f3455">Nop.Services.Discounts.DiscountService.GetDiscountRequirementByIdAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5c6b5e43639710a9943ac5c0e786e0e8">Nop.Services.Discounts.DiscountService.GetDiscountRequirementsByParentAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#af7a881dcea8f1dbcbcb69d83f28abccb">Nop.Services.Discounts.DiscountService.InsertDiscountRequirementAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#af0fe2f1de2f6ec8fe59dbb37c06a6eea">Nop.Services.Discounts.DiscountService.UpdateDiscountRequirementAsync()</a>.</p>

</div>
</div>
<a id="aebfe1d356b57721e10184a9875e96a4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebfe1d356b57721e10184a9875e96a4d">&#9670;&nbsp;</a></span>_discountUsageHistoryRepository</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_discounts_1_1_discount_usage_history.html">DiscountUsageHistory</a>&gt; Nop.Services.Discounts.DiscountService._discountUsageHistoryRepository</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#aeee5d6a8c83ebd74f77b2a6f8b073676">Nop.Services.Discounts.DiscountService.DeleteDiscountUsageHistoryAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a33a9da51fb7787206c7bead8d3983d1d">Nop.Services.Discounts.DiscountService.DiscountService()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a82773c7d05d67d1515bb09c01af45830">Nop.Services.Discounts.DiscountService.GetAllDiscountUsageHistoryAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#afb7db5be2629abd191b6cb9ee9c80b3b">Nop.Services.Discounts.DiscountService.GetDiscountUsageHistoryByIdAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#ac7fdd3deac83776ca54a8da1bd90e068">Nop.Services.Discounts.DiscountService.InsertDiscountUsageHistoryAsync()</a>.</p>

</div>
</div>
<a id="a3940566704511945fcf1335c16b25a64"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3940566704511945fcf1335c16b25a64">&#9670;&nbsp;</a></span>_localizationService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html">ILocalizationService</a> Nop.Services.Discounts.DiscountService._localizationService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a33a9da51fb7787206c7bead8d3983d1d">Nop.Services.Discounts.DiscountService.DiscountService()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6f4b481604d8da9468e9931854bd70b3">Nop.Services.Discounts.DiscountService.GetValidationResultAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01b72a4010ac89b58b0262a65dda750a">Nop.Services.Discounts.DiscountService.ValidateDiscountAsync()</a>.</p>

</div>
</div>
<a id="a7a03034604eefece50a0f13606cc448c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a03034604eefece50a0f13606cc448c">&#9670;&nbsp;</a></span>_orderRepository</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_data_1_1_i_repository.html">IRepository</a>&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&gt; Nop.Services.Discounts.DiscountService._orderRepository</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a33a9da51fb7787206c7bead8d3983d1d">Nop.Services.Discounts.DiscountService.DiscountService()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a82773c7d05d67d1515bb09c01af45830">Nop.Services.Discounts.DiscountService.GetAllDiscountUsageHistoryAsync()</a>.</p>

</div>
</div>
<a id="a7bfd458bddec2625db574edceafdc450"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bfd458bddec2625db574edceafdc450">&#9670;&nbsp;</a></span>_productService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html">IProductService</a> Nop.Services.Discounts.DiscountService._productService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a33a9da51fb7787206c7bead8d3983d1d">Nop.Services.Discounts.DiscountService.DiscountService()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01b72a4010ac89b58b0262a65dda750a">Nop.Services.Discounts.DiscountService.ValidateDiscountAsync()</a>.</p>

</div>
</div>
<a id="a14d98a51b913f4f080ee4db60c74458f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14d98a51b913f4f080ee4db60c74458f">&#9670;&nbsp;</a></span>_staticCacheManager</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_core_1_1_caching_1_1_i_static_cache_manager.html">IStaticCacheManager</a> Nop.Services.Discounts.DiscountService._staticCacheManager</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a33a9da51fb7787206c7bead8d3983d1d">Nop.Services.Discounts.DiscountService.DiscountService()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a5900a17be57567dd1cbf4680baee9b37">Nop.Services.Discounts.DiscountService.GetAppliedDiscountsAsync&lt; T &gt;()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01b72a4010ac89b58b0262a65dda750a">Nop.Services.Discounts.DiscountService.ValidateDiscountAsync()</a>.</p>

</div>
</div>
<a id="ae98a07fb064c50a788228e3e685a4f0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae98a07fb064c50a788228e3e685a4f0a">&#9670;&nbsp;</a></span>_storeContext</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html">IStoreContext</a> Nop.Services.Discounts.DiscountService._storeContext</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a33a9da51fb7787206c7bead8d3983d1d">Nop.Services.Discounts.DiscountService.DiscountService()</a>, <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a6f4b481604d8da9468e9931854bd70b3">Nop.Services.Discounts.DiscountService.GetValidationResultAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_discounts_1_1_discount_service.html#a01b72a4010ac89b58b0262a65dda750a">Nop.Services.Discounts.DiscountService.ValidateDiscountAsync()</a>.</p>

</div>
</div>
<hr/>A documentação para esta classe foi gerada a partir do seguinte ficheiro:<ul>
<li>C:/Users/gabri/Documents/Projetos/GitHub/Estudos/Nopcommercer plugin/nopCommerce_4.40.3_Source - Copia/src/Libraries/Nop.Services/Discounts/<a class="el" href="_discount_service_8cs.html">DiscountService.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Gerado por&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
