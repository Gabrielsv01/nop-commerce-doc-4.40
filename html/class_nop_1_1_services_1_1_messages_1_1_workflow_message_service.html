<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NopCommerce 4.40: Referência à classe Nop.Services.Messages.WorkflowMessageService</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="download.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NopCommerce 4.40
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Gerado por Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Localizar','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Localizar');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_nop.html">Nop</a></li><li class="navelem"><a class="el" href="namespace_nop_1_1_services.html">Services</a></li><li class="navelem"><a class="el" href="namespace_nop_1_1_services_1_1_messages.html">Messages</a></li><li class="navelem"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html">WorkflowMessageService</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Membros públicos</a> &#124;
<a href="#pro-methods">Membros protegidos</a> &#124;
<a href="#pri-attribs">Atributos Privados</a> &#124;
<a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service-members.html">Mostrar lista completa dos membros</a>  </div>
  <div class="headertitle">
<div class="title">Referência à classe Nop.Services.Messages.WorkflowMessageService</div>  </div>
</div><!--header-->
<div class="contents">

<p>Workflow message service  
 <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#details">Mais...</a></p>
<div class="dynheader">
Diagrama de heranças da classe Nop.Services.Messages.WorkflowMessageService</div>
<div class="dyncontent">
 <div class="center">
  <img src="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.png" usemap="#Nop.Services.Messages.WorkflowMessageService_map" alt=""/>
  <map id="Nop.Services.Messages.WorkflowMessageService_map" name="Nop.Services.Messages.WorkflowMessageService_map">
<area href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html" title="Workflow message service" alt="Nop.Services.Messages.IWorkflowMessageService" shape="rect" coords="0,0,388,24"/>
<area href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_message_service.html" title="Represents overridden workflow message service" alt="Nop.Plugin.Misc.Sendinblue.Services.SendinblueMessageService" shape="rect" coords="0,112,388,136"/>
  </map>
</div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Membros públicos</h2></td></tr>
<tr class="memitem:a87c0f361992258ec712b18c3183627d5"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">WorkflowMessageService</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_common_1_1_common_settings.html">CommonSettings</a> commonSettings, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_settings.html">EmailAccountSettings</a> emailAccountSettings, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html">IAddressService</a> addressService, <a class="el" href="interface_nop_1_1_services_1_1_affiliates_1_1_i_affiliate_service.html">IAffiliateService</a> affiliateService, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a> customerService, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html">IEmailAccountService</a> emailAccountService, <a class="el" href="interface_nop_1_1_core_1_1_events_1_1_i_event_publisher.html">IEventPublisher</a> eventPublisher, <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_language_service.html">ILanguageService</a> languageService, <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html">ILocalizationService</a> localizationService, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_template_service.html">IMessageTemplateService</a> messageTemplateService, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html">IMessageTokenProvider</a> messageTokenProvider, <a class="el" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html">IOrderService</a> orderService, <a class="el" href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html">IProductService</a> productService, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_queued_email_service.html">IQueuedEmailService</a> queuedEmailService, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html">IStoreContext</a> storeContext, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html">IStoreService</a> storeService, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_tokenizer.html">ITokenizer</a> tokenizer)</td></tr>
<tr class="separator:a87c0f361992258ec712b18c3183627d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6a1fcd56a03e8cf34174d6e10e57aeb"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae6a1fcd56a03e8cf34174d6e10e57aeb">SendCustomerRegisteredNotificationMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, int languageId)</td></tr>
<tr class="memdesc:ae6a1fcd56a03e8cf34174d6e10e57aeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends 'New customer' notification message to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae6a1fcd56a03e8cf34174d6e10e57aeb">Mais...</a><br /></td></tr>
<tr class="separator:ae6a1fcd56a03e8cf34174d6e10e57aeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4c2428c56201bb4783bc40c2d00eed7"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac4c2428c56201bb4783bc40c2d00eed7">SendCustomerWelcomeMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, int languageId)</td></tr>
<tr class="memdesc:ac4c2428c56201bb4783bc40c2d00eed7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a welcome message to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac4c2428c56201bb4783bc40c2d00eed7">Mais...</a><br /></td></tr>
<tr class="separator:ac4c2428c56201bb4783bc40c2d00eed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afadea9d04dc47805c432d3941ecea017"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afadea9d04dc47805c432d3941ecea017">SendCustomerEmailValidationMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, int languageId)</td></tr>
<tr class="memdesc:afadea9d04dc47805c432d3941ecea017"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an email validation message to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afadea9d04dc47805c432d3941ecea017">Mais...</a><br /></td></tr>
<tr class="separator:afadea9d04dc47805c432d3941ecea017"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c40bd2b8e4c9e4e25f44964811ed82c"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a5c40bd2b8e4c9e4e25f44964811ed82c">SendCustomerEmailRevalidationMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, int languageId)</td></tr>
<tr class="memdesc:a5c40bd2b8e4c9e4e25f44964811ed82c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an email re-validation message to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a5c40bd2b8e4c9e4e25f44964811ed82c">Mais...</a><br /></td></tr>
<tr class="separator:a5c40bd2b8e4c9e4e25f44964811ed82c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e4f7bc55fa2909c186a453d6ef976cf"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7e4f7bc55fa2909c186a453d6ef976cf">SendCustomerPasswordRecoveryMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, int languageId)</td></tr>
<tr class="memdesc:a7e4f7bc55fa2909c186a453d6ef976cf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends password recovery message to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7e4f7bc55fa2909c186a453d6ef976cf">Mais...</a><br /></td></tr>
<tr class="separator:a7e4f7bc55fa2909c186a453d6ef976cf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a459036496bf159c6cbd9faa1476a9153"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a459036496bf159c6cbd9faa1476a9153">SendOrderPlacedVendorNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html">Vendor</a> vendor, int languageId)</td></tr>
<tr class="memdesc:a459036496bf159c6cbd9faa1476a9153"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an order placed notification to a vendor  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a459036496bf159c6cbd9faa1476a9153">Mais...</a><br /></td></tr>
<tr class="separator:a459036496bf159c6cbd9faa1476a9153"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3675ecbe0a19839afe9986f5fa0905d"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af3675ecbe0a19839afe9986f5fa0905d">SendOrderPlacedStoreOwnerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, int languageId)</td></tr>
<tr class="memdesc:af3675ecbe0a19839afe9986f5fa0905d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an order placed notification to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af3675ecbe0a19839afe9986f5fa0905d">Mais...</a><br /></td></tr>
<tr class="separator:af3675ecbe0a19839afe9986f5fa0905d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb3c9a5018840890668b5e107b02a8dd"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afb3c9a5018840890668b5e107b02a8dd">SendOrderPlacedAffiliateNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, int languageId)</td></tr>
<tr class="memdesc:afb3c9a5018840890668b5e107b02a8dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an order placed notification to an affiliate  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afb3c9a5018840890668b5e107b02a8dd">Mais...</a><br /></td></tr>
<tr class="separator:afb3c9a5018840890668b5e107b02a8dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacd586e8e65d943fa1967be229e3783f"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aacd586e8e65d943fa1967be229e3783f">SendOrderPaidStoreOwnerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, int languageId)</td></tr>
<tr class="memdesc:aacd586e8e65d943fa1967be229e3783f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an order paid notification to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aacd586e8e65d943fa1967be229e3783f">Mais...</a><br /></td></tr>
<tr class="separator:aacd586e8e65d943fa1967be229e3783f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6241f3710c7ebdc4fb1ed256e21791b2"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6241f3710c7ebdc4fb1ed256e21791b2">SendOrderPaidAffiliateNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, int languageId)</td></tr>
<tr class="memdesc:a6241f3710c7ebdc4fb1ed256e21791b2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an order paid notification to an affiliate  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6241f3710c7ebdc4fb1ed256e21791b2">Mais...</a><br /></td></tr>
<tr class="separator:a6241f3710c7ebdc4fb1ed256e21791b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab85376f003d16992668c0b6e5edcb2df"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab85376f003d16992668c0b6e5edcb2df">SendOrderPaidCustomerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, int languageId, string attachmentFilePath=null, string attachmentFileName=null)</td></tr>
<tr class="memdesc:ab85376f003d16992668c0b6e5edcb2df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an order paid notification to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab85376f003d16992668c0b6e5edcb2df">Mais...</a><br /></td></tr>
<tr class="separator:ab85376f003d16992668c0b6e5edcb2df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa7f7a29b84c8bec0a4f994aef2a66eda"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aa7f7a29b84c8bec0a4f994aef2a66eda">SendOrderPaidVendorNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html">Vendor</a> vendor, int languageId)</td></tr>
<tr class="memdesc:aa7f7a29b84c8bec0a4f994aef2a66eda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an order paid notification to a vendor  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aa7f7a29b84c8bec0a4f994aef2a66eda">Mais...</a><br /></td></tr>
<tr class="separator:aa7f7a29b84c8bec0a4f994aef2a66eda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabffa6f767a1bf3ad311a318d5ead172"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aabffa6f767a1bf3ad311a318d5ead172">SendOrderPlacedCustomerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, int languageId, string attachmentFilePath=null, string attachmentFileName=null)</td></tr>
<tr class="memdesc:aabffa6f767a1bf3ad311a318d5ead172"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an order placed notification to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aabffa6f767a1bf3ad311a318d5ead172">Mais...</a><br /></td></tr>
<tr class="separator:aabffa6f767a1bf3ad311a318d5ead172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab5c4a2bc5412f704df18c1c0fb2a0c40"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab5c4a2bc5412f704df18c1c0fb2a0c40">SendShipmentSentCustomerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_shipping_1_1_shipment.html">Shipment</a> shipment, int languageId)</td></tr>
<tr class="memdesc:ab5c4a2bc5412f704df18c1c0fb2a0c40"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a shipment sent notification to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab5c4a2bc5412f704df18c1c0fb2a0c40">Mais...</a><br /></td></tr>
<tr class="separator:ab5c4a2bc5412f704df18c1c0fb2a0c40"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d80736e1501ec4de2d29030eec5d5e6"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3d80736e1501ec4de2d29030eec5d5e6">SendShipmentDeliveredCustomerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_shipping_1_1_shipment.html">Shipment</a> shipment, int languageId)</td></tr>
<tr class="memdesc:a3d80736e1501ec4de2d29030eec5d5e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a shipment delivered notification to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3d80736e1501ec4de2d29030eec5d5e6">Mais...</a><br /></td></tr>
<tr class="separator:a3d80736e1501ec4de2d29030eec5d5e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58be329b8abdcda60a55cc7d6b509ddb"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a58be329b8abdcda60a55cc7d6b509ddb">SendOrderCompletedCustomerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, int languageId, string attachmentFilePath=null, string attachmentFileName=null)</td></tr>
<tr class="memdesc:a58be329b8abdcda60a55cc7d6b509ddb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an order completed notification to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a58be329b8abdcda60a55cc7d6b509ddb">Mais...</a><br /></td></tr>
<tr class="separator:a58be329b8abdcda60a55cc7d6b509ddb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac380eed2bd7ded145d75934682d1d78a"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac380eed2bd7ded145d75934682d1d78a">SendOrderCancelledCustomerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, int languageId)</td></tr>
<tr class="memdesc:ac380eed2bd7ded145d75934682d1d78a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an order cancelled notification to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac380eed2bd7ded145d75934682d1d78a">Mais...</a><br /></td></tr>
<tr class="separator:ac380eed2bd7ded145d75934682d1d78a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac853448f0f3b977d2ccf8102baaa5d75"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac853448f0f3b977d2ccf8102baaa5d75">SendOrderRefundedStoreOwnerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, decimal refundedAmount, int languageId)</td></tr>
<tr class="memdesc:ac853448f0f3b977d2ccf8102baaa5d75"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an order refunded notification to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac853448f0f3b977d2ccf8102baaa5d75">Mais...</a><br /></td></tr>
<tr class="separator:ac853448f0f3b977d2ccf8102baaa5d75"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcac694205086ab927ae965ba52c99bd"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afcac694205086ab927ae965ba52c99bd">SendOrderRefundedCustomerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, decimal refundedAmount, int languageId)</td></tr>
<tr class="memdesc:afcac694205086ab927ae965ba52c99bd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an order refunded notification to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afcac694205086ab927ae965ba52c99bd">Mais...</a><br /></td></tr>
<tr class="separator:afcac694205086ab927ae965ba52c99bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f848aa49ef68919b1a43236a55c957d"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3f848aa49ef68919b1a43236a55c957d">SendNewOrderNoteAddedCustomerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_note.html">OrderNote</a> orderNote, int languageId)</td></tr>
<tr class="memdesc:a3f848aa49ef68919b1a43236a55c957d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a new order note added notification to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3f848aa49ef68919b1a43236a55c957d">Mais...</a><br /></td></tr>
<tr class="separator:a3f848aa49ef68919b1a43236a55c957d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2ea003968f3c6230ec777c02d9361273"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2ea003968f3c6230ec777c02d9361273">SendRecurringPaymentCancelledStoreOwnerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html">RecurringPayment</a> recurringPayment, int languageId)</td></tr>
<tr class="memdesc:a2ea003968f3c6230ec777c02d9361273"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a "Recurring payment cancelled" notification to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2ea003968f3c6230ec777c02d9361273">Mais...</a><br /></td></tr>
<tr class="separator:a2ea003968f3c6230ec777c02d9361273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7bfaf213a917be96f201757329d472d"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af7bfaf213a917be96f201757329d472d">SendRecurringPaymentCancelledCustomerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html">RecurringPayment</a> recurringPayment, int languageId)</td></tr>
<tr class="memdesc:af7bfaf213a917be96f201757329d472d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a "Recurring payment cancelled" notification to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af7bfaf213a917be96f201757329d472d">Mais...</a><br /></td></tr>
<tr class="separator:af7bfaf213a917be96f201757329d472d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a66a2a7ce5ddd112a6a7028713cc54b"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0a66a2a7ce5ddd112a6a7028713cc54b">SendRecurringPaymentFailedCustomerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html">RecurringPayment</a> recurringPayment, int languageId)</td></tr>
<tr class="memdesc:a0a66a2a7ce5ddd112a6a7028713cc54b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a "Recurring payment failed" notification to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0a66a2a7ce5ddd112a6a7028713cc54b">Mais...</a><br /></td></tr>
<tr class="separator:a0a66a2a7ce5ddd112a6a7028713cc54b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73e1a0e8826575c240b4ba33cc3ea970"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a73e1a0e8826575c240b4ba33cc3ea970">SendNewsLetterSubscriptionActivationMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html">NewsLetterSubscription</a> subscription, int languageId)</td></tr>
<tr class="memdesc:a73e1a0e8826575c240b4ba33cc3ea970"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a newsletter subscription activation message  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a73e1a0e8826575c240b4ba33cc3ea970">Mais...</a><br /></td></tr>
<tr class="separator:a73e1a0e8826575c240b4ba33cc3ea970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a874c291702763976f208b0ffaff9f82f"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a874c291702763976f208b0ffaff9f82f">SendNewsLetterSubscriptionDeactivationMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html">NewsLetterSubscription</a> subscription, int languageId)</td></tr>
<tr class="memdesc:a874c291702763976f208b0ffaff9f82f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a newsletter subscription deactivation message  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a874c291702763976f208b0ffaff9f82f">Mais...</a><br /></td></tr>
<tr class="separator:a874c291702763976f208b0ffaff9f82f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf690c4aeefdef0a88d873965b42caf5"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#adf690c4aeefdef0a88d873965b42caf5">SendProductEmailAFriendMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, int languageId, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product.html">Product</a> product, string customerEmail, string friendsEmail, string personalMessage)</td></tr>
<tr class="memdesc:adf690c4aeefdef0a88d873965b42caf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends "email a friend" message  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#adf690c4aeefdef0a88d873965b42caf5">Mais...</a><br /></td></tr>
<tr class="separator:adf690c4aeefdef0a88d873965b42caf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a83c4e2553fcce9bad4a4266dd45ac6c0"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a83c4e2553fcce9bad4a4266dd45ac6c0">SendWishlistEmailAFriendMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, int languageId, string customerEmail, string friendsEmail, string personalMessage)</td></tr>
<tr class="memdesc:a83c4e2553fcce9bad4a4266dd45ac6c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends wishlist "email a friend" message  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a83c4e2553fcce9bad4a4266dd45ac6c0">Mais...</a><br /></td></tr>
<tr class="separator:a83c4e2553fcce9bad4a4266dd45ac6c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8833fe15d53e8aece5a05bc87d50e176"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8833fe15d53e8aece5a05bc87d50e176">SendNewReturnRequestStoreOwnerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html">ReturnRequest</a> returnRequest, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_item.html">OrderItem</a> orderItem, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order, int languageId)</td></tr>
<tr class="memdesc:a8833fe15d53e8aece5a05bc87d50e176"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends 'New Return Request' message to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8833fe15d53e8aece5a05bc87d50e176">Mais...</a><br /></td></tr>
<tr class="separator:a8833fe15d53e8aece5a05bc87d50e176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cf231a1ec189b0e854eb328e51c34db"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3cf231a1ec189b0e854eb328e51c34db">SendNewReturnRequestCustomerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html">ReturnRequest</a> returnRequest, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_item.html">OrderItem</a> orderItem, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order)</td></tr>
<tr class="memdesc:a3cf231a1ec189b0e854eb328e51c34db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends 'New Return Request' message to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3cf231a1ec189b0e854eb328e51c34db">Mais...</a><br /></td></tr>
<tr class="separator:a3cf231a1ec189b0e854eb328e51c34db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a79185a8309df5962e42dec81c576e70b"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a79185a8309df5962e42dec81c576e70b">SendReturnRequestStatusChangedCustomerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html">ReturnRequest</a> returnRequest, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_item.html">OrderItem</a> orderItem, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order)</td></tr>
<tr class="memdesc:a79185a8309df5962e42dec81c576e70b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends 'Return Request status changed' message to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a79185a8309df5962e42dec81c576e70b">Mais...</a><br /></td></tr>
<tr class="separator:a79185a8309df5962e42dec81c576e70b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c859d8347db968c7762869b4a70ee2e"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4c859d8347db968c7762869b4a70ee2e">SendNewForumTopicMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_forum_topic.html">ForumTopic</a> forumTopic, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_forum.html">Forum</a> forum, int languageId)</td></tr>
<tr class="memdesc:a4c859d8347db968c7762869b4a70ee2e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a forum subscription message to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4c859d8347db968c7762869b4a70ee2e">Mais...</a><br /></td></tr>
<tr class="separator:a4c859d8347db968c7762869b4a70ee2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a374616ddbe97dc0722857e05f6ecec70"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a374616ddbe97dc0722857e05f6ecec70">SendNewForumPostMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_forum_post.html">ForumPost</a> forumPost, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_forum_topic.html">ForumTopic</a> forumTopic, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_forum.html">Forum</a> forum, int friendlyForumTopicPageIndex, int languageId)</td></tr>
<tr class="memdesc:a374616ddbe97dc0722857e05f6ecec70"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a forum subscription message to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a374616ddbe97dc0722857e05f6ecec70">Mais...</a><br /></td></tr>
<tr class="separator:a374616ddbe97dc0722857e05f6ecec70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47207f3e9f1d7a813b5211c81e06a832"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a47207f3e9f1d7a813b5211c81e06a832">SendPrivateMessageNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_private_message.html">PrivateMessage</a> privateMessage, int languageId)</td></tr>
<tr class="memdesc:a47207f3e9f1d7a813b5211c81e06a832"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a private message notification  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a47207f3e9f1d7a813b5211c81e06a832">Mais...</a><br /></td></tr>
<tr class="separator:a47207f3e9f1d7a813b5211c81e06a832"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc53b1a99346833452dba9fd2c517dee"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afc53b1a99346833452dba9fd2c517dee">SendNewVendorAccountApplyStoreOwnerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html">Vendor</a> vendor, int languageId)</td></tr>
<tr class="memdesc:afc53b1a99346833452dba9fd2c517dee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends 'New vendor account submitted' message to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afc53b1a99346833452dba9fd2c517dee">Mais...</a><br /></td></tr>
<tr class="separator:afc53b1a99346833452dba9fd2c517dee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0d7b11e96c4cc9e56dd39fa1aed54e4"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac0d7b11e96c4cc9e56dd39fa1aed54e4">SendVendorInformationChangeNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html">Vendor</a> vendor, int languageId)</td></tr>
<tr class="memdesc:ac0d7b11e96c4cc9e56dd39fa1aed54e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends 'Vendor information changed' message to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac0d7b11e96c4cc9e56dd39fa1aed54e4">Mais...</a><br /></td></tr>
<tr class="separator:ac0d7b11e96c4cc9e56dd39fa1aed54e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89e349660d03614413a340539d9f9c33"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89e349660d03614413a340539d9f9c33">SendGiftCardNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card.html">GiftCard</a> giftCard, int languageId)</td></tr>
<tr class="memdesc:a89e349660d03614413a340539d9f9c33"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a gift card notification  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89e349660d03614413a340539d9f9c33">Mais...</a><br /></td></tr>
<tr class="separator:a89e349660d03614413a340539d9f9c33"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89420429ebd87666a8f4e4e35ebbf18c"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89420429ebd87666a8f4e4e35ebbf18c">SendProductReviewNotificationMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review.html">ProductReview</a> productReview, int languageId)</td></tr>
<tr class="memdesc:a89420429ebd87666a8f4e4e35ebbf18c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a product review notification message to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89420429ebd87666a8f4e4e35ebbf18c">Mais...</a><br /></td></tr>
<tr class="separator:a89420429ebd87666a8f4e4e35ebbf18c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec8f5dc342bb89b28e7d8cb0c2cdd3d9"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aec8f5dc342bb89b28e7d8cb0c2cdd3d9">SendProductReviewReplyCustomerNotificationMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review.html">ProductReview</a> productReview, int languageId)</td></tr>
<tr class="memdesc:aec8f5dc342bb89b28e7d8cb0c2cdd3d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a product review reply notification message to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aec8f5dc342bb89b28e7d8cb0c2cdd3d9">Mais...</a><br /></td></tr>
<tr class="separator:aec8f5dc342bb89b28e7d8cb0c2cdd3d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2f3025becf2874631ee3e6bf112a3dd"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af2f3025becf2874631ee3e6bf112a3dd">SendQuantityBelowStoreOwnerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product.html">Product</a> product, int languageId)</td></tr>
<tr class="memdesc:af2f3025becf2874631ee3e6bf112a3dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a "quantity below" notification to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af2f3025becf2874631ee3e6bf112a3dd">Mais...</a><br /></td></tr>
<tr class="separator:af2f3025becf2874631ee3e6bf112a3dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2de19acac576d2c6e690a0eec9ac3b48"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2de19acac576d2c6e690a0eec9ac3b48">SendQuantityBelowStoreOwnerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_attribute_combination.html">ProductAttributeCombination</a> combination, int languageId)</td></tr>
<tr class="memdesc:a2de19acac576d2c6e690a0eec9ac3b48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a "quantity below" notification to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2de19acac576d2c6e690a0eec9ac3b48">Mais...</a><br /></td></tr>
<tr class="separator:a2de19acac576d2c6e690a0eec9ac3b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae11a46de3c9c71987d976e8eb29b799f"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae11a46de3c9c71987d976e8eb29b799f">SendNewVatSubmittedStoreOwnerNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a> customer, string vatName, string vatAddress, int languageId)</td></tr>
<tr class="memdesc:ae11a46de3c9c71987d976e8eb29b799f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a "new VAT submitted" notification to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae11a46de3c9c71987d976e8eb29b799f">Mais...</a><br /></td></tr>
<tr class="separator:ae11a46de3c9c71987d976e8eb29b799f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c7596b46f178d67d39318dfedd98c5a"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0c7596b46f178d67d39318dfedd98c5a">SendBlogCommentNotificationMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_blogs_1_1_blog_comment.html">BlogComment</a> blogComment, int languageId)</td></tr>
<tr class="memdesc:a0c7596b46f178d67d39318dfedd98c5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a blog comment notification message to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0c7596b46f178d67d39318dfedd98c5a">Mais...</a><br /></td></tr>
<tr class="separator:a0c7596b46f178d67d39318dfedd98c5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea5d06fb9d1a1529e43a5eb511f0c048"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aea5d06fb9d1a1529e43a5eb511f0c048">SendNewsCommentNotificationMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_news_1_1_news_comment.html">NewsComment</a> newsComment, int languageId)</td></tr>
<tr class="memdesc:aea5d06fb9d1a1529e43a5eb511f0c048"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a news comment notification message to a store owner  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aea5d06fb9d1a1529e43a5eb511f0c048">Mais...</a><br /></td></tr>
<tr class="separator:aea5d06fb9d1a1529e43a5eb511f0c048"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a486229c3f299058bc1e4a3dedbf27f0e"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a486229c3f299058bc1e4a3dedbf27f0e">SendBackInStockNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_back_in_stock_subscription.html">BackInStockSubscription</a> subscription, int languageId)</td></tr>
<tr class="memdesc:a486229c3f299058bc1e4a3dedbf27f0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a 'Back in stock' notification message to a customer  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a486229c3f299058bc1e4a3dedbf27f0e">Mais...</a><br /></td></tr>
<tr class="separator:a486229c3f299058bc1e4a3dedbf27f0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a295d81ea7710c2d52fc1ed9a33adeece"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a295d81ea7710c2d52fc1ed9a33adeece">SendContactUsMessageAsync</a> (int languageId, string senderEmail, string senderName, string subject, string body)</td></tr>
<tr class="memdesc:a295d81ea7710c2d52fc1ed9a33adeece"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends "contact us" message  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a295d81ea7710c2d52fc1ed9a33adeece">Mais...</a><br /></td></tr>
<tr class="separator:a295d81ea7710c2d52fc1ed9a33adeece"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6b3d96284239acf27ddb86a3ab58d186"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; int &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6b3d96284239acf27ddb86a3ab58d186">SendContactVendorMessageAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html">Vendor</a> vendor, int languageId, string senderEmail, string senderName, string subject, string body)</td></tr>
<tr class="memdesc:a6b3d96284239acf27ddb86a3ab58d186"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends "contact vendor" message  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6b3d96284239acf27ddb86a3ab58d186">Mais...</a><br /></td></tr>
<tr class="separator:a6b3d96284239acf27ddb86a3ab58d186"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a9e0a8481b7b01826247f88b6ae8838"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2a9e0a8481b7b01826247f88b6ae8838">SendTestEmailAsync</a> (int messageTemplateId, string sendToEmail, List&lt; <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_token.html">Token</a> &gt; tokens, int languageId)</td></tr>
<tr class="memdesc:a2a9e0a8481b7b01826247f88b6ae8838"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a test email  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2a9e0a8481b7b01826247f88b6ae8838">Mais...</a><br /></td></tr>
<tr class="separator:a2a9e0a8481b7b01826247f88b6ae8838"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fb21eadda33ec74eb783fbb7f28e889"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html">MessageTemplate</a> messageTemplate, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html">EmailAccount</a> emailAccount, int languageId, IList&lt; <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_token.html">Token</a> &gt; tokens, string toEmailAddress, string toName, string attachmentFilePath=null, string attachmentFileName=null, string replyToEmailAddress=null, string replyToName=null, string fromEmail=null, string fromName=null, string subject=null)</td></tr>
<tr class="memdesc:a1fb21eadda33ec74eb783fbb7f28e889"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send notification  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Mais...</a><br /></td></tr>
<tr class="separator:a1fb21eadda33ec74eb783fbb7f28e889"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Membros protegidos</h2></td></tr>
<tr class="memitem:a27f72a9bb073c3661716e7ec5a8247f1"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html">MessageTemplate</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a> (string messageTemplateName, int storeId)</td></tr>
<tr class="memdesc:a27f72a9bb073c3661716e7ec5a8247f1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get active message templates by the name  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Mais...</a><br /></td></tr>
<tr class="separator:a27f72a9bb073c3661716e7ec5a8247f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff35e3fe885b8b0d1165eb71e8a4e63d"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html">EmailAccount</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html">MessageTemplate</a> messageTemplate, int languageId)</td></tr>
<tr class="memdesc:aff35e3fe885b8b0d1165eb71e8a4e63d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get EmailAccount to use with a message templates  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Mais...</a><br /></td></tr>
<tr class="separator:aff35e3fe885b8b0d1165eb71e8a4e63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4db49081bd4c75c8a1c65416ae0b0b9f"><td class="memItemLeft" align="right" valign="top">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a> (int languageId, int storeId)</td></tr>
<tr class="memdesc:a4db49081bd4c75c8a1c65416ae0b0b9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ensure language is active  <a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Mais...</a><br /></td></tr>
<tr class="separator:a4db49081bd4c75c8a1c65416ae0b0b9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Atributos Privados</h2></td></tr>
<tr class="memitem:ad0339f9abae5302b3e8d2694281502ef"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_common_1_1_common_settings.html">CommonSettings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad0339f9abae5302b3e8d2694281502ef">_commonSettings</a></td></tr>
<tr class="separator:ad0339f9abae5302b3e8d2694281502ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af05695e7fe4acccc08f89d45d8ca3335"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_settings.html">EmailAccountSettings</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af05695e7fe4acccc08f89d45d8ca3335">_emailAccountSettings</a></td></tr>
<tr class="separator:af05695e7fe4acccc08f89d45d8ca3335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a780b76526689cfcb5547838c60603518"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html">IAddressService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a></td></tr>
<tr class="separator:a780b76526689cfcb5547838c60603518"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a699b4395fec9a7df6d2949a8e100af41"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_affiliates_1_1_i_affiliate_service.html">IAffiliateService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a699b4395fec9a7df6d2949a8e100af41">_affiliateService</a></td></tr>
<tr class="separator:a699b4395fec9a7df6d2949a8e100af41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dde00f8c095dd2b5d058bde78738075"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a></td></tr>
<tr class="separator:a4dde00f8c095dd2b5d058bde78738075"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3c3f62bab0a4a82e53433875926db49"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html">IEmailAccountService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab3c3f62bab0a4a82e53433875926db49">_emailAccountService</a></td></tr>
<tr class="separator:ab3c3f62bab0a4a82e53433875926db49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3143b4466b7bb816177428d1a9bd4e36"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_core_1_1_events_1_1_i_event_publisher.html">IEventPublisher</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a></td></tr>
<tr class="separator:a3143b4466b7bb816177428d1a9bd4e36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40091b89be964ad33ebbde88a232e276"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_language_service.html">ILanguageService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a40091b89be964ad33ebbde88a232e276">_languageService</a></td></tr>
<tr class="separator:a40091b89be964ad33ebbde88a232e276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a685301cd44bf5377e019d1a5d00c24d6"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html">ILocalizationService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a685301cd44bf5377e019d1a5d00c24d6">_localizationService</a></td></tr>
<tr class="separator:a685301cd44bf5377e019d1a5d00c24d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cc294197be5a4bbbc15a48323f3996c"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_template_service.html">IMessageTemplateService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7cc294197be5a4bbbc15a48323f3996c">_messageTemplateService</a></td></tr>
<tr class="separator:a7cc294197be5a4bbbc15a48323f3996c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78090f0bc2453cf859de90b6372a3434"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html">IMessageTokenProvider</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a></td></tr>
<tr class="separator:a78090f0bc2453cf859de90b6372a3434"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad515a207bd88539700ec721b238a91c1"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html">IOrderService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">_orderService</a></td></tr>
<tr class="separator:ad515a207bd88539700ec721b238a91c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac316d6fa69923bcd5951c06fcdea6d09"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html">IProductService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac316d6fa69923bcd5951c06fcdea6d09">_productService</a></td></tr>
<tr class="separator:ac316d6fa69923bcd5951c06fcdea6d09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fb2131780dc25b002bf2e9d56a3bca6"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_queued_email_service.html">IQueuedEmailService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6fb2131780dc25b002bf2e9d56a3bca6">_queuedEmailService</a></td></tr>
<tr class="separator:a6fb2131780dc25b002bf2e9d56a3bca6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a434f5fac8645b55ae3fdf530f592935a"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html">IStoreContext</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a></td></tr>
<tr class="separator:a434f5fac8645b55ae3fdf530f592935a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31fcc6563d3a003b29d5f85af53e2537"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html">IStoreService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a></td></tr>
<tr class="separator:a31fcc6563d3a003b29d5f85af53e2537"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c58747ccbdf01ca7cf418e74238dc0d"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_tokenizer.html">ITokenizer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8c58747ccbdf01ca7cf418e74238dc0d">_tokenizer</a></td></tr>
<tr class="separator:a8c58747ccbdf01ca7cf418e74238dc0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descrição detalhada</h2>
<div class="textblock"><p>Workflow message service </p>
</div><h2 class="groupheader">Documentação dos Construtores &amp; Destrutor</h2>
<a id="a87c0f361992258ec712b18c3183627d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87c0f361992258ec712b18c3183627d5">&#9670;&nbsp;</a></span>WorkflowMessageService()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_common_1_1_common_settings.html">CommonSettings</a>&#160;</td>
          <td class="paramname"><em>commonSettings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_settings.html">EmailAccountSettings</a>&#160;</td>
          <td class="paramname"><em>emailAccountSettings</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html">IAddressService</a>&#160;</td>
          <td class="paramname"><em>addressService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_affiliates_1_1_i_affiliate_service.html">IAffiliateService</a>&#160;</td>
          <td class="paramname"><em>affiliateService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a>&#160;</td>
          <td class="paramname"><em>customerService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html">IEmailAccountService</a>&#160;</td>
          <td class="paramname"><em>emailAccountService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_core_1_1_events_1_1_i_event_publisher.html">IEventPublisher</a>&#160;</td>
          <td class="paramname"><em>eventPublisher</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_language_service.html">ILanguageService</a>&#160;</td>
          <td class="paramname"><em>languageService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html">ILocalizationService</a>&#160;</td>
          <td class="paramname"><em>localizationService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_template_service.html">IMessageTemplateService</a>&#160;</td>
          <td class="paramname"><em>messageTemplateService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html">IMessageTokenProvider</a>&#160;</td>
          <td class="paramname"><em>messageTokenProvider</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html">IOrderService</a>&#160;</td>
          <td class="paramname"><em>orderService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html">IProductService</a>&#160;</td>
          <td class="paramname"><em>productService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_queued_email_service.html">IQueuedEmailService</a>&#160;</td>
          <td class="paramname"><em>queuedEmailService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html">IStoreContext</a>&#160;</td>
          <td class="paramname"><em>storeContext</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html">IStoreService</a>&#160;</td>
          <td class="paramname"><em>storeService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_tokenizer.html">ITokenizer</a>&#160;</td>
          <td class="paramname"><em>tokenizer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        {</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad0339f9abae5302b3e8d2694281502ef">_commonSettings</a> = commonSettings;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af05695e7fe4acccc08f89d45d8ca3335">_emailAccountSettings</a> = emailAccountSettings;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a> = addressService;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a699b4395fec9a7df6d2949a8e100af41">_affiliateService</a> = affiliateService;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a> = customerService;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab3c3f62bab0a4a82e53433875926db49">_emailAccountService</a> = emailAccountService;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a> = eventPublisher;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a40091b89be964ad33ebbde88a232e276">_languageService</a> = languageService;</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a685301cd44bf5377e019d1a5d00c24d6">_localizationService</a> = localizationService;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7cc294197be5a4bbbc15a48323f3996c">_messageTemplateService</a> = messageTemplateService;</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a> = messageTokenProvider;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">_orderService</a> = orderService;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac316d6fa69923bcd5951c06fcdea6d09">_productService</a> = productService;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6fb2131780dc25b002bf2e9d56a3bca6">_queuedEmailService</a> = queuedEmailService;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a> = storeContext;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a> = storeService;</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;            <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8c58747ccbdf01ca7cf418e74238dc0d">_tokenizer</a> = tokenizer;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a3143b4466b7bb816177428d1a9bd4e36"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a></div><div class="ttdeci">readonly IEventPublisher _eventPublisher</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:42</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a31fcc6563d3a003b29d5f85af53e2537"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a></div><div class="ttdeci">readonly IStoreService _storeService</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:51</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a40091b89be964ad33ebbde88a232e276"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a40091b89be964ad33ebbde88a232e276">Nop.Services.Messages.WorkflowMessageService._languageService</a></div><div class="ttdeci">readonly ILanguageService _languageService</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:43</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a434f5fac8645b55ae3fdf530f592935a"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a></div><div class="ttdeci">readonly IStoreContext _storeContext</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:50</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a4dde00f8c095dd2b5d058bde78738075"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a></div><div class="ttdeci">readonly ICustomerService _customerService</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:40</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a685301cd44bf5377e019d1a5d00c24d6"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a685301cd44bf5377e019d1a5d00c24d6">Nop.Services.Messages.WorkflowMessageService._localizationService</a></div><div class="ttdeci">readonly ILocalizationService _localizationService</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:44</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a699b4395fec9a7df6d2949a8e100af41"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a699b4395fec9a7df6d2949a8e100af41">Nop.Services.Messages.WorkflowMessageService._affiliateService</a></div><div class="ttdeci">readonly IAffiliateService _affiliateService</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:39</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a6fb2131780dc25b002bf2e9d56a3bca6"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6fb2131780dc25b002bf2e9d56a3bca6">Nop.Services.Messages.WorkflowMessageService._queuedEmailService</a></div><div class="ttdeci">readonly IQueuedEmailService _queuedEmailService</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:49</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a78090f0bc2453cf859de90b6372a3434"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a></div><div class="ttdeci">readonly IMessageTokenProvider _messageTokenProvider</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:46</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a780b76526689cfcb5547838c60603518"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a></div><div class="ttdeci">readonly IAddressService _addressService</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:38</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a7cc294197be5a4bbbc15a48323f3996c"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7cc294197be5a4bbbc15a48323f3996c">Nop.Services.Messages.WorkflowMessageService._messageTemplateService</a></div><div class="ttdeci">readonly IMessageTemplateService _messageTemplateService</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:45</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a8c58747ccbdf01ca7cf418e74238dc0d"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8c58747ccbdf01ca7cf418e74238dc0d">Nop.Services.Messages.WorkflowMessageService._tokenizer</a></div><div class="ttdeci">readonly ITokenizer _tokenizer</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:52</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_ab3c3f62bab0a4a82e53433875926db49"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab3c3f62bab0a4a82e53433875926db49">Nop.Services.Messages.WorkflowMessageService._emailAccountService</a></div><div class="ttdeci">readonly IEmailAccountService _emailAccountService</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:41</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_ac316d6fa69923bcd5951c06fcdea6d09"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac316d6fa69923bcd5951c06fcdea6d09">Nop.Services.Messages.WorkflowMessageService._productService</a></div><div class="ttdeci">readonly IProductService _productService</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:48</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_ad0339f9abae5302b3e8d2694281502ef"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad0339f9abae5302b3e8d2694281502ef">Nop.Services.Messages.WorkflowMessageService._commonSettings</a></div><div class="ttdeci">readonly CommonSettings _commonSettings</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:36</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_ad515a207bd88539700ec721b238a91c1"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">Nop.Services.Messages.WorkflowMessageService._orderService</a></div><div class="ttdeci">readonly IOrderService _orderService</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:47</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_af05695e7fe4acccc08f89d45d8ca3335"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af05695e7fe4acccc08f89d45d8ca3335">Nop.Services.Messages.WorkflowMessageService._emailAccountSettings</a></div><div class="ttdeci">readonly EmailAccountSettings _emailAccountSettings</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:37</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a699b4395fec9a7df6d2949a8e100af41">Nop.Services.Messages.WorkflowMessageService._affiliateService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad0339f9abae5302b3e8d2694281502ef">Nop.Services.Messages.WorkflowMessageService._commonSettings</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab3c3f62bab0a4a82e53433875926db49">Nop.Services.Messages.WorkflowMessageService._emailAccountService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af05695e7fe4acccc08f89d45d8ca3335">Nop.Services.Messages.WorkflowMessageService._emailAccountSettings</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a40091b89be964ad33ebbde88a232e276">Nop.Services.Messages.WorkflowMessageService._languageService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a685301cd44bf5377e019d1a5d00c24d6">Nop.Services.Messages.WorkflowMessageService._localizationService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7cc294197be5a4bbbc15a48323f3996c">Nop.Services.Messages.WorkflowMessageService._messageTemplateService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">Nop.Services.Messages.WorkflowMessageService._orderService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac316d6fa69923bcd5951c06fcdea6d09">Nop.Services.Messages.WorkflowMessageService._productService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6fb2131780dc25b002bf2e9d56a3bca6">Nop.Services.Messages.WorkflowMessageService._queuedEmailService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8c58747ccbdf01ca7cf418e74238dc0d">Nop.Services.Messages.WorkflowMessageService._tokenizer</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentação dos métodos</h2>
<a id="a4db49081bd4c75c8a1c65416ae0b0b9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4db49081bd4c75c8a1c65416ae0b0b9f">&#9670;&nbsp;</a></span>EnsureLanguageIsActiveAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;int&gt; Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>storeId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Ensure language is active </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">languageId</td><td>Language identifier</td></tr>
    <tr><td class="paramname">storeId</td><td>Store identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the return a value language identifier </dd></dl>
<div class="fragment"><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="comment">//load language by specified ID</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            var language = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a40091b89be964ad33ebbde88a232e276">_languageService</a>.<a class="code" href="interface_nop_1_1_services_1_1_localization_1_1_i_language_service.html#ab45dfd47ef73657b418113f1767da185">GetLanguageByIdAsync</a>(languageId);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160; </div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            <span class="keywordflow">if</span> (language == <span class="keyword">null</span> || !language.Published)</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                <span class="comment">//load any language from the specified store</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                language = (await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a40091b89be964ad33ebbde88a232e276">_languageService</a>.<a class="code" href="interface_nop_1_1_services_1_1_localization_1_1_i_language_service.html#a7355c70b959779af87be67dbc90274a2">GetAllLanguagesAsync</a>(storeId: storeId)).FirstOrDefault();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;            <span class="keywordflow">if</span> (language == <span class="keyword">null</span> || !language.Published)</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                <span class="comment">//load any language</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                language = (await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a40091b89be964ad33ebbde88a232e276">_languageService</a>.<a class="code" href="interface_nop_1_1_services_1_1_localization_1_1_i_language_service.html#a7355c70b959779af87be67dbc90274a2">GetAllLanguagesAsync</a>()).FirstOrDefault();</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            }</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160; </div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;            <span class="keywordflow">if</span> (language == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;No active language could be loaded&quot;</span>);</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            <span class="keywordflow">return</span> language.Id;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_localization_1_1_i_language_service_html_a7355c70b959779af87be67dbc90274a2"><div class="ttname"><a href="interface_nop_1_1_services_1_1_localization_1_1_i_language_service.html#a7355c70b959779af87be67dbc90274a2">Nop.Services.Localization.ILanguageService.GetAllLanguagesAsync</a></div><div class="ttdeci">Task&lt; IList&lt; Language &gt; &gt; GetAllLanguagesAsync(bool showHidden=false, int storeId=0)</div><div class="ttdoc">Gets all languages</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_localization_1_1_i_language_service_html_ab45dfd47ef73657b418113f1767da185"><div class="ttname"><a href="interface_nop_1_1_services_1_1_localization_1_1_i_language_service.html#ab45dfd47ef73657b418113f1767da185">Nop.Services.Localization.ILanguageService.GetLanguageByIdAsync</a></div><div class="ttdeci">Task&lt; Language &gt; GetLanguageByIdAsync(int languageId)</div><div class="ttdoc">Gets a language</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a40091b89be964ad33ebbde88a232e276">Nop.Services.Messages.WorkflowMessageService._languageService</a>, <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_language_service.html#a7355c70b959779af87be67dbc90274a2">Nop.Services.Localization.ILanguageService.GetAllLanguagesAsync()</a> e <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_language_service.html#ab45dfd47ef73657b418113f1767da185">Nop.Services.Localization.ILanguageService.GetLanguageByIdAsync()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a486229c3f299058bc1e4a3dedbf27f0e">Nop.Services.Messages.WorkflowMessageService.SendBackInStockNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0c7596b46f178d67d39318dfedd98c5a">Nop.Services.Messages.WorkflowMessageService.SendBlogCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a295d81ea7710c2d52fc1ed9a33adeece">Nop.Services.Messages.WorkflowMessageService.SendContactUsMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6b3d96284239acf27ddb86a3ab58d186">Nop.Services.Messages.WorkflowMessageService.SendContactVendorMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a5c40bd2b8e4c9e4e25f44964811ed82c">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailRevalidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afadea9d04dc47805c432d3941ecea017">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailValidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7e4f7bc55fa2909c186a453d6ef976cf">Nop.Services.Messages.WorkflowMessageService.SendCustomerPasswordRecoveryMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae6a1fcd56a03e8cf34174d6e10e57aeb">Nop.Services.Messages.WorkflowMessageService.SendCustomerRegisteredNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac4c2428c56201bb4783bc40c2d00eed7">Nop.Services.Messages.WorkflowMessageService.SendCustomerWelcomeMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89e349660d03614413a340539d9f9c33">Nop.Services.Messages.WorkflowMessageService.SendGiftCardNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3f848aa49ef68919b1a43236a55c957d">Nop.Services.Messages.WorkflowMessageService.SendNewOrderNoteAddedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3cf231a1ec189b0e854eb328e51c34db">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8833fe15d53e8aece5a05bc87d50e176">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aea5d06fb9d1a1529e43a5eb511f0c048">Nop.Services.Messages.WorkflowMessageService.SendNewsCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a73e1a0e8826575c240b4ba33cc3ea970">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionActivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a874c291702763976f208b0ffaff9f82f">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionDeactivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae11a46de3c9c71987d976e8eb29b799f">Nop.Services.Messages.WorkflowMessageService.SendNewVatSubmittedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afc53b1a99346833452dba9fd2c517dee">Nop.Services.Messages.WorkflowMessageService.SendNewVendorAccountApplyStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac380eed2bd7ded145d75934682d1d78a">Nop.Services.Messages.WorkflowMessageService.SendOrderCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a58be329b8abdcda60a55cc7d6b509ddb">Nop.Services.Messages.WorkflowMessageService.SendOrderCompletedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6241f3710c7ebdc4fb1ed256e21791b2">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab85376f003d16992668c0b6e5edcb2df">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aacd586e8e65d943fa1967be229e3783f">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aa7f7a29b84c8bec0a4f994aef2a66eda">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afb3c9a5018840890668b5e107b02a8dd">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aabffa6f767a1bf3ad311a318d5ead172">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af3675ecbe0a19839afe9986f5fa0905d">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a459036496bf159c6cbd9faa1476a9153">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afcac694205086ab927ae965ba52c99bd">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac853448f0f3b977d2ccf8102baaa5d75">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#adf690c4aeefdef0a88d873965b42caf5">Nop.Services.Messages.WorkflowMessageService.SendProductEmailAFriendMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89420429ebd87666a8f4e4e35ebbf18c">Nop.Services.Messages.WorkflowMessageService.SendProductReviewNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aec8f5dc342bb89b28e7d8cb0c2cdd3d9">Nop.Services.Messages.WorkflowMessageService.SendProductReviewReplyCustomerNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af2f3025becf2874631ee3e6bf112a3dd">Nop.Services.Messages.WorkflowMessageService.SendQuantityBelowStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af7bfaf213a917be96f201757329d472d">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2ea003968f3c6230ec777c02d9361273">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0a66a2a7ce5ddd112a6a7028713cc54b">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentFailedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a79185a8309df5962e42dec81c576e70b">Nop.Services.Messages.WorkflowMessageService.SendReturnRequestStatusChangedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3d80736e1501ec4de2d29030eec5d5e6">Nop.Services.Messages.WorkflowMessageService.SendShipmentDeliveredCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab5c4a2bc5412f704df18c1c0fb2a0c40">Nop.Services.Messages.WorkflowMessageService.SendShipmentSentCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac0d7b11e96c4cc9e56dd39fa1aed54e4">Nop.Services.Messages.WorkflowMessageService.SendVendorInformationChangeNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a83c4e2553fcce9bad4a4266dd45ac6c0">Nop.Services.Messages.WorkflowMessageService.SendWishlistEmailAFriendMessageAsync()</a>.</p>

</div>
</div>
<a id="a27f72a9bb073c3661716e7ec5a8247f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27f72a9bb073c3661716e7ec5a8247f1">&#9670;&nbsp;</a></span>GetActiveMessageTemplatesAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html">MessageTemplate</a>&gt; &gt; Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>messageTemplateName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>storeId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get active message templates by the name </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">messageTemplateName</td><td>Message template name</td></tr>
    <tr><td class="paramname">storeId</td><td>Store identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the list of message templates </dd></dl>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;        {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;            <span class="comment">//get message templates by the name</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7cc294197be5a4bbbc15a48323f3996c">_messageTemplateService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_template_service.html#a2d365c07a5feff4f756b1d2a9d934720">GetMessageTemplatesByNameAsync</a>(messageTemplateName, storeId);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="comment">//no template found</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates?.Any() ?? <span class="keyword">true</span>)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;MessageTemplate&gt;();</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160; </div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="comment">//filter active templates</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            messageTemplates = messageTemplates.Where(messageTemplate =&gt; messageTemplate.IsActive).ToList();</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160; </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="keywordflow">return</span> messageTemplates;</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_template_service_html_a2d365c07a5feff4f756b1d2a9d934720"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_template_service.html#a2d365c07a5feff4f756b1d2a9d934720">Nop.Services.Messages.IMessageTemplateService.GetMessageTemplatesByNameAsync</a></div><div class="ttdeci">Task&lt; IList&lt; MessageTemplate &gt; &gt; GetMessageTemplatesByNameAsync(string messageTemplateName, int? storeId=null)</div><div class="ttdoc">Gets message templates by the name</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7cc294197be5a4bbbc15a48323f3996c">Nop.Services.Messages.WorkflowMessageService._messageTemplateService</a> e <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_template_service.html#a2d365c07a5feff4f756b1d2a9d934720">Nop.Services.Messages.IMessageTemplateService.GetMessageTemplatesByNameAsync()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a486229c3f299058bc1e4a3dedbf27f0e">Nop.Services.Messages.WorkflowMessageService.SendBackInStockNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0c7596b46f178d67d39318dfedd98c5a">Nop.Services.Messages.WorkflowMessageService.SendBlogCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a295d81ea7710c2d52fc1ed9a33adeece">Nop.Services.Messages.WorkflowMessageService.SendContactUsMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6b3d96284239acf27ddb86a3ab58d186">Nop.Services.Messages.WorkflowMessageService.SendContactVendorMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a5c40bd2b8e4c9e4e25f44964811ed82c">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailRevalidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afadea9d04dc47805c432d3941ecea017">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailValidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7e4f7bc55fa2909c186a453d6ef976cf">Nop.Services.Messages.WorkflowMessageService.SendCustomerPasswordRecoveryMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae6a1fcd56a03e8cf34174d6e10e57aeb">Nop.Services.Messages.WorkflowMessageService.SendCustomerRegisteredNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac4c2428c56201bb4783bc40c2d00eed7">Nop.Services.Messages.WorkflowMessageService.SendCustomerWelcomeMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89e349660d03614413a340539d9f9c33">Nop.Services.Messages.WorkflowMessageService.SendGiftCardNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a374616ddbe97dc0722857e05f6ecec70">Nop.Services.Messages.WorkflowMessageService.SendNewForumPostMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4c859d8347db968c7762869b4a70ee2e">Nop.Services.Messages.WorkflowMessageService.SendNewForumTopicMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3f848aa49ef68919b1a43236a55c957d">Nop.Services.Messages.WorkflowMessageService.SendNewOrderNoteAddedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3cf231a1ec189b0e854eb328e51c34db">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8833fe15d53e8aece5a05bc87d50e176">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aea5d06fb9d1a1529e43a5eb511f0c048">Nop.Services.Messages.WorkflowMessageService.SendNewsCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a73e1a0e8826575c240b4ba33cc3ea970">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionActivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a874c291702763976f208b0ffaff9f82f">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionDeactivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae11a46de3c9c71987d976e8eb29b799f">Nop.Services.Messages.WorkflowMessageService.SendNewVatSubmittedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afc53b1a99346833452dba9fd2c517dee">Nop.Services.Messages.WorkflowMessageService.SendNewVendorAccountApplyStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac380eed2bd7ded145d75934682d1d78a">Nop.Services.Messages.WorkflowMessageService.SendOrderCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a58be329b8abdcda60a55cc7d6b509ddb">Nop.Services.Messages.WorkflowMessageService.SendOrderCompletedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6241f3710c7ebdc4fb1ed256e21791b2">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab85376f003d16992668c0b6e5edcb2df">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aacd586e8e65d943fa1967be229e3783f">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aa7f7a29b84c8bec0a4f994aef2a66eda">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afb3c9a5018840890668b5e107b02a8dd">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aabffa6f767a1bf3ad311a318d5ead172">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af3675ecbe0a19839afe9986f5fa0905d">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a459036496bf159c6cbd9faa1476a9153">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afcac694205086ab927ae965ba52c99bd">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac853448f0f3b977d2ccf8102baaa5d75">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a47207f3e9f1d7a813b5211c81e06a832">Nop.Services.Messages.WorkflowMessageService.SendPrivateMessageNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#adf690c4aeefdef0a88d873965b42caf5">Nop.Services.Messages.WorkflowMessageService.SendProductEmailAFriendMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89420429ebd87666a8f4e4e35ebbf18c">Nop.Services.Messages.WorkflowMessageService.SendProductReviewNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aec8f5dc342bb89b28e7d8cb0c2cdd3d9">Nop.Services.Messages.WorkflowMessageService.SendProductReviewReplyCustomerNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af2f3025becf2874631ee3e6bf112a3dd">Nop.Services.Messages.WorkflowMessageService.SendQuantityBelowStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af7bfaf213a917be96f201757329d472d">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2ea003968f3c6230ec777c02d9361273">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0a66a2a7ce5ddd112a6a7028713cc54b">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentFailedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a79185a8309df5962e42dec81c576e70b">Nop.Services.Messages.WorkflowMessageService.SendReturnRequestStatusChangedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3d80736e1501ec4de2d29030eec5d5e6">Nop.Services.Messages.WorkflowMessageService.SendShipmentDeliveredCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab5c4a2bc5412f704df18c1c0fb2a0c40">Nop.Services.Messages.WorkflowMessageService.SendShipmentSentCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac0d7b11e96c4cc9e56dd39fa1aed54e4">Nop.Services.Messages.WorkflowMessageService.SendVendorInformationChangeNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a83c4e2553fcce9bad4a4266dd45ac6c0">Nop.Services.Messages.WorkflowMessageService.SendWishlistEmailAFriendMessageAsync()</a>.</p>

</div>
</div>
<a id="aff35e3fe885b8b0d1165eb71e8a4e63d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff35e3fe885b8b0d1165eb71e8a4e63d">&#9670;&nbsp;</a></span>GetEmailAccountOfMessageTemplateAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html">EmailAccount</a>&gt; Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html">MessageTemplate</a>&#160;</td>
          <td class="paramname"><em>messageTemplate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get EmailAccount to use with a message templates </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">messageTemplate</td><td>Message template</td></tr>
    <tr><td class="paramname">languageId</td><td>Language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the emailAccount </dd></dl>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;        {</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            var emailAccountId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a685301cd44bf5377e019d1a5d00c24d6">_localizationService</a>.GetLocalizedAsync(messageTemplate, mt =&gt; mt.EmailAccountId, languageId);</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;            <span class="comment">//some 0 validation (for localizable &quot;Email account&quot; dropdownlist which saves 0 if &quot;Standard&quot; value is chosen)</span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;            <span class="keywordflow">if</span> (emailAccountId == 0)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                emailAccountId = messageTemplate.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a70fb8167c5011505b8eaf07c700c1a76">EmailAccountId</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160; </div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            var emailAccount = (await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab3c3f62bab0a4a82e53433875926db49">_emailAccountService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#a5c3da1270ced4b26eb008b54ec9a58a2">GetEmailAccountByIdAsync</a>(emailAccountId) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab3c3f62bab0a4a82e53433875926db49">_emailAccountService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#a5c3da1270ced4b26eb008b54ec9a58a2">GetEmailAccountByIdAsync</a>(<a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af05695e7fe4acccc08f89d45d8ca3335">_emailAccountSettings</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_settings.html#a5d4b068020b6c9cf6f9940d1ff9d00ae">DefaultEmailAccountId</a>)) ??</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                               (await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab3c3f62bab0a4a82e53433875926db49">_emailAccountService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#a2c12ebea9245a884a750068cc308b89d">GetAllEmailAccountsAsync</a>()).FirstOrDefault();</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;            <span class="keywordflow">return</span> emailAccount;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_settings_html_a5d4b068020b6c9cf6f9940d1ff9d00ae"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_settings.html#a5d4b068020b6c9cf6f9940d1ff9d00ae">Nop.Core.Domain.Messages.EmailAccountSettings.DefaultEmailAccountId</a></div><div class="ttdeci">int DefaultEmailAccountId</div><div class="ttdoc">Gets or sets a store default email account identifier</div><div class="ttdef"><b>Definition:</b> EmailAccountSettings.cs:13</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_html_a70fb8167c5011505b8eaf07c700c1a76"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a70fb8167c5011505b8eaf07c700c1a76">Nop.Core.Domain.Messages.MessageTemplate.EmailAccountId</a></div><div class="ttdeci">int EmailAccountId</div><div class="ttdoc">Gets or sets the used email account identifier</div><div class="ttdef"><b>Definition:</b> MessageTemplate.cs:54</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_email_account_service_html_a2c12ebea9245a884a750068cc308b89d"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#a2c12ebea9245a884a750068cc308b89d">Nop.Services.Messages.IEmailAccountService.GetAllEmailAccountsAsync</a></div><div class="ttdeci">Task&lt; IList&lt; EmailAccount &gt; &gt; GetAllEmailAccountsAsync()</div><div class="ttdoc">Gets all email accounts</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_email_account_service_html_a5c3da1270ced4b26eb008b54ec9a58a2"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#a5c3da1270ced4b26eb008b54ec9a58a2">Nop.Services.Messages.IEmailAccountService.GetEmailAccountByIdAsync</a></div><div class="ttdeci">Task&lt; EmailAccount &gt; GetEmailAccountByIdAsync(int emailAccountId)</div><div class="ttdoc">Gets an email account by identifier</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab3c3f62bab0a4a82e53433875926db49">Nop.Services.Messages.WorkflowMessageService._emailAccountService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af05695e7fe4acccc08f89d45d8ca3335">Nop.Services.Messages.WorkflowMessageService._emailAccountSettings</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a685301cd44bf5377e019d1a5d00c24d6">Nop.Services.Messages.WorkflowMessageService._localizationService</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_settings.html#a5d4b068020b6c9cf6f9940d1ff9d00ae">Nop.Core.Domain.Messages.EmailAccountSettings.DefaultEmailAccountId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a70fb8167c5011505b8eaf07c700c1a76">Nop.Core.Domain.Messages.MessageTemplate.EmailAccountId</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#a2c12ebea9245a884a750068cc308b89d">Nop.Services.Messages.IEmailAccountService.GetAllEmailAccountsAsync()</a> e <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#a5c3da1270ced4b26eb008b54ec9a58a2">Nop.Services.Messages.IEmailAccountService.GetEmailAccountByIdAsync()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a486229c3f299058bc1e4a3dedbf27f0e">Nop.Services.Messages.WorkflowMessageService.SendBackInStockNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0c7596b46f178d67d39318dfedd98c5a">Nop.Services.Messages.WorkflowMessageService.SendBlogCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a295d81ea7710c2d52fc1ed9a33adeece">Nop.Services.Messages.WorkflowMessageService.SendContactUsMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6b3d96284239acf27ddb86a3ab58d186">Nop.Services.Messages.WorkflowMessageService.SendContactVendorMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a5c40bd2b8e4c9e4e25f44964811ed82c">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailRevalidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afadea9d04dc47805c432d3941ecea017">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailValidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7e4f7bc55fa2909c186a453d6ef976cf">Nop.Services.Messages.WorkflowMessageService.SendCustomerPasswordRecoveryMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae6a1fcd56a03e8cf34174d6e10e57aeb">Nop.Services.Messages.WorkflowMessageService.SendCustomerRegisteredNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac4c2428c56201bb4783bc40c2d00eed7">Nop.Services.Messages.WorkflowMessageService.SendCustomerWelcomeMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89e349660d03614413a340539d9f9c33">Nop.Services.Messages.WorkflowMessageService.SendGiftCardNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a374616ddbe97dc0722857e05f6ecec70">Nop.Services.Messages.WorkflowMessageService.SendNewForumPostMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4c859d8347db968c7762869b4a70ee2e">Nop.Services.Messages.WorkflowMessageService.SendNewForumTopicMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3f848aa49ef68919b1a43236a55c957d">Nop.Services.Messages.WorkflowMessageService.SendNewOrderNoteAddedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3cf231a1ec189b0e854eb328e51c34db">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8833fe15d53e8aece5a05bc87d50e176">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aea5d06fb9d1a1529e43a5eb511f0c048">Nop.Services.Messages.WorkflowMessageService.SendNewsCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a73e1a0e8826575c240b4ba33cc3ea970">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionActivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a874c291702763976f208b0ffaff9f82f">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionDeactivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae11a46de3c9c71987d976e8eb29b799f">Nop.Services.Messages.WorkflowMessageService.SendNewVatSubmittedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afc53b1a99346833452dba9fd2c517dee">Nop.Services.Messages.WorkflowMessageService.SendNewVendorAccountApplyStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac380eed2bd7ded145d75934682d1d78a">Nop.Services.Messages.WorkflowMessageService.SendOrderCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a58be329b8abdcda60a55cc7d6b509ddb">Nop.Services.Messages.WorkflowMessageService.SendOrderCompletedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6241f3710c7ebdc4fb1ed256e21791b2">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab85376f003d16992668c0b6e5edcb2df">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aacd586e8e65d943fa1967be229e3783f">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aa7f7a29b84c8bec0a4f994aef2a66eda">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afb3c9a5018840890668b5e107b02a8dd">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aabffa6f767a1bf3ad311a318d5ead172">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af3675ecbe0a19839afe9986f5fa0905d">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a459036496bf159c6cbd9faa1476a9153">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afcac694205086ab927ae965ba52c99bd">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac853448f0f3b977d2ccf8102baaa5d75">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a47207f3e9f1d7a813b5211c81e06a832">Nop.Services.Messages.WorkflowMessageService.SendPrivateMessageNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#adf690c4aeefdef0a88d873965b42caf5">Nop.Services.Messages.WorkflowMessageService.SendProductEmailAFriendMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89420429ebd87666a8f4e4e35ebbf18c">Nop.Services.Messages.WorkflowMessageService.SendProductReviewNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aec8f5dc342bb89b28e7d8cb0c2cdd3d9">Nop.Services.Messages.WorkflowMessageService.SendProductReviewReplyCustomerNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af2f3025becf2874631ee3e6bf112a3dd">Nop.Services.Messages.WorkflowMessageService.SendQuantityBelowStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af7bfaf213a917be96f201757329d472d">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2ea003968f3c6230ec777c02d9361273">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0a66a2a7ce5ddd112a6a7028713cc54b">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentFailedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a79185a8309df5962e42dec81c576e70b">Nop.Services.Messages.WorkflowMessageService.SendReturnRequestStatusChangedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3d80736e1501ec4de2d29030eec5d5e6">Nop.Services.Messages.WorkflowMessageService.SendShipmentDeliveredCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab5c4a2bc5412f704df18c1c0fb2a0c40">Nop.Services.Messages.WorkflowMessageService.SendShipmentSentCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2a9e0a8481b7b01826247f88b6ae8838">Nop.Services.Messages.WorkflowMessageService.SendTestEmailAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac0d7b11e96c4cc9e56dd39fa1aed54e4">Nop.Services.Messages.WorkflowMessageService.SendVendorInformationChangeNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a83c4e2553fcce9bad4a4266dd45ac6c0">Nop.Services.Messages.WorkflowMessageService.SendWishlistEmailAFriendMessageAsync()</a>.</p>

</div>
</div>
<a id="a486229c3f299058bc1e4a3dedbf27f0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a486229c3f299058bc1e4a3dedbf27f0e">&#9670;&nbsp;</a></span>SendBackInStockNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendBackInStockNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_back_in_stock_subscription.html">BackInStockSubscription</a>&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a 'Back in stock' notification message to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Subscription</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a4c1ad8c2ee4518a54445c1178caf60c8">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;        {</div>
<div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;            <span class="keywordflow">if</span> (subscription == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(subscription));</div>
<div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160; </div>
<div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;            var customer = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">GetCustomerByIdAsync</a>(subscription.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_back_in_stock_subscription.html#a29fd59128989b41fe0719b3b53c8b4d2">CustomerId</a>);</div>
<div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160; </div>
<div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160; </div>
<div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;            <span class="comment">//ensure that customer is registered (simple and fast way)</span></div>
<div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="class_nop_1_1_core_1_1_common_helper.html">CommonHelper</a>.<a class="code" href="class_nop_1_1_core_1_1_common_helper.html#a78b50a7979169f28157c685159b92884">IsValidEmail</a>(customer.Email))</div>
<div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160; </div>
<div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(subscription.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_back_in_stock_subscription.html#aa3ea233bc31a846cb09bfa50c02cf307">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160; </div>
<div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a929b9af963ebf294517c653eab9bb596">BackInStockNotification</a>, store.Id);</div>
<div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160; </div>
<div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adf999437cd81296a0f1b9f171d1c0e52">AddBackInStockTokensAsync</a>(commonTokens, subscription);</div>
<div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160; </div>
<div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;            {</div>
<div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160; </div>
<div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160; </div>
<div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160; </div>
<div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;                var toEmail = customer.Email;</div>
<div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;                var toName = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">GetCustomerFullNameAsync</a>(customer);</div>
<div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160; </div>
<div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_common_helper_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_common_helper.html">Nop.Core.CommonHelper</a></div><div class="ttdoc">Represents a common helper</div><div class="ttdef"><b>Definition:</b> CommonHelper.cs:17</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_common_helper_html_a78b50a7979169f28157c685159b92884"><div class="ttname"><a href="class_nop_1_1_core_1_1_common_helper.html#a78b50a7979169f28157c685159b92884">Nop.Core.CommonHelper.IsValidEmail</a></div><div class="ttdeci">static bool IsValidEmail(string email)</div><div class="ttdoc">Verifies that a string is in valid e-mail format</div><div class="ttdef"><b>Definition:</b> CommonHelper.cs:62</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_catalog_1_1_back_in_stock_subscription_html_a29fd59128989b41fe0719b3b53c8b4d2"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_back_in_stock_subscription.html#a29fd59128989b41fe0719b3b53c8b4d2">Nop.Core.Domain.Catalog.BackInStockSubscription.CustomerId</a></div><div class="ttdeci">int CustomerId</div><div class="ttdoc">Gets or sets the customer identifier</div><div class="ttdef"><b>Definition:</b> BackInStockSubscription.cs:23</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_catalog_1_1_back_in_stock_subscription_html_aa3ea233bc31a846cb09bfa50c02cf307"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_back_in_stock_subscription.html#aa3ea233bc31a846cb09bfa50c02cf307">Nop.Core.Domain.Catalog.BackInStockSubscription.StoreId</a></div><div class="ttdeci">int StoreId</div><div class="ttdoc">Gets or sets the store identifier</div><div class="ttdef"><b>Definition:</b> BackInStockSubscription.cs:13</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">Nop.Core.Domain.Messages.MessageTemplateSystemNames</a></div><div class="ttdoc">Represents message template system names</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:7</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a929b9af963ebf294517c653eab9bb596"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a929b9af963ebf294517c653eab9bb596">Nop.Core.Domain.Messages.MessageTemplateSystemNames.BackInStockNotification</a></div><div class="ttdeci">const string BackInStockNotification</div><div class="ttdoc">Represents system name of notification customer about product receipt</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:252</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a1fb21eadda33ec74eb783fbb7f28e889"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync</a></div><div class="ttdeci">virtual async Task&lt; int &gt; SendNotificationAsync(MessageTemplate messageTemplate, EmailAccount emailAccount, int languageId, IList&lt; Token &gt; tokens, string toEmailAddress, string toName, string attachmentFilePath=null, string attachmentFileName=null, string replyToEmailAddress=null, string replyToName=null, string fromEmail=null, string fromName=null, string subject=null)</div><div class="ttdoc">Send notification</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:2490</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a27f72a9bb073c3661716e7ec5a8247f1"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync</a></div><div class="ttdeci">virtual async Task&lt; IList&lt; MessageTemplate &gt; &gt; GetActiveMessageTemplatesAsync(string messageTemplateName, int storeId)</div><div class="ttdoc">Get active message templates by the name</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:108</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_a4db49081bd4c75c8a1c65416ae0b0b9f"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync</a></div><div class="ttdeci">virtual async Task&lt; int &gt; EnsureLanguageIsActiveAsync(int languageId, int storeId)</div><div class="ttdoc">Ensure language is active</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:153</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_messages_1_1_workflow_message_service_html_aff35e3fe885b8b0d1165eb71e8a4e63d"><div class="ttname"><a href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync</a></div><div class="ttdeci">virtual async Task&lt; EmailAccount &gt; GetEmailAccountOfMessageTemplateAsync(MessageTemplate messageTemplate, int languageId)</div><div class="ttdoc">Get EmailAccount to use with a message templates</div><div class="ttdef"><b>Definition:</b> WorkflowMessageService.cs:132</div></div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_i_store_context_html_ab98a28cdb13e78df5beea58801148f19"><div class="ttname"><a href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync</a></div><div class="ttdeci">Task&lt; Store &gt; GetCurrentStoreAsync()</div><div class="ttdoc">Gets the current store</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_customers_1_1_i_customer_service_html_a75782fb2c98e870dede70a8a5f67cfb1"><div class="ttname"><a href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">Nop.Services.Customers.ICustomerService.GetCustomerFullNameAsync</a></div><div class="ttdeci">Task&lt; string &gt; GetCustomerFullNameAsync(Customer customer)</div><div class="ttdoc">Get full name</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_customers_1_1_i_customer_service_html_a9d2dc587d116a6f656792c4f4cf22e09"><div class="ttname"><a href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync</a></div><div class="ttdeci">Task&lt; Customer &gt; GetCustomerByIdAsync(int customerId)</div><div class="ttdoc">Gets a customer</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a221ac6aac738883a724d126d2e3da471"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync</a></div><div class="ttdeci">Task AddCustomerTokensAsync(IList&lt; Token &gt; tokens, int customerId)</div><div class="ttdoc">Add customer tokens</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a2ad58d70e802070fca873ff1c6e77561"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync</a></div><div class="ttdeci">Task AddStoreTokensAsync(IList&lt; Token &gt; tokens, Store store, EmailAccount emailAccount)</div><div class="ttdoc">Add store tokens</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_adf999437cd81296a0f1b9f171d1c0e52"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adf999437cd81296a0f1b9f171d1c0e52">Nop.Services.Messages.IMessageTokenProvider.AddBackInStockTokensAsync</a></div><div class="ttdeci">Task AddBackInStockTokensAsync(IList&lt; Token &gt; tokens, BackInStockSubscription subscription)</div><div class="ttdoc">Add tokens of BackInStock subscription</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_stores_1_1_i_store_service_html_ab8f918f81f58ea433cb22a9b0de35192"><div class="ttname"><a href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync</a></div><div class="ttdeci">Task&lt; Store &gt; GetStoreByIdAsync(int storeId)</div><div class="ttdoc">Gets a store</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adf999437cd81296a0f1b9f171d1c0e52">Nop.Services.Messages.IMessageTokenProvider.AddBackInStockTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a929b9af963ebf294517c653eab9bb596">Nop.Core.Domain.Messages.MessageTemplateSystemNames.BackInStockNotification</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_back_in_stock_subscription.html#a29fd59128989b41fe0719b3b53c8b4d2">Nop.Core.Domain.Catalog.BackInStockSubscription.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">Nop.Services.Customers.ICustomerService.GetCustomerFullNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_common_helper.html#a78b50a7979169f28157c685159b92884">Nop.Core.CommonHelper.IsValidEmail()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_back_in_stock_subscription.html#aa3ea233bc31a846cb09bfa50c02cf307">Nop.Core.Domain.Catalog.BackInStockSubscription.StoreId</a>.</p>

</div>
</div>
<a id="a0c7596b46f178d67d39318dfedd98c5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c7596b46f178d67d39318dfedd98c5a">&#9670;&nbsp;</a></span>SendBlogCommentNotificationMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendBlogCommentNotificationMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_blogs_1_1_blog_comment.html">BlogComment</a>&#160;</td>
          <td class="paramname"><em>blogComment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a blog comment notification message to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">blogComment</td><td>Blog comment</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the list of queued email identifiers </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a920b3edb476e322242387992dbe31478">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;        {</div>
<div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;            <span class="keywordflow">if</span> (blogComment == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(blogComment));</div>
<div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160; </div>
<div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160; </div>
<div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aae32182d4fab70678dcd94e59c00cb4a">BlogCommentNotification</a>, store.Id);</div>
<div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160; </div>
<div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#afc73577a65063ab6a2dabcc8dd99c0e9">AddBlogCommentTokensAsync</a>(commonTokens, blogComment);</div>
<div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, blogComment.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_blogs_1_1_blog_comment.html#adf3c52099823be53b48ac4aaaa0c1f49">CustomerId</a>);</div>
<div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160; </div>
<div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;            {</div>
<div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160; </div>
<div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160; </div>
<div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160; </div>
<div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160; </div>
<div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_blogs_1_1_blog_comment_html_adf3c52099823be53b48ac4aaaa0c1f49"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_blogs_1_1_blog_comment.html#adf3c52099823be53b48ac4aaaa0c1f49">Nop.Core.Domain.Blogs.BlogComment.CustomerId</a></div><div class="ttdeci">int CustomerId</div><div class="ttdoc">Gets or sets the customer identifier</div><div class="ttdef"><b>Definition:</b> BlogComment.cs:13</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_aae32182d4fab70678dcd94e59c00cb4a"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aae32182d4fab70678dcd94e59c00cb4a">Nop.Core.Domain.Messages.MessageTemplateSystemNames.BlogCommentNotification</a></div><div class="ttdeci">const string BlogCommentNotification</div><div class="ttdoc">Represents system name of notification store owner about new blog comment</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:242</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_afc73577a65063ab6a2dabcc8dd99c0e9"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#afc73577a65063ab6a2dabcc8dd99c0e9">Nop.Services.Messages.IMessageTokenProvider.AddBlogCommentTokensAsync</a></div><div class="ttdeci">Task AddBlogCommentTokensAsync(IList&lt; Token &gt; tokens, BlogComment blogComment)</div><div class="ttdoc">Add blog comment tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#afc73577a65063ab6a2dabcc8dd99c0e9">Nop.Services.Messages.IMessageTokenProvider.AddBlogCommentTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aae32182d4fab70678dcd94e59c00cb4a">Nop.Core.Domain.Messages.MessageTemplateSystemNames.BlogCommentNotification</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_blogs_1_1_blog_comment.html#adf3c52099823be53b48ac4aaaa0c1f49">Nop.Core.Domain.Blogs.BlogComment.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a295d81ea7710c2d52fc1ed9a33adeece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a295d81ea7710c2d52fc1ed9a33adeece">&#9670;&nbsp;</a></span>SendContactUsMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendContactUsMessageAsync </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>senderEmail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>senderName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>subject</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends "contact us" message </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
    <tr><td class="paramname">senderEmail</td><td>Sender email</td></tr>
    <tr><td class="paramname">senderName</td><td>Sender name</td></tr>
    <tr><td class="paramname">subject</td><td>Email subject. Pass null if you want a message template subject to be used.</td></tr>
    <tr><td class="paramname">body</td><td>Email body</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#aaa357281df73bded6d7ab6d6a7362f2c">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        {</div>
<div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160; </div>
<div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#af6c64c9954f81788e08b69a84f1dfea2">ContactUsMessage</a>, store.Id);</div>
<div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160; </div>
<div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;</div>
<div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;            {</div>
<div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;                <span class="keyword">new</span> Token(<span class="stringliteral">&quot;ContactUs.SenderEmail&quot;</span>, senderEmail),</div>
<div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;                <span class="keyword">new</span> Token(<span class="stringliteral">&quot;ContactUs.SenderName&quot;</span>, senderName),</div>
<div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;                <span class="keyword">new</span> Token(<span class="stringliteral">&quot;ContactUs.Body&quot;</span>, body, <span class="keyword">true</span>)</div>
<div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;            };</div>
<div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160; </div>
<div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;            {</div>
<div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160; </div>
<div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160; </div>
<div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;                <span class="keywordtype">string</span> fromEmail;</div>
<div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;                <span class="keywordtype">string</span> fromName;</div>
<div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;                <span class="comment">//required for some SMTP servers</span></div>
<div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad0339f9abae5302b3e8d2694281502ef">_commonSettings</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_common_1_1_common_settings.html#a38090167b69d847f336e0a4d028eeb51">UseSystemEmailForContactUsForm</a>)</div>
<div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;                {</div>
<div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;                    fromEmail = emailAccount.Email;</div>
<div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;                    fromName = emailAccount.DisplayName;</div>
<div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;                    body = $<span class="stringliteral">&quot;&lt;strong&gt;From&lt;/strong&gt;: {WebUtility.HtmlEncode(senderName)} - {WebUtility.HtmlEncode(senderEmail)}&lt;br /&gt;&lt;br /&gt;{body}&quot;</span>;</div>
<div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;                }</div>
<div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;                {</div>
<div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;                    fromEmail = senderEmail;</div>
<div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;                    fromName = senderName;</div>
<div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;                }</div>
<div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160; </div>
<div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160; </div>
<div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160; </div>
<div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName,</div>
<div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;                    fromEmail: fromEmail,</div>
<div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;                    fromName: fromName,</div>
<div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;                    subject: subject,</div>
<div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;                    replyToEmailAddress: senderEmail,</div>
<div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;                    replyToName: senderName);</div>
<div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_common_1_1_common_settings_html_a38090167b69d847f336e0a4d028eeb51"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_common_1_1_common_settings.html#a38090167b69d847f336e0a4d028eeb51">Nop.Core.Domain.Common.CommonSettings.UseSystemEmailForContactUsForm</a></div><div class="ttdeci">bool UseSystemEmailForContactUsForm</div><div class="ttdoc">Gets or sets a value indicating whether the contacts form should use system email</div><div class="ttdef"><b>Definition:</b> CommonSettings.cs:24</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_af6c64c9954f81788e08b69a84f1dfea2"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#af6c64c9954f81788e08b69a84f1dfea2">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ContactUsMessage</a></div><div class="ttdeci">const string ContactUsMessage</div><div class="ttdoc">Represents system name of 'Contact us' message</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:257</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad0339f9abae5302b3e8d2694281502ef">Nop.Services.Messages.WorkflowMessageService._commonSettings</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#af6c64c9954f81788e08b69a84f1dfea2">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ContactUsMessage</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_common_1_1_common_settings.html#a38090167b69d847f336e0a4d028eeb51">Nop.Core.Domain.Common.CommonSettings.UseSystemEmailForContactUsForm</a>.</p>

</div>
</div>
<a id="a6b3d96284239acf27ddb86a3ab58d186"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6b3d96284239acf27ddb86a3ab58d186">&#9670;&nbsp;</a></span>SendContactVendorMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendContactVendorMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html">Vendor</a>&#160;</td>
          <td class="paramname"><em>vendor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>senderEmail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>senderName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>subject</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends "contact vendor" message </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">vendor</td><td>Vendor</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
    <tr><td class="paramname">senderEmail</td><td>Sender email</td></tr>
    <tr><td class="paramname">senderName</td><td>Sender name</td></tr>
    <tr><td class="paramname">subject</td><td>Email subject. Pass null if you want a message template subject to be used.</td></tr>
    <tr><td class="paramname">body</td><td>Email body</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a82e8643bb48dfb3bfe8431a84b3c7c08">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;        {</div>
<div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;            <span class="keywordflow">if</span> (vendor == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(vendor));</div>
<div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160; </div>
<div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160; </div>
<div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#acb2968a3454334bdd199859d48f71719">ContactVendorMessage</a>, store.Id);</div>
<div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160; </div>
<div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;</div>
<div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;            {</div>
<div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;                <span class="keyword">new</span> Token(<span class="stringliteral">&quot;ContactUs.SenderEmail&quot;</span>, senderEmail),</div>
<div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;                <span class="keyword">new</span> Token(<span class="stringliteral">&quot;ContactUs.SenderName&quot;</span>, senderName),</div>
<div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;                <span class="keyword">new</span> Token(<span class="stringliteral">&quot;ContactUs.Body&quot;</span>, body, <span class="keyword">true</span>)</div>
<div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;            };</div>
<div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160; </div>
<div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;            {</div>
<div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160; </div>
<div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;                <span class="keywordtype">string</span> fromEmail;</div>
<div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;                <span class="keywordtype">string</span> fromName;</div>
<div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;                <span class="comment">//required for some SMTP servers</span></div>
<div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;                <span class="keywordflow">if</span> (<a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad0339f9abae5302b3e8d2694281502ef">_commonSettings</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_common_1_1_common_settings.html#a38090167b69d847f336e0a4d028eeb51">UseSystemEmailForContactUsForm</a>)</div>
<div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;                {</div>
<div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;                    fromEmail = emailAccount.Email;</div>
<div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;                    fromName = emailAccount.DisplayName;</div>
<div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                    body = $<span class="stringliteral">&quot;&lt;strong&gt;From&lt;/strong&gt;: {WebUtility.HtmlEncode(senderName)} - {WebUtility.HtmlEncode(senderEmail)}&lt;br /&gt;&lt;br /&gt;{body}&quot;</span>;</div>
<div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                }</div>
<div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;                {</div>
<div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                    fromEmail = senderEmail;</div>
<div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                    fromName = senderName;</div>
<div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                }</div>
<div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160; </div>
<div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160; </div>
<div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160; </div>
<div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;                var toEmail = vendor.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#a02c8408f7bdeb37f5bb6b035d2defffc">Email</a>;</div>
<div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                var toName = vendor.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#aecedd42175ddf7056cb80b528314c6d5">Name</a>;</div>
<div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160; </div>
<div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName,</div>
<div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;                    fromEmail: fromEmail,</div>
<div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;                    fromName: fromName,</div>
<div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;                    subject: subject,</div>
<div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;                    replyToEmailAddress: senderEmail,</div>
<div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;                    replyToName: senderName);</div>
<div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_acb2968a3454334bdd199859d48f71719"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#acb2968a3454334bdd199859d48f71719">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ContactVendorMessage</a></div><div class="ttdeci">const string ContactVendorMessage</div><div class="ttdoc">Represents system name of 'Contact vendor' message</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:262</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor_html_a02c8408f7bdeb37f5bb6b035d2defffc"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#a02c8408f7bdeb37f5bb6b035d2defffc">Nop.Core.Domain.Vendors.Vendor.Email</a></div><div class="ttdeci">string Email</div><div class="ttdoc">Gets or sets the email</div><div class="ttdef"><b>Definition:</b> Vendor.cs:20</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor_html_aecedd42175ddf7056cb80b528314c6d5"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#aecedd42175ddf7056cb80b528314c6d5">Nop.Core.Domain.Vendors.Vendor.Name</a></div><div class="ttdeci">string Name</div><div class="ttdoc">Gets or sets the name</div><div class="ttdef"><b>Definition:</b> Vendor.cs:15</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad0339f9abae5302b3e8d2694281502ef">Nop.Services.Messages.WorkflowMessageService._commonSettings</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#acb2968a3454334bdd199859d48f71719">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ContactVendorMessage</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#a02c8408f7bdeb37f5bb6b035d2defffc">Nop.Core.Domain.Vendors.Vendor.Email</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#aecedd42175ddf7056cb80b528314c6d5">Nop.Core.Domain.Vendors.Vendor.Name</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_common_1_1_common_settings.html#a38090167b69d847f336e0a4d028eeb51">Nop.Core.Domain.Common.CommonSettings.UseSystemEmailForContactUsForm</a>.</p>

</div>
</div>
<a id="a5c40bd2b8e4c9e4e25f44964811ed82c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c40bd2b8e4c9e4e25f44964811ed82c">&#9670;&nbsp;</a></span>SendCustomerEmailRevalidationMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailRevalidationMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an email re-validation message to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">customer</td><td>Customer instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a2e61b24d2b29c5473d952611099f4fd8">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        {</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160; </div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160; </div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a0916ae64bd45ed558b7579474391596a">CustomerEmailRevalidationMessage</a>, store.Id);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160; </div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            {</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160; </div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160; </div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <span class="comment">//email to re-validate</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                var toEmail = customer.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#a2a4610b8d552c18ab6a01d990a6cccff">EmailToRevalidate</a>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                var toName = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">GetCustomerFullNameAsync</a>(customer);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160; </div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer_html_a2a4610b8d552c18ab6a01d990a6cccff"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#a2a4610b8d552c18ab6a01d990a6cccff">Nop.Core.Domain.Customers.Customer.EmailToRevalidate</a></div><div class="ttdeci">string EmailToRevalidate</div><div class="ttdoc">Gets or sets the email that should be re-validated. Used in scenarios when a customer is already regi...</div><div class="ttdef"><b>Definition:</b> Customer.cs:34</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a0916ae64bd45ed558b7579474391596a"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a0916ae64bd45ed558b7579474391596a">Nop.Core.Domain.Messages.MessageTemplateSystemNames.CustomerEmailRevalidationMessage</a></div><div class="ttdeci">const string CustomerEmailRevalidationMessage</div><div class="ttdoc">Represents system name of email revalidation message</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:28</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a0916ae64bd45ed558b7579474391596a">Nop.Core.Domain.Messages.MessageTemplateSystemNames.CustomerEmailRevalidationMessage</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#a2a4610b8d552c18ab6a01d990a6cccff">Nop.Core.Domain.Customers.Customer.EmailToRevalidate</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">Nop.Services.Customers.ICustomerService.GetCustomerFullNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="afadea9d04dc47805c432d3941ecea017"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afadea9d04dc47805c432d3941ecea017">&#9670;&nbsp;</a></span>SendCustomerEmailValidationMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailValidationMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an email validation message to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">customer</td><td>Customer instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ae38fa18f5442f429161df5ad711694b3">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        {</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160; </div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a7054912c33e00f9c5a0007ba2c74375e">CustomerEmailValidationMessage</a>, store.Id);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160; </div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160; </div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                var toEmail = customer.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#abf466d653cc0436e3f022aad20a0ab95">Email</a>;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                var toName = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">GetCustomerFullNameAsync</a>(customer);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160; </div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer_html_abf466d653cc0436e3f022aad20a0ab95"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#abf466d653cc0436e3f022aad20a0ab95">Nop.Core.Domain.Customers.Customer.Email</a></div><div class="ttdeci">string Email</div><div class="ttdoc">Gets or sets the email</div><div class="ttdef"><b>Definition:</b> Customer.cs:29</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a7054912c33e00f9c5a0007ba2c74375e"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a7054912c33e00f9c5a0007ba2c74375e">Nop.Core.Domain.Messages.MessageTemplateSystemNames.CustomerEmailValidationMessage</a></div><div class="ttdeci">const string CustomerEmailValidationMessage</div><div class="ttdoc">Represents system name of email validation message</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:23</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a7054912c33e00f9c5a0007ba2c74375e">Nop.Core.Domain.Messages.MessageTemplateSystemNames.CustomerEmailValidationMessage</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#abf466d653cc0436e3f022aad20a0ab95">Nop.Core.Domain.Customers.Customer.Email</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">Nop.Services.Customers.ICustomerService.GetCustomerFullNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a7e4f7bc55fa2909c186a453d6ef976cf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e4f7bc55fa2909c186a453d6ef976cf">&#9670;&nbsp;</a></span>SendCustomerPasswordRecoveryMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendCustomerPasswordRecoveryMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends password recovery message to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">customer</td><td>Customer instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a347415b885325a8ed2a066a526452c4d">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        {</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160; </div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160; </div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a4dc01f7537561b31ab33b432eb131917">CustomerPasswordRecoveryMessage</a>, store.Id);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160; </div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160; </div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            {</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160; </div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160; </div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                var toEmail = customer.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#abf466d653cc0436e3f022aad20a0ab95">Email</a>;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                var toName = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">GetCustomerFullNameAsync</a>(customer);</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160; </div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a4dc01f7537561b31ab33b432eb131917"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a4dc01f7537561b31ab33b432eb131917">Nop.Core.Domain.Messages.MessageTemplateSystemNames.CustomerPasswordRecoveryMessage</a></div><div class="ttdeci">const string CustomerPasswordRecoveryMessage</div><div class="ttdoc">Represents system name of password recovery message</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:33</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a4dc01f7537561b31ab33b432eb131917">Nop.Core.Domain.Messages.MessageTemplateSystemNames.CustomerPasswordRecoveryMessage</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#abf466d653cc0436e3f022aad20a0ab95">Nop.Core.Domain.Customers.Customer.Email</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">Nop.Services.Customers.ICustomerService.GetCustomerFullNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="ae6a1fcd56a03e8cf34174d6e10e57aeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6a1fcd56a03e8cf34174d6e10e57aeb">&#9670;&nbsp;</a></span>SendCustomerRegisteredNotificationMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendCustomerRegisteredNotificationMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends 'New customer' notification message to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">customer</td><td>Customer instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a7f4fd2b7a0b079f39001742bbf255775">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;        {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160; </div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ac8a52fba82a8b27ee16e55e0776675c0">CustomerRegisteredNotification</a>, store.Id);</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160; </div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160; </div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;            {</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160; </div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160; </div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160; </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160; </div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_ac8a52fba82a8b27ee16e55e0776675c0"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ac8a52fba82a8b27ee16e55e0776675c0">Nop.Core.Domain.Messages.MessageTemplateSystemNames.CustomerRegisteredNotification</a></div><div class="ttdeci">const string CustomerRegisteredNotification</div><div class="ttdoc">Represents system name of notification about new registration</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:13</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ac8a52fba82a8b27ee16e55e0776675c0">Nop.Core.Domain.Messages.MessageTemplateSystemNames.CustomerRegisteredNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="ac4c2428c56201bb4783bc40c2d00eed7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4c2428c56201bb4783bc40c2d00eed7">&#9670;&nbsp;</a></span>SendCustomerWelcomeMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendCustomerWelcomeMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a welcome message to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">customer</td><td>Customer instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a6d520d2b81247be7cc3221e1507774fa">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;        {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a62d2da5b4a6edcdf0979f00587aa088d">CustomerWelcomeMessage</a>, store.Id);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160; </div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160; </div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160; </div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160; </div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160; </div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                var toEmail = customer.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#abf466d653cc0436e3f022aad20a0ab95">Email</a>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                var toName = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">GetCustomerFullNameAsync</a>(customer);</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160; </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a62d2da5b4a6edcdf0979f00587aa088d"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a62d2da5b4a6edcdf0979f00587aa088d">Nop.Core.Domain.Messages.MessageTemplateSystemNames.CustomerWelcomeMessage</a></div><div class="ttdeci">const string CustomerWelcomeMessage</div><div class="ttdoc">Represents system name of customer welcome message</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:18</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a62d2da5b4a6edcdf0979f00587aa088d">Nop.Core.Domain.Messages.MessageTemplateSystemNames.CustomerWelcomeMessage</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#abf466d653cc0436e3f022aad20a0ab95">Nop.Core.Domain.Customers.Customer.Email</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">Nop.Services.Customers.ICustomerService.GetCustomerFullNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a89e349660d03614413a340539d9f9c33"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89e349660d03614413a340539d9f9c33">&#9670;&nbsp;</a></span>SendGiftCardNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendGiftCardNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card.html">GiftCard</a>&#160;</td>
          <td class="paramname"><em>giftCard</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a gift card notification </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">giftCard</td><td>Gift card</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a886fe1caebc525ae25b9bfeaab158d26">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;        {</div>
<div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;            <span class="keywordflow">if</span> (giftCard == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(giftCard));</div>
<div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160; </div>
<div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;            var order = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">_orderService</a>.<a class="code" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a407eb137d1478733570f812a8a2065e2">GetOrderByOrderItemAsync</a>(giftCard.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card.html#a56f01d6411fa4b7fc3cd9fe072b0401f">PurchasedWithOrderItemId</a> ?? 0);</div>
<div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160; </div>
<div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;            var store = order != <span class="keyword">null</span> ? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.StoreId) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>() : await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160; </div>
<div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160; </div>
<div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ad4cf32c6d8f8cabaf9e32017be6cfff9">GiftCardNotification</a>, store.Id);</div>
<div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160; </div>
<div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a15f5d273b82f30cc1646f0d2f26c5c25">AddGiftCardTokensAsync</a>(commonTokens, giftCard);</div>
<div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160; </div>
<div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;            {</div>
<div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160; </div>
<div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160; </div>
<div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160; </div>
<div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                var toEmail = giftCard.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card.html#ae66867fb38f4afc7e1fb51b9afe491c7">RecipientEmail</a>;</div>
<div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                var toName = giftCard.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card.html#afa7dd56fbe0b2a62174679abaf417f6f">RecipientName</a>;</div>
<div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160; </div>
<div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_ad4cf32c6d8f8cabaf9e32017be6cfff9"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ad4cf32c6d8f8cabaf9e32017be6cfff9">Nop.Core.Domain.Messages.MessageTemplateSystemNames.GiftCardNotification</a></div><div class="ttdeci">const string GiftCardNotification</div><div class="ttdoc">Represents system name of notification about gift card</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:212</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card_html_a56f01d6411fa4b7fc3cd9fe072b0401f"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card.html#a56f01d6411fa4b7fc3cd9fe072b0401f">Nop.Core.Domain.Orders.GiftCard.PurchasedWithOrderItemId</a></div><div class="ttdeci">int? PurchasedWithOrderItemId</div><div class="ttdoc">Gets or sets the associated order item identifier</div><div class="ttdef"><b>Definition:</b> GiftCard.cs:14</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card_html_ae66867fb38f4afc7e1fb51b9afe491c7"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card.html#ae66867fb38f4afc7e1fb51b9afe491c7">Nop.Core.Domain.Orders.GiftCard.RecipientEmail</a></div><div class="ttdeci">string RecipientEmail</div><div class="ttdoc">Gets or sets a recipient email</div><div class="ttdef"><b>Definition:</b> GiftCard.cs:44</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card_html_afa7dd56fbe0b2a62174679abaf417f6f"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card.html#afa7dd56fbe0b2a62174679abaf417f6f">Nop.Core.Domain.Orders.GiftCard.RecipientName</a></div><div class="ttdeci">string RecipientName</div><div class="ttdoc">Gets or sets a recipient name</div><div class="ttdef"><b>Definition:</b> GiftCard.cs:39</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a15f5d273b82f30cc1646f0d2f26c5c25"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a15f5d273b82f30cc1646f0d2f26c5c25">Nop.Services.Messages.IMessageTokenProvider.AddGiftCardTokensAsync</a></div><div class="ttdeci">Task AddGiftCardTokensAsync(IList&lt; Token &gt; tokens, GiftCard giftCard)</div><div class="ttdoc">Add gift card tokens</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_orders_1_1_i_order_service_html_a407eb137d1478733570f812a8a2065e2"><div class="ttname"><a href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a407eb137d1478733570f812a8a2065e2">Nop.Services.Orders.IOrderService.GetOrderByOrderItemAsync</a></div><div class="ttdeci">Task&lt; Order &gt; GetOrderByOrderItemAsync(int orderItemId)</div><div class="ttdoc">Gets an order by order item identifier</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">Nop.Services.Messages.WorkflowMessageService._orderService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a15f5d273b82f30cc1646f0d2f26c5c25">Nop.Services.Messages.IMessageTokenProvider.AddGiftCardTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a407eb137d1478733570f812a8a2065e2">Nop.Services.Orders.IOrderService.GetOrderByOrderItemAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ad4cf32c6d8f8cabaf9e32017be6cfff9">Nop.Core.Domain.Messages.MessageTemplateSystemNames.GiftCardNotification</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card.html#a56f01d6411fa4b7fc3cd9fe072b0401f">Nop.Core.Domain.Orders.GiftCard.PurchasedWithOrderItemId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card.html#ae66867fb38f4afc7e1fb51b9afe491c7">Nop.Core.Domain.Orders.GiftCard.RecipientEmail</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_gift_card.html#afa7dd56fbe0b2a62174679abaf417f6f">Nop.Core.Domain.Orders.GiftCard.RecipientName</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a374616ddbe97dc0722857e05f6ecec70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a374616ddbe97dc0722857e05f6ecec70">&#9670;&nbsp;</a></span>SendNewForumPostMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendNewForumPostMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_forum_post.html">ForumPost</a>&#160;</td>
          <td class="paramname"><em>forumPost</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_forum_topic.html">ForumTopic</a>&#160;</td>
          <td class="paramname"><em>forumTopic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_forum.html">Forum</a>&#160;</td>
          <td class="paramname"><em>forum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>friendlyForumTopicPageIndex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a forum subscription message to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">customer</td><td>Customer instance</td></tr>
    <tr><td class="paramname">forumPost</td><td>Forum post</td></tr>
    <tr><td class="paramname">forumTopic</td><td>Forum Topic</td></tr>
    <tr><td class="paramname">forum</td><td>Forum</td></tr>
    <tr><td class="paramname">friendlyForumTopicPageIndex</td><td>Friendly (starts with 1) forum topic page to use for URL generation</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a7f162197eaba74e5181bd6b8c0f89308">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;        {</div>
<div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160; </div>
<div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160; </div>
<div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ad5141125c543f885d215645b213d3788">NewForumPostMessage</a>, store.Id);</div>
<div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160; </div>
<div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a57434f0635514267339f0a238cc94638">AddForumPostTokensAsync</a>(commonTokens, forumPost);</div>
<div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a50616bcfcf9b90f55e87212d049b4e6f">AddForumTopicTokensAsync</a>(commonTokens, forumTopic, friendlyForumTopicPageIndex, forumPost.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a>);</div>
<div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a1eedbba0d8698568a0d1c98e64defdd7">AddForumTokensAsync</a>(commonTokens, forum);</div>
<div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160; </div>
<div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;            {</div>
<div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160; </div>
<div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160; </div>
<div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160; </div>
<div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;                var toEmail = customer.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#abf466d653cc0436e3f022aad20a0ab95">Email</a>;</div>
<div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;                var toName = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">GetCustomerFullNameAsync</a>(customer);</div>
<div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160; </div>
<div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_base_entity_html_a6908f7c042a024f82d7e7947e75bca53"><div class="ttname"><a href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Nop.Core.BaseEntity.Id</a></div><div class="ttdeci">int Id</div><div class="ttdoc">Gets or sets the entity identifier</div><div class="ttdef"><b>Definition:</b> BaseEntity.cs:11</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_ad5141125c543f885d215645b213d3788"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ad5141125c543f885d215645b213d3788">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewForumPostMessage</a></div><div class="ttdeci">const string NewForumPostMessage</div><div class="ttdoc">Represents system name of notification about new forum post</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:188</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a1eedbba0d8698568a0d1c98e64defdd7"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a1eedbba0d8698568a0d1c98e64defdd7">Nop.Services.Messages.IMessageTokenProvider.AddForumTokensAsync</a></div><div class="ttdeci">Task AddForumTokensAsync(IList&lt; Token &gt; tokens, Forum forum)</div><div class="ttdoc">Add forum tokens</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a50616bcfcf9b90f55e87212d049b4e6f"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a50616bcfcf9b90f55e87212d049b4e6f">Nop.Services.Messages.IMessageTokenProvider.AddForumTopicTokensAsync</a></div><div class="ttdeci">Task AddForumTopicTokensAsync(IList&lt; Token &gt; tokens, ForumTopic forumTopic, int? friendlyForumTopicPageIndex=null, int? appendedPostIdentifierAnchor=null)</div><div class="ttdoc">Add forum topic tokens</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a57434f0635514267339f0a238cc94638"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a57434f0635514267339f0a238cc94638">Nop.Services.Messages.IMessageTokenProvider.AddForumPostTokensAsync</a></div><div class="ttdeci">Task AddForumPostTokensAsync(IList&lt; Token &gt; tokens, ForumPost forumPost)</div><div class="ttdoc">Add forum post tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a57434f0635514267339f0a238cc94638">Nop.Services.Messages.IMessageTokenProvider.AddForumPostTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a1eedbba0d8698568a0d1c98e64defdd7">Nop.Services.Messages.IMessageTokenProvider.AddForumTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a50616bcfcf9b90f55e87212d049b4e6f">Nop.Services.Messages.IMessageTokenProvider.AddForumTopicTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#abf466d653cc0436e3f022aad20a0ab95">Nop.Core.Domain.Customers.Customer.Email</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">Nop.Services.Customers.ICustomerService.GetCustomerFullNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Nop.Core.BaseEntity.Id</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ad5141125c543f885d215645b213d3788">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewForumPostMessage</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a4c859d8347db968c7762869b4a70ee2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c859d8347db968c7762869b4a70ee2e">&#9670;&nbsp;</a></span>SendNewForumTopicMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendNewForumTopicMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_forum_topic.html">ForumTopic</a>&#160;</td>
          <td class="paramname"><em>forumTopic</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_forum.html">Forum</a>&#160;</td>
          <td class="paramname"><em>forum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a forum subscription message to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">customer</td><td>Customer instance</td></tr>
    <tr><td class="paramname">forumTopic</td><td>Forum Topic</td></tr>
    <tr><td class="paramname">forum</td><td>Forum</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a3f2f08cf9046981fc83d7625fc7f6dc2">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;        {</div>
<div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160; </div>
<div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160; </div>
<div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a4e7a1f96651d939afda18320f2c1578c">NewForumTopicMessage</a>, store.Id);</div>
<div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160; </div>
<div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a50616bcfcf9b90f55e87212d049b4e6f">AddForumTopicTokensAsync</a>(commonTokens, forumTopic);</div>
<div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a1eedbba0d8698568a0d1c98e64defdd7">AddForumTokensAsync</a>(commonTokens, forum);</div>
<div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160; </div>
<div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;            {</div>
<div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160; </div>
<div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160; </div>
<div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160; </div>
<div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;                var toEmail = customer.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#abf466d653cc0436e3f022aad20a0ab95">Email</a>;</div>
<div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;                var toName = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">GetCustomerFullNameAsync</a>(customer);</div>
<div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160; </div>
<div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a4e7a1f96651d939afda18320f2c1578c"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a4e7a1f96651d939afda18320f2c1578c">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewForumTopicMessage</a></div><div class="ttdeci">const string NewForumTopicMessage</div><div class="ttdoc">Represents system name of notification about new forum topic</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:183</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a1eedbba0d8698568a0d1c98e64defdd7">Nop.Services.Messages.IMessageTokenProvider.AddForumTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a50616bcfcf9b90f55e87212d049b4e6f">Nop.Services.Messages.IMessageTokenProvider.AddForumTopicTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html#abf466d653cc0436e3f022aad20a0ab95">Nop.Core.Domain.Customers.Customer.Email</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">Nop.Services.Customers.ICustomerService.GetCustomerFullNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a4e7a1f96651d939afda18320f2c1578c">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewForumTopicMessage</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a3f848aa49ef68919b1a43236a55c957d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f848aa49ef68919b1a43236a55c957d">&#9670;&nbsp;</a></span>SendNewOrderNoteAddedCustomerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendNewOrderNoteAddedCustomerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_note.html">OrderNote</a>&#160;</td>
          <td class="paramname"><em>orderNote</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a new order note added notification to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">orderNote</td><td>Order note</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a588d15c4b43455a32c4b4db0d756b1dc">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;        {</div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;            <span class="keywordflow">if</span> (orderNote == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(orderNote));</div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160; </div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;            var order = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">_orderService</a>.<a class="code" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">GetOrderByIdAsync</a>(orderNote.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_note.html#a4adefbdd6940da9b35592ce05d18c770">OrderId</a>);</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160; </div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Order cannot be loaded&quot;</span>);</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160; </div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.StoreId) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160; </div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a4fbdb2ab591d7985cdbe37ba069a8d17">NewOrderNoteAddedCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160; </div>
<div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a81522528b184f853361c9f35311c9722">AddOrderNoteTokensAsync</a>(commonTokens, orderNote);</div>
<div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.CustomerId);</div>
<div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160; </div>
<div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;            {</div>
<div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160; </div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160; </div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160; </div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                var billingAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(order.BillingAddressId);</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160; </div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                var toEmail = billingAddress.Email;</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;                var toName = $<span class="stringliteral">&quot;{billingAddress.FirstName} {billingAddress.LastName}&quot;</span>;</div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160; </div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a4fbdb2ab591d7985cdbe37ba069a8d17"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a4fbdb2ab591d7985cdbe37ba069a8d17">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewOrderNoteAddedCustomerNotification</a></div><div class="ttdeci">const string NewOrderNoteAddedCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about new order note</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:112</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_note_html_a4adefbdd6940da9b35592ce05d18c770"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_note.html#a4adefbdd6940da9b35592ce05d18c770">Nop.Core.Domain.Orders.OrderNote.OrderId</a></div><div class="ttdeci">int OrderId</div><div class="ttdoc">Gets or sets the order identifier</div><div class="ttdef"><b>Definition:</b> OrderNote.cs:13</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_common_1_1_i_address_service_html_a91a223bb48ad616e4155d16894c64470"><div class="ttname"><a href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync</a></div><div class="ttdeci">Task&lt; Address &gt; GetAddressByIdAsync(int addressId)</div><div class="ttdoc">Gets an address by address identifier</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a81522528b184f853361c9f35311c9722"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a81522528b184f853361c9f35311c9722">Nop.Services.Messages.IMessageTokenProvider.AddOrderNoteTokensAsync</a></div><div class="ttdeci">Task AddOrderNoteTokensAsync(IList&lt; Token &gt; tokens, OrderNote orderNote)</div><div class="ttdoc">Add order note tokens</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_adad7428ce0a1048e50fa7fbcbfad6b81"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync</a></div><div class="ttdeci">Task AddOrderTokensAsync(IList&lt; Token &gt; tokens, Order order, int languageId, int vendorId=0)</div><div class="ttdoc">Add order tokens</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_orders_1_1_i_order_service_html_a75bc6860ccdf693731b275018e462978"><div class="ttname"><a href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">Nop.Services.Orders.IOrderService.GetOrderByIdAsync</a></div><div class="ttdeci">Task&lt; Order &gt; GetOrderByIdAsync(int orderId)</div><div class="ttdoc">Gets an order</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">Nop.Services.Messages.WorkflowMessageService._orderService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a81522528b184f853361c9f35311c9722">Nop.Services.Messages.IMessageTokenProvider.AddOrderNoteTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">Nop.Services.Orders.IOrderService.GetOrderByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a4fbdb2ab591d7985cdbe37ba069a8d17">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewOrderNoteAddedCustomerNotification</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_note.html#a4adefbdd6940da9b35592ce05d18c770">Nop.Core.Domain.Orders.OrderNote.OrderId</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a3cf231a1ec189b0e854eb328e51c34db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cf231a1ec189b0e854eb328e51c34db">&#9670;&nbsp;</a></span>SendNewReturnRequestCustomerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestCustomerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html">ReturnRequest</a>&#160;</td>
          <td class="paramname"><em>returnRequest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_item.html">OrderItem</a>&#160;</td>
          <td class="paramname"><em>orderItem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends 'New Return Request' message to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">returnRequest</td><td>Return request</td></tr>
    <tr><td class="paramname">orderItem</td><td>Order item</td></tr>
    <tr><td class="paramname">order</td><td>Order</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ae58fddebd3697831710c39ca0795d3f9">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        {</div>
<div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;            <span class="keywordflow">if</span> (returnRequest == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(returnRequest));</div>
<div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160; </div>
<div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;            <span class="keywordflow">if</span> (orderItem == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(orderItem));</div>
<div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160; </div>
<div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160; </div>
<div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;            var languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afac2b603ee3b2ff601163ed07164694e">CustomerLanguageId</a>, store.Id);</div>
<div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160; </div>
<div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a35a3e47b95b4c9cacab376297266c638">NewReturnRequestCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160; </div>
<div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;            var customer = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">GetCustomerByIdAsync</a>(returnRequest.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html#af2116118907fe1788c7f1dd5776e159a">CustomerId</a>);</div>
<div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160; </div>
<div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#af701012415ed6813e003af26dce9c7c1">AddReturnRequestTokensAsync</a>(commonTokens, returnRequest, orderItem, languageId);</div>
<div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160; </div>
<div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;            {</div>
<div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160; </div>
<div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160; </div>
<div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160; </div>
<div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;                var billingAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">BillingAddressId</a>);</div>
<div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160; </div>
<div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;                var toEmail = (await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a1ea83a743a13cc9e5dda268a57f16f1f">IsGuestAsync</a>(customer))</div>
<div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;                    ? billingAddress.Email</div>
<div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;                    : customer.Email;</div>
<div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;                var toName = (await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a1ea83a743a13cc9e5dda268a57f16f1f">IsGuestAsync</a>(customer))</div>
<div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;                    ? billingAddress.FirstName</div>
<div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;                    : await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">GetCustomerFullNameAsync</a>(customer);</div>
<div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160; </div>
<div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a35a3e47b95b4c9cacab376297266c638"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a35a3e47b95b4c9cacab376297266c638">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewReturnRequestCustomerNotification</a></div><div class="ttdeci">const string NewReturnRequestCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about new return request</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:169</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_a6eab9b1126cda0970526b3c4d9af9aed"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a></div><div class="ttdeci">int StoreId</div><div class="ttdoc">Gets or sets the store identifier</div><div class="ttdef"><b>Definition:</b> Order.cs:24</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_a70400dbb1fb7c02f6f3e9f3b3bcf6e7c"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">Nop.Core.Domain.Orders.Order.BillingAddressId</a></div><div class="ttdeci">int BillingAddressId</div><div class="ttdoc">Gets or sets the billing address identifier</div><div class="ttdef"><b>Definition:</b> Order.cs:34</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_afac2b603ee3b2ff601163ed07164694e"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afac2b603ee3b2ff601163ed07164694e">Nop.Core.Domain.Orders.Order.CustomerLanguageId</a></div><div class="ttdeci">int CustomerLanguageId</div><div class="ttdoc">Gets or sets the customer language identifier</div><div class="ttdef"><b>Definition:</b> Order.cs:174</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request_html_af2116118907fe1788c7f1dd5776e159a"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html#af2116118907fe1788c7f1dd5776e159a">Nop.Core.Domain.Orders.ReturnRequest.CustomerId</a></div><div class="ttdeci">int CustomerId</div><div class="ttdoc">Gets or sets the customer identifier</div><div class="ttdef"><b>Definition:</b> ReturnRequest.cs:28</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_customers_1_1_i_customer_service_html_a1ea83a743a13cc9e5dda268a57f16f1f"><div class="ttname"><a href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a1ea83a743a13cc9e5dda268a57f16f1f">Nop.Services.Customers.ICustomerService.IsGuestAsync</a></div><div class="ttdeci">Task&lt; bool &gt; IsGuestAsync(Customer customer, bool onlyActiveCustomerRoles=true)</div><div class="ttdoc">Gets a value indicating whether customer is guest</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_af701012415ed6813e003af26dce9c7c1"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#af701012415ed6813e003af26dce9c7c1">Nop.Services.Messages.IMessageTokenProvider.AddReturnRequestTokensAsync</a></div><div class="ttdeci">Task AddReturnRequestTokensAsync(IList&lt; Token &gt; tokens, ReturnRequest returnRequest, OrderItem orderItem, int languageId)</div><div class="ttdoc">Add return request tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#af701012415ed6813e003af26dce9c7c1">Nop.Services.Messages.IMessageTokenProvider.AddReturnRequestTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">Nop.Core.Domain.Orders.Order.BillingAddressId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html#af2116118907fe1788c7f1dd5776e159a">Nop.Core.Domain.Orders.ReturnRequest.CustomerId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afac2b603ee3b2ff601163ed07164694e">Nop.Core.Domain.Orders.Order.CustomerLanguageId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">Nop.Services.Customers.ICustomerService.GetCustomerFullNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a1ea83a743a13cc9e5dda268a57f16f1f">Nop.Services.Customers.ICustomerService.IsGuestAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a35a3e47b95b4c9cacab376297266c638">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewReturnRequestCustomerNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="a8833fe15d53e8aece5a05bc87d50e176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8833fe15d53e8aece5a05bc87d50e176">&#9670;&nbsp;</a></span>SendNewReturnRequestStoreOwnerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestStoreOwnerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html">ReturnRequest</a>&#160;</td>
          <td class="paramname"><em>returnRequest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_item.html">OrderItem</a>&#160;</td>
          <td class="paramname"><em>orderItem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends 'New Return Request' message to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">returnRequest</td><td>Return request</td></tr>
    <tr><td class="paramname">orderItem</td><td>Order item</td></tr>
    <tr><td class="paramname">order</td><td>Order</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ac2b557f4c446178cd27986c75ded2f73">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;        {</div>
<div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;            <span class="keywordflow">if</span> (returnRequest == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(returnRequest));</div>
<div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160; </div>
<div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;            <span class="keywordflow">if</span> (orderItem == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(orderItem));</div>
<div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160; </div>
<div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160; </div>
<div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160; </div>
<div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a9acad33dc309e6abd4a890e18b3ef574">NewReturnRequestStoreOwnerNotification</a>, store.Id);</div>
<div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160; </div>
<div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, returnRequest.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html#af2116118907fe1788c7f1dd5776e159a">CustomerId</a>);</div>
<div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#af701012415ed6813e003af26dce9c7c1">AddReturnRequestTokensAsync</a>(commonTokens, returnRequest, orderItem, languageId);</div>
<div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160; </div>
<div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;            {</div>
<div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160; </div>
<div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160; </div>
<div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160; </div>
<div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160; </div>
<div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a9acad33dc309e6abd4a890e18b3ef574"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a9acad33dc309e6abd4a890e18b3ef574">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewReturnRequestStoreOwnerNotification</a></div><div class="ttdeci">const string NewReturnRequestStoreOwnerNotification</div><div class="ttdoc">Represents system name of notification store owner about new return request</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:164</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#af701012415ed6813e003af26dce9c7c1">Nop.Services.Messages.IMessageTokenProvider.AddReturnRequestTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html#af2116118907fe1788c7f1dd5776e159a">Nop.Core.Domain.Orders.ReturnRequest.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a9acad33dc309e6abd4a890e18b3ef574">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewReturnRequestStoreOwnerNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="aea5d06fb9d1a1529e43a5eb511f0c048"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea5d06fb9d1a1529e43a5eb511f0c048">&#9670;&nbsp;</a></span>SendNewsCommentNotificationMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendNewsCommentNotificationMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_news_1_1_news_comment.html">NewsComment</a>&#160;</td>
          <td class="paramname"><em>newsComment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a news comment notification message to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">newsComment</td><td><a class="el" href="namespace_nop_1_1_services_1_1_news.html">News</a> comment</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a87d85a7beeb606c3df6b2e19c792cd15">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;        {</div>
<div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;            <span class="keywordflow">if</span> (newsComment == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(newsComment));</div>
<div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160; </div>
<div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160; </div>
<div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a87d2089e10df3c8bc1c5f34853cb79d0">NewsCommentNotification</a>, store.Id);</div>
<div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160; </div>
<div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a57922aecdb1c0d4d1ede2c271854cdec">AddNewsCommentTokensAsync</a>(commonTokens, newsComment);</div>
<div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, newsComment.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_news_1_1_news_comment.html#a204e9bb94cd1a8989e30c0ba1f0d6ec5">CustomerId</a>);</div>
<div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160; </div>
<div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;            {</div>
<div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160; </div>
<div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160; </div>
<div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160; </div>
<div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160; </div>
<div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a87d2089e10df3c8bc1c5f34853cb79d0"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a87d2089e10df3c8bc1c5f34853cb79d0">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewsCommentNotification</a></div><div class="ttdeci">const string NewsCommentNotification</div><div class="ttdoc">Represents system name of notification store owner about new news comment</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:247</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_news_1_1_news_comment_html_a204e9bb94cd1a8989e30c0ba1f0d6ec5"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_news_1_1_news_comment.html#a204e9bb94cd1a8989e30c0ba1f0d6ec5">Nop.Core.Domain.News.NewsComment.CustomerId</a></div><div class="ttdeci">int CustomerId</div><div class="ttdoc">Gets or sets the customer identifier</div><div class="ttdef"><b>Definition:</b> NewsComment.cs:28</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a57922aecdb1c0d4d1ede2c271854cdec"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a57922aecdb1c0d4d1ede2c271854cdec">Nop.Services.Messages.IMessageTokenProvider.AddNewsCommentTokensAsync</a></div><div class="ttdeci">Task AddNewsCommentTokensAsync(IList&lt; Token &gt; tokens, NewsComment newsComment)</div><div class="ttdoc">Add news comment tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a57922aecdb1c0d4d1ede2c271854cdec">Nop.Services.Messages.IMessageTokenProvider.AddNewsCommentTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_news_1_1_news_comment.html#a204e9bb94cd1a8989e30c0ba1f0d6ec5">Nop.Core.Domain.News.NewsComment.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a87d2089e10df3c8bc1c5f34853cb79d0">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewsCommentNotification</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a73e1a0e8826575c240b4ba33cc3ea970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73e1a0e8826575c240b4ba33cc3ea970">&#9670;&nbsp;</a></span>SendNewsLetterSubscriptionActivationMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionActivationMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html">NewsLetterSubscription</a>&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a newsletter subscription activation message </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Newsletter subscription</td></tr>
    <tr><td class="paramname">languageId</td><td>Language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a9d212b580aa44c7f9785a8d47b7256db">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        {</div>
<div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;            <span class="keywordflow">if</span> (subscription == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(subscription));</div>
<div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160; </div>
<div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160; </div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a3a00067e7a674de54738ab325aad04d3">NewsletterSubscriptionActivationMessage</a>, store.Id);</div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160; </div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a202ffa4f766871ee47def5cde0321855">AddNewsLetterSubscriptionTokensAsync</a>(commonTokens, subscription);</div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160; </div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;            {</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160; </div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160; </div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160; </div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, subscription.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Email</a>, <span class="keywordtype">string</span>.Empty);</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a3a00067e7a674de54738ab325aad04d3"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a3a00067e7a674de54738ab325aad04d3">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewsletterSubscriptionActivationMessage</a></div><div class="ttdeci">const string NewsletterSubscriptionActivationMessage</div><div class="ttdoc">Represents system name of subscription activation message</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:136</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription_html_a08899b81919c6431da9eb183ed451271"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Nop.Core.Domain.Messages.NewsLetterSubscription.Email</a></div><div class="ttdeci">string Email</div><div class="ttdoc">Gets or sets the subscriber email</div><div class="ttdef"><b>Definition:</b> NewsLetterSubscription.cs:18</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a202ffa4f766871ee47def5cde0321855"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a202ffa4f766871ee47def5cde0321855">Nop.Services.Messages.IMessageTokenProvider.AddNewsLetterSubscriptionTokensAsync</a></div><div class="ttdeci">Task AddNewsLetterSubscriptionTokensAsync(IList&lt; Token &gt; tokens, NewsLetterSubscription subscription)</div><div class="ttdoc">Add newsletter subscription tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a202ffa4f766871ee47def5cde0321855">Nop.Services.Messages.IMessageTokenProvider.AddNewsLetterSubscriptionTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Nop.Core.Domain.Messages.NewsLetterSubscription.Email</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a3a00067e7a674de54738ab325aad04d3">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewsletterSubscriptionActivationMessage</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a874c291702763976f208b0ffaff9f82f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a874c291702763976f208b0ffaff9f82f">&#9670;&nbsp;</a></span>SendNewsLetterSubscriptionDeactivationMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionDeactivationMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html">NewsLetterSubscription</a>&#160;</td>
          <td class="paramname"><em>subscription</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a newsletter subscription deactivation message </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Newsletter subscription</td></tr>
    <tr><td class="paramname">languageId</td><td>Language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ae0969136f3050b0a353c3f10f5c69137">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        {</div>
<div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;            <span class="keywordflow">if</span> (subscription == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(subscription));</div>
<div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160; </div>
<div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160; </div>
<div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aa7d349ab7a1c3fa3cad86113d1af941b">NewsletterSubscriptionDeactivationMessage</a>, store.Id);</div>
<div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160; </div>
<div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a202ffa4f766871ee47def5cde0321855">AddNewsLetterSubscriptionTokensAsync</a>(commonTokens, subscription);</div>
<div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160; </div>
<div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;            {</div>
<div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160; </div>
<div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160; </div>
<div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160; </div>
<div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, subscription.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Email</a>, <span class="keywordtype">string</span>.Empty);</div>
<div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_aa7d349ab7a1c3fa3cad86113d1af941b"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aa7d349ab7a1c3fa3cad86113d1af941b">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewsletterSubscriptionDeactivationMessage</a></div><div class="ttdeci">const string NewsletterSubscriptionDeactivationMessage</div><div class="ttdoc">Represents system name of subscription deactivation message</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:141</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a202ffa4f766871ee47def5cde0321855">Nop.Services.Messages.IMessageTokenProvider.AddNewsLetterSubscriptionTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Nop.Core.Domain.Messages.NewsLetterSubscription.Email</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aa7d349ab7a1c3fa3cad86113d1af941b">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewsletterSubscriptionDeactivationMessage</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="ae11a46de3c9c71987d976e8eb29b799f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae11a46de3c9c71987d976e8eb29b799f">&#9670;&nbsp;</a></span>SendNewVatSubmittedStoreOwnerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendNewVatSubmittedStoreOwnerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>vatName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>vatAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a "new VAT submitted" notification to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">customer</td><td>Customer</td></tr>
    <tr><td class="paramname">vatName</td><td>Received VAT name</td></tr>
    <tr><td class="paramname">vatAddress</td><td>Received VAT address</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ad159f9b578eba1409f96d1715628a748">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;        {</div>
<div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160; </div>
<div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160; </div>
<div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#af3c2a3dfba150ec205c76edafdcbb3d9">NewVatSubmittedStoreOwnerNotification</a>, store.Id);</div>
<div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160; </div>
<div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;            commonTokens.Add(<span class="keyword">new</span> Token(<span class="stringliteral">&quot;VatValidatio.Name&quot;</span>, vatName));</div>
<div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;            commonTokens.Add(<span class="keyword">new</span> Token(<span class="stringliteral">&quot;VatValidatio.Address&quot;</span>, vatAddress));</div>
<div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160; </div>
<div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;            {</div>
<div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160; </div>
<div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160; </div>
<div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160; </div>
<div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160; </div>
<div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_af3c2a3dfba150ec205c76edafdcbb3d9"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#af3c2a3dfba150ec205c76edafdcbb3d9">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewVatSubmittedStoreOwnerNotification</a></div><div class="ttdeci">const string NewVatSubmittedStoreOwnerNotification</div><div class="ttdoc">Represents system name of notification store owner about submitting new VAT</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:237</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#af3c2a3dfba150ec205c76edafdcbb3d9">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewVatSubmittedStoreOwnerNotification</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="afc53b1a99346833452dba9fd2c517dee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc53b1a99346833452dba9fd2c517dee">&#9670;&nbsp;</a></span>SendNewVendorAccountApplyStoreOwnerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendNewVendorAccountApplyStoreOwnerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html">Vendor</a>&#160;</td>
          <td class="paramname"><em>vendor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends 'New vendor account submitted' message to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">customer</td><td>Customer</td></tr>
    <tr><td class="paramname">vendor</td><td>Vendor</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ac7ad95c14521bb912ae42597cb89f7d2">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;        {</div>
<div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160; </div>
<div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;            <span class="keywordflow">if</span> (vendor == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(vendor));</div>
<div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160; </div>
<div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160; </div>
<div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a8e16e741d9329260a6a6b4874da43cba">NewVendorAccountApplyStoreOwnerNotification</a>, store.Id);</div>
<div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160; </div>
<div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a3ac6c7896d2883815888b22c43bd27ce">AddVendorTokensAsync</a>(commonTokens, vendor);</div>
<div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160; </div>
<div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;            {</div>
<div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160; </div>
<div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160; </div>
<div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160; </div>
<div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160; </div>
<div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a8e16e741d9329260a6a6b4874da43cba"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a8e16e741d9329260a6a6b4874da43cba">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewVendorAccountApplyStoreOwnerNotification</a></div><div class="ttdeci">const string NewVendorAccountApplyStoreOwnerNotification</div><div class="ttdoc">Represents system name of notification store owner about applying new vendor account</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:202</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a3ac6c7896d2883815888b22c43bd27ce"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a3ac6c7896d2883815888b22c43bd27ce">Nop.Services.Messages.IMessageTokenProvider.AddVendorTokensAsync</a></div><div class="ttdeci">Task AddVendorTokensAsync(IList&lt; Token &gt; tokens, Vendor vendor)</div><div class="ttdoc">Add vendor tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a3ac6c7896d2883815888b22c43bd27ce">Nop.Services.Messages.IMessageTokenProvider.AddVendorTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a8e16e741d9329260a6a6b4874da43cba">Nop.Core.Domain.Messages.MessageTemplateSystemNames.NewVendorAccountApplyStoreOwnerNotification</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a1fb21eadda33ec74eb783fbb7f28e889"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fb21eadda33ec74eb783fbb7f28e889">&#9670;&nbsp;</a></span>SendNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;int&gt; Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html">MessageTemplate</a>&#160;</td>
          <td class="paramname"><em>messageTemplate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html">EmailAccount</a>&#160;</td>
          <td class="paramname"><em>emailAccount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IList&lt; <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_token.html">Token</a> &gt;&#160;</td>
          <td class="paramname"><em>tokens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>toEmailAddress</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>toName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>attachmentFilePath</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>attachmentFileName</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>replyToEmailAddress</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>replyToName</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>fromEmail</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>fromName</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>subject</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send notification </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">messageTemplate</td><td>Message template</td></tr>
    <tr><td class="paramname">emailAccount</td><td>Email account</td></tr>
    <tr><td class="paramname">languageId</td><td>Language identifier</td></tr>
    <tr><td class="paramname">tokens</td><td>Tokens</td></tr>
    <tr><td class="paramname">toEmailAddress</td><td>Recipient email address</td></tr>
    <tr><td class="paramname">toName</td><td>Recipient name</td></tr>
    <tr><td class="paramname">attachmentFilePath</td><td>Attachment file path</td></tr>
    <tr><td class="paramname">attachmentFileName</td><td>Attachment file name</td></tr>
    <tr><td class="paramname">replyToEmailAddress</td><td>"Reply to" email</td></tr>
    <tr><td class="paramname">replyToName</td><td>"Reply to" name</td></tr>
    <tr><td class="paramname">fromEmail</td><td>Sender email. If specified, then it overrides passed "emailAccount" details</td></tr>
    <tr><td class="paramname">fromName</td><td>Sender name. If specified, then it overrides passed "emailAccount" details</td></tr>
    <tr><td class="paramname">subject</td><td>Subject. If specified, then it overrides subject of a message template</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a9ebf76fb71269a452fc4ddad9883cfee">Nop.Services.Messages.IWorkflowMessageService</a>.</p>

<p>Reimplementado em <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_message_service.html#acc07e310eb17169986c55fbbd1e42b0c">Nop.Plugin.Misc.Sendinblue.Services.SendinblueMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;        {</div>
<div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;            <span class="keywordflow">if</span> (messageTemplate == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(messageTemplate));</div>
<div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160; </div>
<div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;            <span class="keywordflow">if</span> (emailAccount == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(emailAccount));</div>
<div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160; </div>
<div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;            <span class="comment">//retrieve localized message template data</span></div>
<div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;            var bcc = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a685301cd44bf5377e019d1a5d00c24d6">_localizationService</a>.GetLocalizedAsync(messageTemplate, mt =&gt; mt.BccEmailAddresses, languageId);</div>
<div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(subject))</div>
<div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;                subject = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a685301cd44bf5377e019d1a5d00c24d6">_localizationService</a>.GetLocalizedAsync(messageTemplate, mt =&gt; mt.Subject, languageId);</div>
<div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;            var body = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a685301cd44bf5377e019d1a5d00c24d6">_localizationService</a>.GetLocalizedAsync(messageTemplate, mt =&gt; mt.Body, languageId);</div>
<div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160; </div>
<div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;            <span class="comment">//Replace subject and body tokens </span></div>
<div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;            var subjectReplaced = <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8c58747ccbdf01ca7cf418e74238dc0d">_tokenizer</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_tokenizer.html#aa8f7f32d8f5bf006305e1b6c7a0856d7">Replace</a>(subject, tokens, <span class="keyword">false</span>);</div>
<div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;            var bodyReplaced = <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8c58747ccbdf01ca7cf418e74238dc0d">_tokenizer</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_tokenizer.html#aa8f7f32d8f5bf006305e1b6c7a0856d7">Replace</a>(body, tokens, <span class="keyword">true</span>);</div>
<div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160; </div>
<div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;            <span class="comment">//limit name length</span></div>
<div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;            toName = <a class="code" href="class_nop_1_1_core_1_1_common_helper.html">CommonHelper</a>.<a class="code" href="class_nop_1_1_core_1_1_common_helper.html#a7e1b63566b29d344beaacd65866a74c2">EnsureMaximumLength</a>(toName, 300);</div>
<div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160; </div>
<div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;            var email = <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_queued_email.html">QueuedEmail</a></div>
<div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;            {</div>
<div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;                Priority = <a class="code" href="namespace_nop_1_1_core_1_1_domain_1_1_messages.html#ac089b75c94540a924a8e0399a9ff6fa5">QueuedEmailPriority</a>.High,</div>
<div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a0cb1ca5bcfdafdbce15c05462d36d378">From</a> = !<span class="keywordtype">string</span>.IsNullOrEmpty(fromEmail) ? fromEmail : emailAccount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html#a1801b43e5ed2d46f7366d10a3ea0ba01">Email</a>,</div>
<div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a5cc3118b8d27063fadf6d37d9e88cae8">FromName</a> = !<span class="keywordtype">string</span>.IsNullOrEmpty(fromName) ? fromName : emailAccount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html#aa33ced4900cbea20da583a2aef27f8c2">DisplayName</a>,</div>
<div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#ab52eae767b011b7f3dae30660e8fb498">To</a> = toEmailAddress,</div>
<div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#affca0f4b0188ee3a8fb1b5c9d497fd86">ToName</a> = toName,</div>
<div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a5f5433ef321612e470632945d12c75dc">ReplyTo</a> = replyToEmailAddress,</div>
<div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a6ec1b8ea355d7f4d6e26d330fa5b7846">ReplyToName</a> = replyToName,</div>
<div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#aa397d9fd596370c8318d5161fc7b4e7b">CC</a> = <span class="keywordtype">string</span>.Empty,</div>
<div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a569a0e986e21b75bf35dd3c88770c918">Bcc</a> = bcc,</div>
<div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#abb0de155db90b85fcfc3ce9780fd1a23">Subject</a> = subjectReplaced,</div>
<div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a95a29491d41a68791e631eac874adbdd">Body</a> = bodyReplaced,</div>
<div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#afa3620e4afedfbfadb67602ac8f9f282">AttachmentFilePath</a> = attachmentFilePath,</div>
<div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;                AttachmentFileName = attachmentFileName,</div>
<div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#aa526abdf5b14d4998b78f5cbfd06fa8b">AttachedDownloadId</a> = messageTemplate.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a2f4f7713217f13ffecbd05b982d97462">AttachedDownloadId</a>,</div>
<div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;                CreatedOnUtc = DateTime.UtcNow,</div>
<div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;                <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a419ee5ba3b0a1f1ed5f8229459d882d5">EmailAccountId</a> = emailAccount.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a>,</div>
<div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;                DontSendBeforeDateUtc = !messageTemplate.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#af5bd8e5d81a936e32346eeff4e94b3b9">DelayBeforeSend</a>.HasValue ? null</div>
<div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;                    : (DateTime?)(DateTime.UtcNow + TimeSpan.FromHours(messageTemplate.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a5b0c850e602cafd57795f32ac1e419b3">DelayPeriod</a>.ToHours(messageTemplate.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#af5bd8e5d81a936e32346eeff4e94b3b9">DelayBeforeSend</a>.Value)))</div>
<div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;            };</div>
<div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160; </div>
<div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6fb2131780dc25b002bf2e9d56a3bca6">_queuedEmailService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_queued_email_service.html#a25bb4a9c8c8da4ea4fae05519a4394b9">InsertQueuedEmailAsync</a>(email);</div>
<div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;            <span class="keywordflow">return</span> email.Id;</div>
<div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_common_helper_html_a7e1b63566b29d344beaacd65866a74c2"><div class="ttname"><a href="class_nop_1_1_core_1_1_common_helper.html#a7e1b63566b29d344beaacd65866a74c2">Nop.Core.CommonHelper.EnsureMaximumLength</a></div><div class="ttdeci">static string EnsureMaximumLength(string str, int maxLength, string postfix=null)</div><div class="ttdoc">Ensure that a string doesn't exceed maximum allowed length</div><div class="ttdef"><b>Definition:</b> CommonHelper.cs:115</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_html_a1801b43e5ed2d46f7366d10a3ea0ba01"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html#a1801b43e5ed2d46f7366d10a3ea0ba01">Nop.Core.Domain.Messages.EmailAccount.Email</a></div><div class="ttdeci">string Email</div><div class="ttdoc">Gets or sets an email address</div><div class="ttdef"><b>Definition:</b> EmailAccount.cs:11</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_html_aa33ced4900cbea20da583a2aef27f8c2"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html#aa33ced4900cbea20da583a2aef27f8c2">Nop.Core.Domain.Messages.EmailAccount.DisplayName</a></div><div class="ttdeci">string DisplayName</div><div class="ttdoc">Gets or sets an email display name</div><div class="ttdef"><b>Definition:</b> EmailAccount.cs:16</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_html_a2f4f7713217f13ffecbd05b982d97462"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a2f4f7713217f13ffecbd05b982d97462">Nop.Core.Domain.Messages.MessageTemplate.AttachedDownloadId</a></div><div class="ttdeci">int AttachedDownloadId</div><div class="ttdoc">Gets or sets the download identifier of attached file</div><div class="ttdef"><b>Definition:</b> MessageTemplate.cs:49</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_html_a5b0c850e602cafd57795f32ac1e419b3"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a5b0c850e602cafd57795f32ac1e419b3">Nop.Core.Domain.Messages.MessageTemplate.DelayPeriod</a></div><div class="ttdeci">MessageDelayPeriod DelayPeriod</div><div class="ttdoc">Gets or sets the period of message delay</div><div class="ttdef"><b>Definition:</b> MessageTemplate.cs:65</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_html_af5bd8e5d81a936e32346eeff4e94b3b9"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#af5bd8e5d81a936e32346eeff4e94b3b9">Nop.Core.Domain.Messages.MessageTemplate.DelayBeforeSend</a></div><div class="ttdeci">int? DelayBeforeSend</div><div class="ttdoc">Gets or sets the delay before sending message</div><div class="ttdef"><b>Definition:</b> MessageTemplate.cs:39</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_queued_email_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_queued_email.html">Nop.Core.Domain.Messages.QueuedEmail</a></div><div class="ttdoc">Represents an email item</div><div class="ttdef"><b>Definition:</b> QueuedEmail.cs:9</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_queued_email_service_html_a25bb4a9c8c8da4ea4fae05519a4394b9"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_queued_email_service.html#a25bb4a9c8c8da4ea4fae05519a4394b9">Nop.Services.Messages.IQueuedEmailService.InsertQueuedEmailAsync</a></div><div class="ttdeci">Task InsertQueuedEmailAsync(QueuedEmail queuedEmail)</div><div class="ttdoc">Inserts a queued email</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_tokenizer_html_aa8f7f32d8f5bf006305e1b6c7a0856d7"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_tokenizer.html#aa8f7f32d8f5bf006305e1b6c7a0856d7">Nop.Services.Messages.ITokenizer.Replace</a></div><div class="ttdeci">string Replace(string template, IEnumerable&lt; Token &gt; tokens, bool htmlEncode)</div><div class="ttdoc">Replace all of the token key occurrences inside the specified template text with corresponded token v...</div></div>
<div class="ttc" id="anamespace_nop_1_1_core_1_1_domain_1_1_messages_html_ac089b75c94540a924a8e0399a9ff6fa5"><div class="ttname"><a href="namespace_nop_1_1_core_1_1_domain_1_1_messages.html#ac089b75c94540a924a8e0399a9ff6fa5">Nop.Core.Domain.Messages.QueuedEmailPriority</a></div><div class="ttdeci">QueuedEmailPriority</div><div class="ttdoc">Represents priority of queued email</div><div class="ttdef"><b>Definition:</b> QueuedEmailPriority.cs:7</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a0cb1ca5bcfdafdbce15c05462d36d378"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a0cb1ca5bcfdafdbce15c05462d36d378">Nop.Web.Areas.Admin.Models.Messages.From</a></div><div class="ttdeci">string From</div><div class="ttdef"><b>Definition:</b> QueuedEmailModel.cs:22</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a419ee5ba3b0a1f1ed5f8229459d882d5"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a419ee5ba3b0a1f1ed5f8229459d882d5">Nop.Web.Areas.Admin.Models.Messages.EmailAccountId</a></div><div class="ttdeci">int EmailAccountId</div><div class="ttdef"><b>Definition:</b> CampaignModel.cs:56</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a569a0e986e21b75bf35dd3c88770c918"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a569a0e986e21b75bf35dd3c88770c918">Nop.Web.Areas.Admin.Models.Messages.Bcc</a></div><div class="ttdeci">string Bcc</div><div class="ttdef"><b>Definition:</b> QueuedEmailModel.cs:43</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a5cc3118b8d27063fadf6d37d9e88cae8"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a5cc3118b8d27063fadf6d37d9e88cae8">Nop.Web.Areas.Admin.Models.Messages.FromName</a></div><div class="ttdeci">string FromName</div><div class="ttdef"><b>Definition:</b> QueuedEmailModel.cs:25</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a5f5433ef321612e470632945d12c75dc"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a5f5433ef321612e470632945d12c75dc">Nop.Web.Areas.Admin.Models.Messages.ReplyTo</a></div><div class="ttdeci">string ReplyTo</div><div class="ttdef"><b>Definition:</b> QueuedEmailModel.cs:34</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a6ec1b8ea355d7f4d6e26d330fa5b7846"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a6ec1b8ea355d7f4d6e26d330fa5b7846">Nop.Web.Areas.Admin.Models.Messages.ReplyToName</a></div><div class="ttdeci">string ReplyToName</div><div class="ttdef"><b>Definition:</b> QueuedEmailModel.cs:37</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a95a29491d41a68791e631eac874adbdd"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a95a29491d41a68791e631eac874adbdd">Nop.Web.Areas.Admin.Models.Messages.Body</a></div><div class="ttdeci">string Body</div><div class="ttdef"><b>Definition:</b> CampaignModel.cs:35</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_aa397d9fd596370c8318d5161fc7b4e7b"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#aa397d9fd596370c8318d5161fc7b4e7b">Nop.Web.Areas.Admin.Models.Messages.CC</a></div><div class="ttdeci">string CC</div><div class="ttdef"><b>Definition:</b> QueuedEmailModel.cs:40</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_aa526abdf5b14d4998b78f5cbfd06fa8b"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#aa526abdf5b14d4998b78f5cbfd06fa8b">Nop.Web.Areas.Admin.Models.Messages.AttachedDownloadId</a></div><div class="ttdeci">int AttachedDownloadId</div><div class="ttdef"><b>Definition:</b> QueuedEmailModel.cs:56</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_ab52eae767b011b7f3dae30660e8fb498"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#ab52eae767b011b7f3dae30660e8fb498">Nop.Web.Areas.Admin.Models.Messages.To</a></div><div class="ttdeci">string To</div><div class="ttdef"><b>Definition:</b> QueuedEmailModel.cs:28</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_abb0de155db90b85fcfc3ce9780fd1a23"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#abb0de155db90b85fcfc3ce9780fd1a23">Nop.Web.Areas.Admin.Models.Messages.Subject</a></div><div class="ttdeci">string Subject</div><div class="ttdef"><b>Definition:</b> CampaignModel.cs:32</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_afa3620e4afedfbfadb67602ac8f9f282"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#afa3620e4afedfbfadb67602ac8f9f282">Nop.Web.Areas.Admin.Models.Messages.AttachmentFilePath</a></div><div class="ttdeci">string AttachmentFilePath</div><div class="ttdef"><b>Definition:</b> QueuedEmailModel.cs:52</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_affca0f4b0188ee3a8fb1b5c9d497fd86"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#affca0f4b0188ee3a8fb1b5c9d497fd86">Nop.Web.Areas.Admin.Models.Messages.ToName</a></div><div class="ttdeci">string ToName</div><div class="ttdef"><b>Definition:</b> QueuedEmailModel.cs:31</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a685301cd44bf5377e019d1a5d00c24d6">Nop.Services.Messages.WorkflowMessageService._localizationService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6fb2131780dc25b002bf2e9d56a3bca6">Nop.Services.Messages.WorkflowMessageService._queuedEmailService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8c58747ccbdf01ca7cf418e74238dc0d">Nop.Services.Messages.WorkflowMessageService._tokenizer</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a2f4f7713217f13ffecbd05b982d97462">Nop.Core.Domain.Messages.MessageTemplate.AttachedDownloadId</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#aa526abdf5b14d4998b78f5cbfd06fa8b">Nop.Web.Areas.Admin.Models.Messages.AttachedDownloadId</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#afa3620e4afedfbfadb67602ac8f9f282">Nop.Web.Areas.Admin.Models.Messages.AttachmentFilePath</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a569a0e986e21b75bf35dd3c88770c918">Nop.Web.Areas.Admin.Models.Messages.Bcc</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a27dcf7355f3e986fb3243a6cdbb92579">Nop.Core.Domain.Messages.MessageTemplate.BccEmailAddresses</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#ab3af24a7aa836ac70141711130093af6">Nop.Core.Domain.Messages.MessageTemplate.Body</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a95a29491d41a68791e631eac874adbdd">Nop.Web.Areas.Admin.Models.Messages.Body</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#aa397d9fd596370c8318d5161fc7b4e7b">Nop.Web.Areas.Admin.Models.Messages.CC</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#af5bd8e5d81a936e32346eeff4e94b3b9">Nop.Core.Domain.Messages.MessageTemplate.DelayBeforeSend</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a5b0c850e602cafd57795f32ac1e419b3">Nop.Core.Domain.Messages.MessageTemplate.DelayPeriod</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html#aa33ced4900cbea20da583a2aef27f8c2">Nop.Core.Domain.Messages.EmailAccount.DisplayName</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html#a1801b43e5ed2d46f7366d10a3ea0ba01">Nop.Core.Domain.Messages.EmailAccount.Email</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a419ee5ba3b0a1f1ed5f8229459d882d5">Nop.Web.Areas.Admin.Models.Messages.EmailAccountId</a>, <a class="el" href="class_nop_1_1_core_1_1_common_helper.html#a7e1b63566b29d344beaacd65866a74c2">Nop.Core.CommonHelper.EnsureMaximumLength()</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a0cb1ca5bcfdafdbce15c05462d36d378">Nop.Web.Areas.Admin.Models.Messages.From</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a5cc3118b8d27063fadf6d37d9e88cae8">Nop.Web.Areas.Admin.Models.Messages.FromName</a>, <a class="el" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Nop.Core.BaseEntity.Id</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_queued_email_service.html#a25bb4a9c8c8da4ea4fae05519a4394b9">Nop.Services.Messages.IQueuedEmailService.InsertQueuedEmailAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_tokenizer.html#aa8f7f32d8f5bf006305e1b6c7a0856d7">Nop.Services.Messages.ITokenizer.Replace()</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a5f5433ef321612e470632945d12c75dc">Nop.Web.Areas.Admin.Models.Messages.ReplyTo</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a6ec1b8ea355d7f4d6e26d330fa5b7846">Nop.Web.Areas.Admin.Models.Messages.ReplyToName</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a278d159c83f71f5e6f329ef9f2a671f9">Nop.Core.Domain.Messages.MessageTemplate.Subject</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#abb0de155db90b85fcfc3ce9780fd1a23">Nop.Web.Areas.Admin.Models.Messages.Subject</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#ab52eae767b011b7f3dae30660e8fb498">Nop.Web.Areas.Admin.Models.Messages.To</a> e <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#affca0f4b0188ee3a8fb1b5c9d497fd86">Nop.Web.Areas.Admin.Models.Messages.ToName</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a486229c3f299058bc1e4a3dedbf27f0e">Nop.Services.Messages.WorkflowMessageService.SendBackInStockNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0c7596b46f178d67d39318dfedd98c5a">Nop.Services.Messages.WorkflowMessageService.SendBlogCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a295d81ea7710c2d52fc1ed9a33adeece">Nop.Services.Messages.WorkflowMessageService.SendContactUsMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6b3d96284239acf27ddb86a3ab58d186">Nop.Services.Messages.WorkflowMessageService.SendContactVendorMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a5c40bd2b8e4c9e4e25f44964811ed82c">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailRevalidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afadea9d04dc47805c432d3941ecea017">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailValidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7e4f7bc55fa2909c186a453d6ef976cf">Nop.Services.Messages.WorkflowMessageService.SendCustomerPasswordRecoveryMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae6a1fcd56a03e8cf34174d6e10e57aeb">Nop.Services.Messages.WorkflowMessageService.SendCustomerRegisteredNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac4c2428c56201bb4783bc40c2d00eed7">Nop.Services.Messages.WorkflowMessageService.SendCustomerWelcomeMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89e349660d03614413a340539d9f9c33">Nop.Services.Messages.WorkflowMessageService.SendGiftCardNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a374616ddbe97dc0722857e05f6ecec70">Nop.Services.Messages.WorkflowMessageService.SendNewForumPostMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4c859d8347db968c7762869b4a70ee2e">Nop.Services.Messages.WorkflowMessageService.SendNewForumTopicMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3f848aa49ef68919b1a43236a55c957d">Nop.Services.Messages.WorkflowMessageService.SendNewOrderNoteAddedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3cf231a1ec189b0e854eb328e51c34db">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8833fe15d53e8aece5a05bc87d50e176">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aea5d06fb9d1a1529e43a5eb511f0c048">Nop.Services.Messages.WorkflowMessageService.SendNewsCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a73e1a0e8826575c240b4ba33cc3ea970">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionActivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a874c291702763976f208b0ffaff9f82f">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionDeactivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae11a46de3c9c71987d976e8eb29b799f">Nop.Services.Messages.WorkflowMessageService.SendNewVatSubmittedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afc53b1a99346833452dba9fd2c517dee">Nop.Services.Messages.WorkflowMessageService.SendNewVendorAccountApplyStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac380eed2bd7ded145d75934682d1d78a">Nop.Services.Messages.WorkflowMessageService.SendOrderCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a58be329b8abdcda60a55cc7d6b509ddb">Nop.Services.Messages.WorkflowMessageService.SendOrderCompletedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6241f3710c7ebdc4fb1ed256e21791b2">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab85376f003d16992668c0b6e5edcb2df">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aacd586e8e65d943fa1967be229e3783f">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aa7f7a29b84c8bec0a4f994aef2a66eda">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afb3c9a5018840890668b5e107b02a8dd">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aabffa6f767a1bf3ad311a318d5ead172">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af3675ecbe0a19839afe9986f5fa0905d">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a459036496bf159c6cbd9faa1476a9153">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afcac694205086ab927ae965ba52c99bd">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac853448f0f3b977d2ccf8102baaa5d75">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a47207f3e9f1d7a813b5211c81e06a832">Nop.Services.Messages.WorkflowMessageService.SendPrivateMessageNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#adf690c4aeefdef0a88d873965b42caf5">Nop.Services.Messages.WorkflowMessageService.SendProductEmailAFriendMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89420429ebd87666a8f4e4e35ebbf18c">Nop.Services.Messages.WorkflowMessageService.SendProductReviewNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aec8f5dc342bb89b28e7d8cb0c2cdd3d9">Nop.Services.Messages.WorkflowMessageService.SendProductReviewReplyCustomerNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af2f3025becf2874631ee3e6bf112a3dd">Nop.Services.Messages.WorkflowMessageService.SendQuantityBelowStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af7bfaf213a917be96f201757329d472d">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2ea003968f3c6230ec777c02d9361273">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0a66a2a7ce5ddd112a6a7028713cc54b">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentFailedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a79185a8309df5962e42dec81c576e70b">Nop.Services.Messages.WorkflowMessageService.SendReturnRequestStatusChangedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3d80736e1501ec4de2d29030eec5d5e6">Nop.Services.Messages.WorkflowMessageService.SendShipmentDeliveredCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab5c4a2bc5412f704df18c1c0fb2a0c40">Nop.Services.Messages.WorkflowMessageService.SendShipmentSentCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2a9e0a8481b7b01826247f88b6ae8838">Nop.Services.Messages.WorkflowMessageService.SendTestEmailAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac0d7b11e96c4cc9e56dd39fa1aed54e4">Nop.Services.Messages.WorkflowMessageService.SendVendorInformationChangeNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a83c4e2553fcce9bad4a4266dd45ac6c0">Nop.Services.Messages.WorkflowMessageService.SendWishlistEmailAFriendMessageAsync()</a>.</p>

</div>
</div>
<a id="ac380eed2bd7ded145d75934682d1d78a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac380eed2bd7ded145d75934682d1d78a">&#9670;&nbsp;</a></span>SendOrderCancelledCustomerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendOrderCancelledCustomerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an order cancelled notification to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ab5dbf93ecfb78522fc0ae46084adf56c">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160; </div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160; </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a1b83530b71f14994fb5c0196757582a8">OrderCancelledCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160; </div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160; </div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;            {</div>
<div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160; </div>
<div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160; </div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160; </div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;                var billingAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">BillingAddressId</a>);</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160; </div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                var toEmail = billingAddress.Email;</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;                var toName = $<span class="stringliteral">&quot;{billingAddress.FirstName} {billingAddress.LastName}&quot;</span>;</div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160; </div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a1b83530b71f14994fb5c0196757582a8"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a1b83530b71f14994fb5c0196757582a8">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderCancelledCustomerNotification</a></div><div class="ttdeci">const string OrderCancelledCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about cancelled order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:97</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_afc851a198d160f4084e1398b3b4892c3"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a></div><div class="ttdeci">int CustomerId</div><div class="ttdoc">Gets or sets the customer identifier</div><div class="ttdef"><b>Definition:</b> Order.cs:29</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">Nop.Core.Domain.Orders.Order.BillingAddressId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a1b83530b71f14994fb5c0196757582a8">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderCancelledCustomerNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="a58be329b8abdcda60a55cc7d6b509ddb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a58be329b8abdcda60a55cc7d6b509ddb">&#9670;&nbsp;</a></span>SendOrderCompletedCustomerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendOrderCompletedCustomerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>attachmentFilePath</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>attachmentFileName</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an order completed notification to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
    <tr><td class="paramname">attachmentFilePath</td><td>Attachment file path</td></tr>
    <tr><td class="paramname">attachmentFileName</td><td>Attachment file name. If specified, then this file name will be sent to a recipient. Otherwise, "AttachmentFilePath" name will be used.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a567937a83fd27864a0fd424023977228">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;        {</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160; </div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160; </div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a7d781d10ac04f0ca61fcfa33f2a844d4">OrderCompletedCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160; </div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160; </div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;            {</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160; </div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160; </div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160; </div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                var billingAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">BillingAddressId</a>);</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160; </div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;                var toEmail = billingAddress.Email;</div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                var toName = $<span class="stringliteral">&quot;{billingAddress.FirstName} {billingAddress.LastName}&quot;</span>;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160; </div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName,</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                    attachmentFilePath, attachmentFileName);</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a7d781d10ac04f0ca61fcfa33f2a844d4"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a7d781d10ac04f0ca61fcfa33f2a844d4">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderCompletedCustomerNotification</a></div><div class="ttdeci">const string OrderCompletedCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about completed order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:92</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">Nop.Core.Domain.Orders.Order.BillingAddressId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a7d781d10ac04f0ca61fcfa33f2a844d4">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderCompletedCustomerNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="a6241f3710c7ebdc4fb1ed256e21791b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6241f3710c7ebdc4fb1ed256e21791b2">&#9670;&nbsp;</a></span>SendOrderPaidAffiliateNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendOrderPaidAffiliateNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an order paid notification to an affiliate </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a408679d138aa5fedb967f766ea45aef1">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;        {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160; </div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            var affiliate = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a699b4395fec9a7df6d2949a8e100af41">_affiliateService</a>.<a class="code" href="interface_nop_1_1_services_1_1_affiliates_1_1_i_affiliate_service.html#ab888b7c22d44ae6f781bfc0611855315">GetAffiliateByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#ae01165473b03ae2c517710de69734ba1">AffiliateId</a>);</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160; </div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;            <span class="keywordflow">if</span> (affiliate == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(affiliate));</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160; </div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160; </div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a5909a0791e5b521a90758754f4563e9b">OrderPaidAffiliateNotification</a>, store.Id);</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160; </div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160; </div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            {</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160; </div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160; </div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                var affiliateAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(affiliate.AddressId);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                var toEmail = affiliateAddress.Email;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                var toName = $<span class="stringliteral">&quot;{affiliateAddress.FirstName} {affiliateAddress.LastName}&quot;</span>;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160; </div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a5909a0791e5b521a90758754f4563e9b"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a5909a0791e5b521a90758754f4563e9b">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPaidAffiliateNotification</a></div><div class="ttdeci">const string OrderPaidAffiliateNotification</div><div class="ttdoc">Represents system name of notification affiliate about paid order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:72</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_ae01165473b03ae2c517710de69734ba1"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#ae01165473b03ae2c517710de69734ba1">Nop.Core.Domain.Orders.Order.AffiliateId</a></div><div class="ttdeci">int AffiliateId</div><div class="ttdoc">Gets or sets the affiliate identifier</div><div class="ttdef"><b>Definition:</b> Order.cs:179</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_affiliates_1_1_i_affiliate_service_html_ab888b7c22d44ae6f781bfc0611855315"><div class="ttname"><a href="interface_nop_1_1_services_1_1_affiliates_1_1_i_affiliate_service.html#ab888b7c22d44ae6f781bfc0611855315">Nop.Services.Affiliates.IAffiliateService.GetAffiliateByIdAsync</a></div><div class="ttdeci">Task&lt; Affiliate &gt; GetAffiliateByIdAsync(int affiliateId)</div><div class="ttdoc">Gets an affiliate by affiliate identifier</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a699b4395fec9a7df6d2949a8e100af41">Nop.Services.Messages.WorkflowMessageService._affiliateService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#ae01165473b03ae2c517710de69734ba1">Nop.Core.Domain.Orders.Order.AffiliateId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_affiliates_1_1_i_affiliate_service.html#ab888b7c22d44ae6f781bfc0611855315">Nop.Services.Affiliates.IAffiliateService.GetAffiliateByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a5909a0791e5b521a90758754f4563e9b">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPaidAffiliateNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="ab85376f003d16992668c0b6e5edcb2df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab85376f003d16992668c0b6e5edcb2df">&#9670;&nbsp;</a></span>SendOrderPaidCustomerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendOrderPaidCustomerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>attachmentFilePath</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>attachmentFileName</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an order paid notification to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
    <tr><td class="paramname">attachmentFilePath</td><td>Attachment file path</td></tr>
    <tr><td class="paramname">attachmentFileName</td><td>Attachment file name. If specified, then this file name will be sent to a recipient. Otherwise, "AttachmentFilePath" name will be used.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ae59f9e8d824e40e97d6f5413ae80edcf">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;        {</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160; </div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#af97e6583054639f14adada2fa2d5b641">OrderPaidCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160; </div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160; </div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;            {</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160; </div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160; </div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                var billingAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">BillingAddressId</a>);</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160; </div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;                var toEmail = billingAddress.Email;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;                var toName = $<span class="stringliteral">&quot;{billingAddress.FirstName} {billingAddress.LastName}&quot;</span>;</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName,</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;                    attachmentFilePath, attachmentFileName);</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_af97e6583054639f14adada2fa2d5b641"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#af97e6583054639f14adada2fa2d5b641">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPaidCustomerNotification</a></div><div class="ttdeci">const string OrderPaidCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about paid order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:62</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">Nop.Core.Domain.Orders.Order.BillingAddressId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#af97e6583054639f14adada2fa2d5b641">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPaidCustomerNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="aacd586e8e65d943fa1967be229e3783f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacd586e8e65d943fa1967be229e3783f">&#9670;&nbsp;</a></span>SendOrderPaidStoreOwnerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendOrderPaidStoreOwnerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an order paid notification to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a8ce7977f19b698112ce26cab1fb919ee">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;        {</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160; </div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160; </div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a1ac7c4ce3bb1ba13008b3480979abcba">OrderPaidStoreOwnerNotification</a>, store.Id);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160; </div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160; </div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            {</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160; </div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160; </div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160; </div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160; </div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a1ac7c4ce3bb1ba13008b3480979abcba"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a1ac7c4ce3bb1ba13008b3480979abcba">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPaidStoreOwnerNotification</a></div><div class="ttdeci">const string OrderPaidStoreOwnerNotification</div><div class="ttdoc">Represents system name of notification store owner about paid order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:57</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a1ac7c4ce3bb1ba13008b3480979abcba">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPaidStoreOwnerNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="aa7f7a29b84c8bec0a4f994aef2a66eda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa7f7a29b84c8bec0a4f994aef2a66eda">&#9670;&nbsp;</a></span>SendOrderPaidVendorNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendOrderPaidVendorNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html">Vendor</a>&#160;</td>
          <td class="paramname"><em>vendor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an order paid notification to a vendor </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order instance</td></tr>
    <tr><td class="paramname">vendor</td><td>Vendor instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a9dd7f64110e89c94913f28ced7498a44">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;        {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160; </div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;            <span class="keywordflow">if</span> (vendor == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(vendor));</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160; </div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160; </div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a91a779f09805445695901e217d7dd533">OrderPaidVendorNotification</a>, store.Id);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160; </div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId, vendor.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a>);</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160; </div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;            {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160; </div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160; </div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;                var toEmail = vendor.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#a02c8408f7bdeb37f5bb6b035d2defffc">Email</a>;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                var toName = vendor.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#aecedd42175ddf7056cb80b528314c6d5">Name</a>;</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160; </div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a91a779f09805445695901e217d7dd533"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a91a779f09805445695901e217d7dd533">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPaidVendorNotification</a></div><div class="ttdeci">const string OrderPaidVendorNotification</div><div class="ttdoc">Represents system name of notification vendor about paid order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:67</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#a02c8408f7bdeb37f5bb6b035d2defffc">Nop.Core.Domain.Vendors.Vendor.Email</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Nop.Core.BaseEntity.Id</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#aecedd42175ddf7056cb80b528314c6d5">Nop.Core.Domain.Vendors.Vendor.Name</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a91a779f09805445695901e217d7dd533">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPaidVendorNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="afb3c9a5018840890668b5e107b02a8dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb3c9a5018840890668b5e107b02a8dd">&#9670;&nbsp;</a></span>SendOrderPlacedAffiliateNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedAffiliateNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an order placed notification to an affiliate </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ae5d55663800ba1633223838d0e4010f4">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;        {</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160; </div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;            var affiliate = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a699b4395fec9a7df6d2949a8e100af41">_affiliateService</a>.<a class="code" href="interface_nop_1_1_services_1_1_affiliates_1_1_i_affiliate_service.html#ab888b7c22d44ae6f781bfc0611855315">GetAffiliateByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#ae01165473b03ae2c517710de69734ba1">AffiliateId</a>);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160; </div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;            <span class="keywordflow">if</span> (affiliate == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(affiliate));</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160; </div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160; </div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a266a23d7d7cca3351ec23c32d65a5d33">OrderPlacedAffiliateNotification</a>, store.Id);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160; </div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160; </div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;            {</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160; </div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160; </div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                var affiliateAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(affiliate.AddressId);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                var toEmail = affiliateAddress.Email;</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                var toName = $<span class="stringliteral">&quot;{affiliateAddress.FirstName} {affiliateAddress.LastName}&quot;</span>;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160; </div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a266a23d7d7cca3351ec23c32d65a5d33"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a266a23d7d7cca3351ec23c32d65a5d33">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPlacedAffiliateNotification</a></div><div class="ttdeci">const string OrderPlacedAffiliateNotification</div><div class="ttdoc">Represents system name of notification affiliate about placed order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:52</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a699b4395fec9a7df6d2949a8e100af41">Nop.Services.Messages.WorkflowMessageService._affiliateService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#ae01165473b03ae2c517710de69734ba1">Nop.Core.Domain.Orders.Order.AffiliateId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_affiliates_1_1_i_affiliate_service.html#ab888b7c22d44ae6f781bfc0611855315">Nop.Services.Affiliates.IAffiliateService.GetAffiliateByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a266a23d7d7cca3351ec23c32d65a5d33">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPlacedAffiliateNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="aabffa6f767a1bf3ad311a318d5ead172"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabffa6f767a1bf3ad311a318d5ead172">&#9670;&nbsp;</a></span>SendOrderPlacedCustomerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedCustomerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>attachmentFilePath</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>attachmentFileName</em> = <code>null</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an order placed notification to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
    <tr><td class="paramname">attachmentFilePath</td><td>Attachment file path</td></tr>
    <tr><td class="paramname">attachmentFileName</td><td>Attachment file name. If specified, then this file name will be sent to a recipient. Otherwise, "AttachmentFilePath" name will be used.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a4b3ea5193072e3b846068c67979d13e8">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        {</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160; </div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160; </div>
<div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aa278a78acee5e353e315f7735fb11b7e">OrderPlacedCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160; </div>
<div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160; </div>
<div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            {</div>
<div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160; </div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160; </div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160; </div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                var billingAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">BillingAddressId</a>);</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160; </div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                var toEmail = billingAddress.Email;</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                var toName = $<span class="stringliteral">&quot;{billingAddress.FirstName} {billingAddress.LastName}&quot;</span>;</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160; </div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName,</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                    attachmentFilePath, attachmentFileName);</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_aa278a78acee5e353e315f7735fb11b7e"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aa278a78acee5e353e315f7735fb11b7e">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPlacedCustomerNotification</a></div><div class="ttdeci">const string OrderPlacedCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about placed order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:77</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">Nop.Core.Domain.Orders.Order.BillingAddressId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aa278a78acee5e353e315f7735fb11b7e">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPlacedCustomerNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="af3675ecbe0a19839afe9986f5fa0905d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3675ecbe0a19839afe9986f5fa0905d">&#9670;&nbsp;</a></span>SendOrderPlacedStoreOwnerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedStoreOwnerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an order placed notification to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a2ccbd417258b0a212549c025a0aaf33d">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;        {</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160; </div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160; </div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a37480f87df7fd0c44ddc9b9c4eea4a82">OrderPlacedStoreOwnerNotification</a>, store.Id);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160; </div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160; </div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            {</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160; </div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160; </div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160; </div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160; </div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a37480f87df7fd0c44ddc9b9c4eea4a82"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a37480f87df7fd0c44ddc9b9c4eea4a82">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPlacedStoreOwnerNotification</a></div><div class="ttdeci">const string OrderPlacedStoreOwnerNotification</div><div class="ttdoc">Represents system name of notification store owner about placed order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:47</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a37480f87df7fd0c44ddc9b9c4eea4a82">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPlacedStoreOwnerNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="a459036496bf159c6cbd9faa1476a9153"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a459036496bf159c6cbd9faa1476a9153">&#9670;&nbsp;</a></span>SendOrderPlacedVendorNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedVendorNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html">Vendor</a>&#160;</td>
          <td class="paramname"><em>vendor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an order placed notification to a vendor </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order instance</td></tr>
    <tr><td class="paramname">vendor</td><td>Vendor instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ad2f775d10f2111477357c52be0c9e158">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;        {</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160; </div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;            <span class="keywordflow">if</span> (vendor == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(vendor));</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160; </div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aaf2f8b2748572971e7d8e3b63c07c5f1">OrderPlacedVendorNotification</a>, store.Id);</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160; </div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId, vendor.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a>);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160; </div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;            {</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160; </div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160; </div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                var toEmail = vendor.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#a02c8408f7bdeb37f5bb6b035d2defffc">Email</a>;</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                var toName = vendor.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#aecedd42175ddf7056cb80b528314c6d5">Name</a>;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160; </div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_aaf2f8b2748572971e7d8e3b63c07c5f1"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aaf2f8b2748572971e7d8e3b63c07c5f1">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPlacedVendorNotification</a></div><div class="ttdeci">const string OrderPlacedVendorNotification</div><div class="ttdoc">Represents system name of notification vendor about placed order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:42</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#a02c8408f7bdeb37f5bb6b035d2defffc">Nop.Core.Domain.Vendors.Vendor.Email</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Nop.Core.BaseEntity.Id</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html#aecedd42175ddf7056cb80b528314c6d5">Nop.Core.Domain.Vendors.Vendor.Name</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aaf2f8b2748572971e7d8e3b63c07c5f1">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderPlacedVendorNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="afcac694205086ab927ae965ba52c99bd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcac694205086ab927ae965ba52c99bd">&#9670;&nbsp;</a></span>SendOrderRefundedCustomerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedCustomerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">decimal&#160;</td>
          <td class="paramname"><em>refundedAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an order refunded notification to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order instance</td></tr>
    <tr><td class="paramname">refundedAmount</td><td>Amount refunded</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a024e725d06b93b18e5e5f8c46e0c1158">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;        {</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160; </div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a4206cdf8d94990a0d99be1c9cf0184a6">OrderRefundedCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160; </div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a4d13becae4067d8101da65dac913a388">AddOrderRefundedTokensAsync</a>(commonTokens, order, refundedAmount);</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160; </div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;            {</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160; </div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160; </div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                var billingAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">BillingAddressId</a>);</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160; </div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                var toEmail = billingAddress.Email;</div>
<div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                var toName = $<span class="stringliteral">&quot;{billingAddress.FirstName} {billingAddress.LastName}&quot;</span>;</div>
<div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160; </div>
<div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a4206cdf8d94990a0d99be1c9cf0184a6"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a4206cdf8d94990a0d99be1c9cf0184a6">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderRefundedCustomerNotification</a></div><div class="ttdeci">const string OrderRefundedCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about refunded order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:107</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a4d13becae4067d8101da65dac913a388"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a4d13becae4067d8101da65dac913a388">Nop.Services.Messages.IMessageTokenProvider.AddOrderRefundedTokensAsync</a></div><div class="ttdeci">Task AddOrderRefundedTokensAsync(IList&lt; Token &gt; tokens, Order order, decimal refundedAmount)</div><div class="ttdoc">Add refunded order tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a4d13becae4067d8101da65dac913a388">Nop.Services.Messages.IMessageTokenProvider.AddOrderRefundedTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">Nop.Core.Domain.Orders.Order.BillingAddressId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a4206cdf8d94990a0d99be1c9cf0184a6">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderRefundedCustomerNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="ac853448f0f3b977d2ccf8102baaa5d75"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac853448f0f3b977d2ccf8102baaa5d75">&#9670;&nbsp;</a></span>SendOrderRefundedStoreOwnerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedStoreOwnerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">decimal&#160;</td>
          <td class="paramname"><em>refundedAmount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends an order refunded notification to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order instance</td></tr>
    <tr><td class="paramname">refundedAmount</td><td>Amount refunded</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ab8088f4807759c499b93a6f4ad92f6d2">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        {</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160; </div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160; </div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ac7fbafa1d3289bcd3dd81817f558cd13">OrderRefundedStoreOwnerNotification</a>, store.Id);</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160; </div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a4d13becae4067d8101da65dac913a388">AddOrderRefundedTokensAsync</a>(commonTokens, order, refundedAmount);</div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160; </div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;            {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160; </div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160; </div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160; </div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160; </div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_ac7fbafa1d3289bcd3dd81817f558cd13"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ac7fbafa1d3289bcd3dd81817f558cd13">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderRefundedStoreOwnerNotification</a></div><div class="ttdeci">const string OrderRefundedStoreOwnerNotification</div><div class="ttdoc">Represents system name of notification store owner about refunded order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:102</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a4d13becae4067d8101da65dac913a388">Nop.Services.Messages.IMessageTokenProvider.AddOrderRefundedTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ac7fbafa1d3289bcd3dd81817f558cd13">Nop.Core.Domain.Messages.MessageTemplateSystemNames.OrderRefundedStoreOwnerNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="a47207f3e9f1d7a813b5211c81e06a832"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47207f3e9f1d7a813b5211c81e06a832">&#9670;&nbsp;</a></span>SendPrivateMessageNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendPrivateMessageNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_private_message.html">PrivateMessage</a>&#160;</td>
          <td class="paramname"><em>privateMessage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a private message notification </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">privateMessage</td><td>Private message</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#adad23cbf5949f1db7586a9332816c994">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;        {</div>
<div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;            <span class="keywordflow">if</span> (privateMessage == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(privateMessage));</div>
<div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160; </div>
<div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(privateMessage.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_private_message.html#ac24f1926f5f6d6f029a3551386721194">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160; </div>
<div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a7c11c2062306ad2745c66b0d7e58d5ad">PrivateMessageNotification</a>, store.Id);</div>
<div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160; </div>
<div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#ad8b0917fadafa5f70635a29de25fe85a">AddPrivateMessageTokensAsync</a>(commonTokens, privateMessage);</div>
<div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, privateMessage.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_private_message.html#a593d8f4f8ed32598e7e13779fe435e5b">ToCustomerId</a>);</div>
<div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160; </div>
<div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;            {</div>
<div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160; </div>
<div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160; </div>
<div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160; </div>
<div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;                var customer = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">GetCustomerByIdAsync</a>(privateMessage.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_private_message.html#a593d8f4f8ed32598e7e13779fe435e5b">ToCustomerId</a>);</div>
<div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;                var toEmail = customer.Email;</div>
<div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                var toName = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">GetCustomerFullNameAsync</a>(customer);</div>
<div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160; </div>
<div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_forums_1_1_private_message_html_a593d8f4f8ed32598e7e13779fe435e5b"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_private_message.html#a593d8f4f8ed32598e7e13779fe435e5b">Nop.Core.Domain.Forums.PrivateMessage.ToCustomerId</a></div><div class="ttdeci">int ToCustomerId</div><div class="ttdoc">Gets or sets the customer identifier who should receive the message</div><div class="ttdef"><b>Definition:</b> PrivateMessage.cs:23</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_forums_1_1_private_message_html_ac24f1926f5f6d6f029a3551386721194"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_private_message.html#ac24f1926f5f6d6f029a3551386721194">Nop.Core.Domain.Forums.PrivateMessage.StoreId</a></div><div class="ttdeci">int StoreId</div><div class="ttdoc">Gets or sets the store identifier</div><div class="ttdef"><b>Definition:</b> PrivateMessage.cs:13</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a7c11c2062306ad2745c66b0d7e58d5ad"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a7c11c2062306ad2745c66b0d7e58d5ad">Nop.Core.Domain.Messages.MessageTemplateSystemNames.PrivateMessageNotification</a></div><div class="ttdeci">const string PrivateMessageNotification</div><div class="ttdoc">Represents system name of notification about new private message</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:193</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_ad8b0917fadafa5f70635a29de25fe85a"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#ad8b0917fadafa5f70635a29de25fe85a">Nop.Services.Messages.IMessageTokenProvider.AddPrivateMessageTokensAsync</a></div><div class="ttdeci">Task AddPrivateMessageTokensAsync(IList&lt; Token &gt; tokens, PrivateMessage privateMessage)</div><div class="ttdoc">Add private message tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#ad8b0917fadafa5f70635a29de25fe85a">Nop.Services.Messages.IMessageTokenProvider.AddPrivateMessageTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">Nop.Services.Customers.ICustomerService.GetCustomerFullNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a7c11c2062306ad2745c66b0d7e58d5ad">Nop.Core.Domain.Messages.MessageTemplateSystemNames.PrivateMessageNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_private_message.html#ac24f1926f5f6d6f029a3551386721194">Nop.Core.Domain.Forums.PrivateMessage.StoreId</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_forums_1_1_private_message.html#a593d8f4f8ed32598e7e13779fe435e5b">Nop.Core.Domain.Forums.PrivateMessage.ToCustomerId</a>.</p>

</div>
</div>
<a id="adf690c4aeefdef0a88d873965b42caf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf690c4aeefdef0a88d873965b42caf5">&#9670;&nbsp;</a></span>SendProductEmailAFriendMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendProductEmailAFriendMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product.html">Product</a>&#160;</td>
          <td class="paramname"><em>product</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>customerEmail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>friendsEmail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>personalMessage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends "email a friend" message </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">customer</td><td>Customer instance</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
    <tr><td class="paramname">product</td><td>Product instance</td></tr>
    <tr><td class="paramname">customerEmail</td><td>Customer's email</td></tr>
    <tr><td class="paramname">friendsEmail</td><td>Friend's email</td></tr>
    <tr><td class="paramname">personalMessage</td><td>Personal message</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#aad24ceb11e59e67b696ca563917b8740">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;        {</div>
<div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160; </div>
<div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;            <span class="keywordflow">if</span> (product == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(product));</div>
<div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160; </div>
<div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160; </div>
<div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a0ef8bd47530b90cfefab01d175af76b8">EmailAFriendMessage</a>, store.Id);</div>
<div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160; </div>
<div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a74181436ff044c6c1055bb2fa455c288">AddProductTokensAsync</a>(commonTokens, product, languageId);</div>
<div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            commonTokens.Add(<span class="keyword">new</span> Token(<span class="stringliteral">&quot;EmailAFriend.PersonalMessage&quot;</span>, personalMessage, <span class="keyword">true</span>));</div>
<div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;            commonTokens.Add(<span class="keyword">new</span> Token(<span class="stringliteral">&quot;EmailAFriend.Email&quot;</span>, customerEmail));</div>
<div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160; </div>
<div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;            {</div>
<div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160; </div>
<div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160; </div>
<div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160; </div>
<div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, friendsEmail, <span class="keywordtype">string</span>.Empty);</div>
<div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a0ef8bd47530b90cfefab01d175af76b8"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a0ef8bd47530b90cfefab01d175af76b8">Nop.Core.Domain.Messages.MessageTemplateSystemNames.EmailAFriendMessage</a></div><div class="ttdeci">const string EmailAFriendMessage</div><div class="ttdoc">Represents system name of 'Email a friend' message</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:150</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a74181436ff044c6c1055bb2fa455c288"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a74181436ff044c6c1055bb2fa455c288">Nop.Services.Messages.IMessageTokenProvider.AddProductTokensAsync</a></div><div class="ttdeci">Task AddProductTokensAsync(IList&lt; Token &gt; tokens, Product product, int languageId)</div><div class="ttdoc">Add product tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a74181436ff044c6c1055bb2fa455c288">Nop.Services.Messages.IMessageTokenProvider.AddProductTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a0ef8bd47530b90cfefab01d175af76b8">Nop.Core.Domain.Messages.MessageTemplateSystemNames.EmailAFriendMessage</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a89420429ebd87666a8f4e4e35ebbf18c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89420429ebd87666a8f4e4e35ebbf18c">&#9670;&nbsp;</a></span>SendProductReviewNotificationMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendProductReviewNotificationMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review.html">ProductReview</a>&#160;</td>
          <td class="paramname"><em>productReview</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a product review notification message to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">productReview</td><td>Product review</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#aace62f0eb7a204d22e381cf104e25fe7">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;        {</div>
<div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;            <span class="keywordflow">if</span> (productReview == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(productReview));</div>
<div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160; </div>
<div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160; </div>
<div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ae99fe56d3471a0dda92f2cf4936891de">ProductReviewStoreOwnerNotification</a>, store.Id);</div>
<div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160; </div>
<div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a9ef9bc14b5da699cc0eeee5408a4ff78">AddProductReviewTokensAsync</a>(commonTokens, productReview);</div>
<div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, productReview.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review.html#aebc250be4cf5265433ab04bfddc5541e">CustomerId</a>);</div>
<div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160; </div>
<div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;            {</div>
<div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160; </div>
<div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160; </div>
<div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160; </div>
<div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160; </div>
<div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review_html_aebc250be4cf5265433ab04bfddc5541e"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review.html#aebc250be4cf5265433ab04bfddc5541e">Nop.Core.Domain.Catalog.ProductReview.CustomerId</a></div><div class="ttdeci">int CustomerId</div><div class="ttdoc">Gets or sets the customer identifier</div><div class="ttdef"><b>Definition:</b> ProductReview.cs:13</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_ae99fe56d3471a0dda92f2cf4936891de"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ae99fe56d3471a0dda92f2cf4936891de">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ProductReviewStoreOwnerNotification</a></div><div class="ttdeci">const string ProductReviewStoreOwnerNotification</div><div class="ttdoc">Represents system name of notification store owner about new product review</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:217</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a9ef9bc14b5da699cc0eeee5408a4ff78"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a9ef9bc14b5da699cc0eeee5408a4ff78">Nop.Services.Messages.IMessageTokenProvider.AddProductReviewTokensAsync</a></div><div class="ttdeci">Task AddProductReviewTokensAsync(IList&lt; Token &gt; tokens, ProductReview productReview)</div><div class="ttdoc">Add product review tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a9ef9bc14b5da699cc0eeee5408a4ff78">Nop.Services.Messages.IMessageTokenProvider.AddProductReviewTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review.html#aebc250be4cf5265433ab04bfddc5541e">Nop.Core.Domain.Catalog.ProductReview.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ae99fe56d3471a0dda92f2cf4936891de">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ProductReviewStoreOwnerNotification</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="aec8f5dc342bb89b28e7d8cb0c2cdd3d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec8f5dc342bb89b28e7d8cb0c2cdd3d9">&#9670;&nbsp;</a></span>SendProductReviewReplyCustomerNotificationMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendProductReviewReplyCustomerNotificationMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review.html">ProductReview</a>&#160;</td>
          <td class="paramname"><em>productReview</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a product review reply notification message to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">productReview</td><td>Product review</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a3d8a1b038db02d889436402b2dc99b89">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        {</div>
<div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;            <span class="keywordflow">if</span> (productReview == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(productReview));</div>
<div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160; </div>
<div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(productReview.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review.html#a51fdebe767d5c4042498a25e415e66d0">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160; </div>
<div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#abb50a6887bcfc144d560c0d63d8bc34b">ProductReviewReplyCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160; </div>
<div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;            var customer = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">GetCustomerByIdAsync</a>(productReview.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review.html#aebc250be4cf5265433ab04bfddc5541e">CustomerId</a>);</div>
<div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160; </div>
<div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a9ef9bc14b5da699cc0eeee5408a4ff78">AddProductReviewTokensAsync</a>(commonTokens, productReview);</div>
<div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160; </div>
<div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;            {</div>
<div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160; </div>
<div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160; </div>
<div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160; </div>
<div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;                var toEmail = customer.Email;</div>
<div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;                var toName = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">GetCustomerFullNameAsync</a>(customer);</div>
<div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160; </div>
<div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review_html_a51fdebe767d5c4042498a25e415e66d0"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review.html#a51fdebe767d5c4042498a25e415e66d0">Nop.Core.Domain.Catalog.ProductReview.StoreId</a></div><div class="ttdeci">int StoreId</div><div class="ttdoc">Gets or sets the store identifier</div><div class="ttdef"><b>Definition:</b> ProductReview.cs:23</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_abb50a6887bcfc144d560c0d63d8bc34b"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#abb50a6887bcfc144d560c0d63d8bc34b">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ProductReviewReplyCustomerNotification</a></div><div class="ttdeci">const string ProductReviewReplyCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about product review reply</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:222</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a9ef9bc14b5da699cc0eeee5408a4ff78">Nop.Services.Messages.IMessageTokenProvider.AddProductReviewTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review.html#aebc250be4cf5265433ab04bfddc5541e">Nop.Core.Domain.Catalog.ProductReview.CustomerId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">Nop.Services.Customers.ICustomerService.GetCustomerFullNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#abb50a6887bcfc144d560c0d63d8bc34b">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ProductReviewReplyCustomerNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_review.html#a51fdebe767d5c4042498a25e415e66d0">Nop.Core.Domain.Catalog.ProductReview.StoreId</a>.</p>

</div>
</div>
<a id="af2f3025becf2874631ee3e6bf112a3dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2f3025becf2874631ee3e6bf112a3dd">&#9670;&nbsp;</a></span>SendQuantityBelowStoreOwnerNotificationAsync() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendQuantityBelowStoreOwnerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product.html">Product</a>&#160;</td>
          <td class="paramname"><em>product</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a "quantity below" notification to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">product</td><td>Product</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a9c10b700de36ba3f521f12036d84689b">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;        {</div>
<div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;            <span class="keywordflow">if</span> (product == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(product));</div>
<div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160; </div>
<div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160; </div>
<div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a42b313add482a15a26663b15028990ae">QuantityBelowStoreOwnerNotification</a>, store.Id);</div>
<div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160; </div>
<div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a74181436ff044c6c1055bb2fa455c288">AddProductTokensAsync</a>(commonTokens, product, languageId);</div>
<div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160; </div>
<div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;            {</div>
<div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160; </div>
<div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160; </div>
<div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160; </div>
<div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160; </div>
<div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a42b313add482a15a26663b15028990ae"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a42b313add482a15a26663b15028990ae">Nop.Core.Domain.Messages.MessageTemplateSystemNames.QuantityBelowStoreOwnerNotification</a></div><div class="ttdeci">const string QuantityBelowStoreOwnerNotification</div><div class="ttdoc">Represents system name of notification store owner about below quantity of product</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:227</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a74181436ff044c6c1055bb2fa455c288">Nop.Services.Messages.IMessageTokenProvider.AddProductTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a42b313add482a15a26663b15028990ae">Nop.Core.Domain.Messages.MessageTemplateSystemNames.QuantityBelowStoreOwnerNotification</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a2de19acac576d2c6e690a0eec9ac3b48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2de19acac576d2c6e690a0eec9ac3b48">&#9670;&nbsp;</a></span>SendQuantityBelowStoreOwnerNotificationAsync() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendQuantityBelowStoreOwnerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_attribute_combination.html">ProductAttributeCombination</a>&#160;</td>
          <td class="paramname"><em>combination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a "quantity below" notification to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">combination</td><td>Attribute combination</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a8044976be1f34e76e96b2bca5c396064">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        {</div>
<div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;            <span class="keywordflow">if</span> (combination == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(combination));</div>
<div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160; </div>
<div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160; </div>
<div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a3a6d1f8a7e1723bcb26151b383cee520">QuantityBelowAttributeCombinationStoreOwnerNotification</a>, store.Id);</div>
<div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160; </div>
<div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;            var product = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac316d6fa69923bcd5951c06fcdea6d09">_productService</a>.<a class="code" href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html#ab448923cc8826840ac6cd1558a0f2a9d">GetProductByIdAsync</a>(combination.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_attribute_combination.html#ab7bbef630a6ac5b49ae7612c21c04205">ProductId</a>);</div>
<div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160; </div>
<div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a74181436ff044c6c1055bb2fa455c288">AddProductTokensAsync</a>(commonTokens, product, languageId);</div>
<div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#ab513f27dc3e42e84f3f79cf3a471f982">AddAttributeCombinationTokensAsync</a>(commonTokens, combination, languageId);</div>
<div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160; </div>
<div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;            {</div>
<div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160; </div>
<div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160; </div>
<div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160; </div>
<div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160; </div>
<div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_attribute_combination_html_ab7bbef630a6ac5b49ae7612c21c04205"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_attribute_combination.html#ab7bbef630a6ac5b49ae7612c21c04205">Nop.Core.Domain.Catalog.ProductAttributeCombination.ProductId</a></div><div class="ttdeci">int ProductId</div><div class="ttdoc">Gets or sets the product identifier</div><div class="ttdef"><b>Definition:</b> ProductAttributeCombination.cs:11</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a3a6d1f8a7e1723bcb26151b383cee520"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a3a6d1f8a7e1723bcb26151b383cee520">Nop.Core.Domain.Messages.MessageTemplateSystemNames.QuantityBelowAttributeCombinationStoreOwnerNotification</a></div><div class="ttdeci">const string QuantityBelowAttributeCombinationStoreOwnerNotification</div><div class="ttdoc">Represents system name of notification store owner about below quantity of product attribute combinat...</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:232</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_catalog_1_1_i_product_service_html_ab448923cc8826840ac6cd1558a0f2a9d"><div class="ttname"><a href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html#ab448923cc8826840ac6cd1558a0f2a9d">Nop.Services.Catalog.IProductService.GetProductByIdAsync</a></div><div class="ttdeci">Task&lt; Product &gt; GetProductByIdAsync(int productId)</div><div class="ttdoc">Gets product</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_ab513f27dc3e42e84f3f79cf3a471f982"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#ab513f27dc3e42e84f3f79cf3a471f982">Nop.Services.Messages.IMessageTokenProvider.AddAttributeCombinationTokensAsync</a></div><div class="ttdeci">Task AddAttributeCombinationTokensAsync(IList&lt; Token &gt; tokens, ProductAttributeCombination combination, int languageId)</div><div class="ttdoc">Add product attribute combination tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac316d6fa69923bcd5951c06fcdea6d09">Nop.Services.Messages.WorkflowMessageService._productService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#ab513f27dc3e42e84f3f79cf3a471f982">Nop.Services.Messages.IMessageTokenProvider.AddAttributeCombinationTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a74181436ff044c6c1055bb2fa455c288">Nop.Services.Messages.IMessageTokenProvider.AddProductTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html#ab448923cc8826840ac6cd1558a0f2a9d">Nop.Services.Catalog.IProductService.GetProductByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_catalog_1_1_product_attribute_combination.html#ab7bbef630a6ac5b49ae7612c21c04205">Nop.Core.Domain.Catalog.ProductAttributeCombination.ProductId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a3a6d1f8a7e1723bcb26151b383cee520">Nop.Core.Domain.Messages.MessageTemplateSystemNames.QuantityBelowAttributeCombinationStoreOwnerNotification</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="af7bfaf213a917be96f201757329d472d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7bfaf213a917be96f201757329d472d">&#9670;&nbsp;</a></span>SendRecurringPaymentCancelledCustomerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledCustomerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html">RecurringPayment</a>&#160;</td>
          <td class="paramname"><em>recurringPayment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a "Recurring payment cancelled" notification to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">recurringPayment</td><td>Recurring payment</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#aced13a441c2811c58e47af374b0e55d9">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;        {</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;            <span class="keywordflow">if</span> (recurringPayment == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(recurringPayment));</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;            var order = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">_orderService</a>.<a class="code" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">GetOrderByIdAsync</a>(recurringPayment.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html#a5095922475cf4b1ea4e3f8eeb62cad14">InitialOrderId</a>);</div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160; </div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Order cannot be loaded&quot;</span>);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.StoreId) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160; </div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a828223fe962188c21efa89558b34fda7">RecurringPaymentCancelledCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160; </div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.CustomerId);</div>
<div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a8489874cb158cbe49518a400fcf3ade5">AddRecurringPaymentTokensAsync</a>(commonTokens, recurringPayment);</div>
<div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160; </div>
<div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;            {</div>
<div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160; </div>
<div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160; </div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160; </div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;                var billingAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(order.BillingAddressId);</div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160; </div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                var toEmail = billingAddress.Email;</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;                var toName = $<span class="stringliteral">&quot;{billingAddress.FirstName} {billingAddress.LastName}&quot;</span>;</div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160; </div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a828223fe962188c21efa89558b34fda7"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a828223fe962188c21efa89558b34fda7">Nop.Core.Domain.Messages.MessageTemplateSystemNames.RecurringPaymentCancelledCustomerNotification</a></div><div class="ttdeci">const string RecurringPaymentCancelledCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about cancelled recurring order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:122</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment_html_a5095922475cf4b1ea4e3f8eeb62cad14"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html#a5095922475cf4b1ea4e3f8eeb62cad14">Nop.Core.Domain.Orders.RecurringPayment.InitialOrderId</a></div><div class="ttdeci">int InitialOrderId</div><div class="ttdoc">Gets or sets the initial order identifier</div><div class="ttdef"><b>Definition:</b> RecurringPayment.cs:50</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a8489874cb158cbe49518a400fcf3ade5"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a8489874cb158cbe49518a400fcf3ade5">Nop.Services.Messages.IMessageTokenProvider.AddRecurringPaymentTokensAsync</a></div><div class="ttdeci">Task AddRecurringPaymentTokensAsync(IList&lt; Token &gt; tokens, RecurringPayment recurringPayment)</div><div class="ttdoc">Add recurring payment tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">Nop.Services.Messages.WorkflowMessageService._orderService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a8489874cb158cbe49518a400fcf3ade5">Nop.Services.Messages.IMessageTokenProvider.AddRecurringPaymentTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">Nop.Services.Orders.IOrderService.GetOrderByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html#a5095922475cf4b1ea4e3f8eeb62cad14">Nop.Core.Domain.Orders.RecurringPayment.InitialOrderId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a828223fe962188c21efa89558b34fda7">Nop.Core.Domain.Messages.MessageTemplateSystemNames.RecurringPaymentCancelledCustomerNotification</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a2ea003968f3c6230ec777c02d9361273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2ea003968f3c6230ec777c02d9361273">&#9670;&nbsp;</a></span>SendRecurringPaymentCancelledStoreOwnerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledStoreOwnerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html">RecurringPayment</a>&#160;</td>
          <td class="paramname"><em>recurringPayment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a "Recurring payment cancelled" notification to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">recurringPayment</td><td>Recurring payment</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#aab88e81da64272e24041a03b21dd4cde">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;        {</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;            <span class="keywordflow">if</span> (recurringPayment == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(recurringPayment));</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160; </div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;            var order = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">_orderService</a>.<a class="code" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">GetOrderByIdAsync</a>(recurringPayment.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html#a5095922475cf4b1ea4e3f8eeb62cad14">InitialOrderId</a>);</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160; </div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Order cannot be loaded&quot;</span>);</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160; </div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.StoreId) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160; </div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a79ed6b897f5e7b628f55ddc109f671d8">RecurringPaymentCancelledStoreOwnerNotification</a>, store.Id);</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160; </div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.CustomerId);</div>
<div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a8489874cb158cbe49518a400fcf3ade5">AddRecurringPaymentTokensAsync</a>(commonTokens, recurringPayment);</div>
<div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160; </div>
<div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;            {</div>
<div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160; </div>
<div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160; </div>
<div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160; </div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160; </div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a79ed6b897f5e7b628f55ddc109f671d8"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a79ed6b897f5e7b628f55ddc109f671d8">Nop.Core.Domain.Messages.MessageTemplateSystemNames.RecurringPaymentCancelledStoreOwnerNotification</a></div><div class="ttdeci">const string RecurringPaymentCancelledStoreOwnerNotification</div><div class="ttdoc">Represents system name of notification store owner about cancelled recurring order</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:117</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">Nop.Services.Messages.WorkflowMessageService._orderService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a8489874cb158cbe49518a400fcf3ade5">Nop.Services.Messages.IMessageTokenProvider.AddRecurringPaymentTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">Nop.Services.Orders.IOrderService.GetOrderByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html#a5095922475cf4b1ea4e3f8eeb62cad14">Nop.Core.Domain.Orders.RecurringPayment.InitialOrderId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a79ed6b897f5e7b628f55ddc109f671d8">Nop.Core.Domain.Messages.MessageTemplateSystemNames.RecurringPaymentCancelledStoreOwnerNotification</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a0a66a2a7ce5ddd112a6a7028713cc54b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a66a2a7ce5ddd112a6a7028713cc54b">&#9670;&nbsp;</a></span>SendRecurringPaymentFailedCustomerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentFailedCustomerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html">RecurringPayment</a>&#160;</td>
          <td class="paramname"><em>recurringPayment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a "Recurring payment failed" notification to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">recurringPayment</td><td>Recurring payment</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a63bdd8627ca7f4fe9c6ad6affb5fb198">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;        {</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;            <span class="keywordflow">if</span> (recurringPayment == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(recurringPayment));</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160; </div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            var order = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">_orderService</a>.<a class="code" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">GetOrderByIdAsync</a>(recurringPayment.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html#a5095922475cf4b1ea4e3f8eeb62cad14">InitialOrderId</a>);</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160; </div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Order cannot be loaded&quot;</span>);</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160; </div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.StoreId) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160; </div>
<div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a78f15f9d219e8b3deb0c2f156b7303d6">RecurringPaymentFailedCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160; </div>
<div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.CustomerId);</div>
<div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a8489874cb158cbe49518a400fcf3ade5">AddRecurringPaymentTokensAsync</a>(commonTokens, recurringPayment);</div>
<div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160; </div>
<div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;            {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160; </div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160; </div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160; </div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                var billingAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(order.BillingAddressId);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                var toEmail = billingAddress.Email;</div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                var toName = $<span class="stringliteral">&quot;{billingAddress.FirstName} {billingAddress.LastName}&quot;</span>;</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a78f15f9d219e8b3deb0c2f156b7303d6"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a78f15f9d219e8b3deb0c2f156b7303d6">Nop.Core.Domain.Messages.MessageTemplateSystemNames.RecurringPaymentFailedCustomerNotification</a></div><div class="ttdeci">const string RecurringPaymentFailedCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about failed payment for the recurring payments</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:127</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">Nop.Services.Messages.WorkflowMessageService._orderService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a8489874cb158cbe49518a400fcf3ade5">Nop.Services.Messages.IMessageTokenProvider.AddRecurringPaymentTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">Nop.Services.Orders.IOrderService.GetOrderByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_recurring_payment.html#a5095922475cf4b1ea4e3f8eeb62cad14">Nop.Core.Domain.Orders.RecurringPayment.InitialOrderId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a78f15f9d219e8b3deb0c2f156b7303d6">Nop.Core.Domain.Messages.MessageTemplateSystemNames.RecurringPaymentFailedCustomerNotification</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="a79185a8309df5962e42dec81c576e70b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a79185a8309df5962e42dec81c576e70b">&#9670;&nbsp;</a></span>SendReturnRequestStatusChangedCustomerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendReturnRequestStatusChangedCustomerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html">ReturnRequest</a>&#160;</td>
          <td class="paramname"><em>returnRequest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_item.html">OrderItem</a>&#160;</td>
          <td class="paramname"><em>orderItem</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends 'Return Request status changed' message to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">returnRequest</td><td>Return request</td></tr>
    <tr><td class="paramname">orderItem</td><td>Order item</td></tr>
    <tr><td class="paramname">order</td><td>Order</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ae5380e5aed4ac693c323000c8c5a411d">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;        {</div>
<div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;            <span class="keywordflow">if</span> (returnRequest == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(returnRequest));</div>
<div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160; </div>
<div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;            <span class="keywordflow">if</span> (orderItem == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(orderItem));</div>
<div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160; </div>
<div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160; </div>
<div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">StoreId</a>) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;            var languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afac2b603ee3b2ff601163ed07164694e">CustomerLanguageId</a>, store.Id);</div>
<div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160; </div>
<div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ae4cb597b2d47e85025f5f2437e715a80">ReturnRequestStatusChangedCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160; </div>
<div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;            var customer = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">GetCustomerByIdAsync</a>(returnRequest.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html#af2116118907fe1788c7f1dd5776e159a">CustomerId</a>);</div>
<div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160; </div>
<div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#af701012415ed6813e003af26dce9c7c1">AddReturnRequestTokensAsync</a>(commonTokens, returnRequest, orderItem, languageId);</div>
<div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160; </div>
<div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;            {</div>
<div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160; </div>
<div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160; </div>
<div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160; </div>
<div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;                var billingAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">BillingAddressId</a>);</div>
<div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160; </div>
<div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;                var toEmail = (await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a1ea83a743a13cc9e5dda268a57f16f1f">IsGuestAsync</a>(customer))</div>
<div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;                    ? billingAddress.Email</div>
<div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;                    : customer.Email;</div>
<div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;                var toName = (await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a1ea83a743a13cc9e5dda268a57f16f1f">IsGuestAsync</a>(customer))</div>
<div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;                    ? billingAddress.FirstName</div>
<div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;                    : await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">GetCustomerFullNameAsync</a>(customer);</div>
<div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160; </div>
<div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_ae4cb597b2d47e85025f5f2437e715a80"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ae4cb597b2d47e85025f5f2437e715a80">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ReturnRequestStatusChangedCustomerNotification</a></div><div class="ttdeci">const string ReturnRequestStatusChangedCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about changing return request status</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:174</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4dde00f8c095dd2b5d058bde78738075">Nop.Services.Messages.WorkflowMessageService._customerService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#af701012415ed6813e003af26dce9c7c1">Nop.Services.Messages.IMessageTokenProvider.AddReturnRequestTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a70400dbb1fb7c02f6f3e9f3b3bcf6e7c">Nop.Core.Domain.Orders.Order.BillingAddressId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_return_request.html#af2116118907fe1788c7f1dd5776e159a">Nop.Core.Domain.Orders.ReturnRequest.CustomerId</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afac2b603ee3b2ff601163ed07164694e">Nop.Core.Domain.Orders.Order.CustomerLanguageId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a75782fb2c98e870dede70a8a5f67cfb1">Nop.Services.Customers.ICustomerService.GetCustomerFullNameAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a1ea83a743a13cc9e5dda268a57f16f1f">Nop.Services.Customers.ICustomerService.IsGuestAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ae4cb597b2d47e85025f5f2437e715a80">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ReturnRequestStatusChangedCustomerNotification</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a6eab9b1126cda0970526b3c4d9af9aed">Nop.Core.Domain.Orders.Order.StoreId</a>.</p>

</div>
</div>
<a id="a3d80736e1501ec4de2d29030eec5d5e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d80736e1501ec4de2d29030eec5d5e6">&#9670;&nbsp;</a></span>SendShipmentDeliveredCustomerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendShipmentDeliveredCustomerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_shipping_1_1_shipment.html">Shipment</a>&#160;</td>
          <td class="paramname"><em>shipment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a shipment delivered notification to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">shipment</td><td>Shipment</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a9eac72e85929651e6310200ee0485abf">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        {</div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;            <span class="keywordflow">if</span> (shipment == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(shipment));</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            var order = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">_orderService</a>.<a class="code" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">GetOrderByIdAsync</a>(shipment.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_shipping_1_1_shipment.html#a8939e34989422aa12467f5a807a91e40">OrderId</a>);</div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160; </div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Order cannot be loaded&quot;</span>);</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.StoreId) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a8e9b8bacd16a36815eb707c6214b6cad">ShipmentDeliveredCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160; </div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a1ef236d3d902c041da9337cbb0d543bb">AddShipmentTokensAsync</a>(commonTokens, shipment, languageId);</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.CustomerId);</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160; </div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            {</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160; </div>
<div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160; </div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160; </div>
<div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                var billingAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(order.BillingAddressId);</div>
<div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160; </div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                var toEmail = billingAddress.Email;</div>
<div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                var toName = $<span class="stringliteral">&quot;{billingAddress.FirstName} {billingAddress.LastName}&quot;</span>;</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160; </div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_a8e9b8bacd16a36815eb707c6214b6cad"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a8e9b8bacd16a36815eb707c6214b6cad">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ShipmentDeliveredCustomerNotification</a></div><div class="ttdeci">const string ShipmentDeliveredCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about delivered shipment</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:87</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_shipping_1_1_shipment_html_a8939e34989422aa12467f5a807a91e40"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_shipping_1_1_shipment.html#a8939e34989422aa12467f5a807a91e40">Nop.Core.Domain.Shipping.Shipment.OrderId</a></div><div class="ttdeci">int OrderId</div><div class="ttdoc">Gets or sets the order identifier</div><div class="ttdef"><b>Definition:</b> Shipment.cs:13</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider_html_a1ef236d3d902c041da9337cbb0d543bb"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a1ef236d3d902c041da9337cbb0d543bb">Nop.Services.Messages.IMessageTokenProvider.AddShipmentTokensAsync</a></div><div class="ttdeci">Task AddShipmentTokensAsync(IList&lt; Token &gt; tokens, Shipment shipment, int languageId)</div><div class="ttdoc">Add shipment tokens</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">Nop.Services.Messages.WorkflowMessageService._orderService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a1ef236d3d902c041da9337cbb0d543bb">Nop.Services.Messages.IMessageTokenProvider.AddShipmentTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">Nop.Services.Orders.IOrderService.GetOrderByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_shipping_1_1_shipment.html#a8939e34989422aa12467f5a807a91e40">Nop.Core.Domain.Shipping.Shipment.OrderId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#a8e9b8bacd16a36815eb707c6214b6cad">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ShipmentDeliveredCustomerNotification</a>.</p>

</div>
</div>
<a id="ab5c4a2bc5412f704df18c1c0fb2a0c40"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab5c4a2bc5412f704df18c1c0fb2a0c40">&#9670;&nbsp;</a></span>SendShipmentSentCustomerNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendShipmentSentCustomerNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_shipping_1_1_shipment.html">Shipment</a>&#160;</td>
          <td class="paramname"><em>shipment</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a shipment sent notification to a customer </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">shipment</td><td>Shipment</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#af6109b96faea71479bb8cf90a9c306cc">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        {</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;            <span class="keywordflow">if</span> (shipment == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(shipment));</div>
<div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160; </div>
<div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;            var order = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">_orderService</a>.<a class="code" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">GetOrderByIdAsync</a>(shipment.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_shipping_1_1_shipment.html#a8939e34989422aa12467f5a807a91e40">OrderId</a>);</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <span class="keywordflow">if</span> (order == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;Order cannot be loaded&quot;</span>);</div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160; </div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">GetStoreByIdAsync</a>(order.StoreId) ?? await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160; </div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ae76bce379106ec9c9a7023c76e8edf81">ShipmentSentCustomerNotification</a>, store.Id);</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160; </div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a1ef236d3d902c041da9337cbb0d543bb">AddShipmentTokensAsync</a>(commonTokens, shipment, languageId);</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">AddOrderTokensAsync</a>(commonTokens, order, languageId);</div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, order.CustomerId);</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160; </div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;            {</div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160; </div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160; </div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160; </div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                var billingAddress = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">_addressService</a>.<a class="code" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">GetAddressByIdAsync</a>(order.BillingAddressId);</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160; </div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;                var toEmail = billingAddress.Email;</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;                var toName = $<span class="stringliteral">&quot;{billingAddress.FirstName} {billingAddress.LastName}&quot;</span>;</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160; </div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_ae76bce379106ec9c9a7023c76e8edf81"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ae76bce379106ec9c9a7023c76e8edf81">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ShipmentSentCustomerNotification</a></div><div class="ttdeci">const string ShipmentSentCustomerNotification</div><div class="ttdoc">Represents system name of notification customer about sent shipment</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:82</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a780b76526689cfcb5547838c60603518">Nop.Services.Messages.WorkflowMessageService._addressService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ad515a207bd88539700ec721b238a91c1">Nop.Services.Messages.WorkflowMessageService._orderService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a31fcc6563d3a003b29d5f85af53e2537">Nop.Services.Messages.WorkflowMessageService._storeService</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#adad7428ce0a1048e50fa7fbcbfad6b81">Nop.Services.Messages.IMessageTokenProvider.AddOrderTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a1ef236d3d902c041da9337cbb0d543bb">Nop.Services.Messages.IMessageTokenProvider.AddShipmentTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html#a91a223bb48ad616e4155d16894c64470">Nop.Services.Common.IAddressService.GetAddressByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html#a75bc6860ccdf693731b275018e462978">Nop.Services.Orders.IOrderService.GetOrderByIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#ab8f918f81f58ea433cb22a9b0de35192">Nop.Services.Stores.IStoreService.GetStoreByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_shipping_1_1_shipment.html#a8939e34989422aa12467f5a807a91e40">Nop.Core.Domain.Shipping.Shipment.OrderId</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#ae76bce379106ec9c9a7023c76e8edf81">Nop.Core.Domain.Messages.MessageTemplateSystemNames.ShipmentSentCustomerNotification</a>.</p>

</div>
</div>
<a id="a2a9e0a8481b7b01826247f88b6ae8838"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a9e0a8481b7b01826247f88b6ae8838">&#9670;&nbsp;</a></span>SendTestEmailAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;int&gt; Nop.Services.Messages.WorkflowMessageService.SendTestEmailAsync </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>messageTemplateId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>sendToEmail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">List&lt; <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_token.html">Token</a> &gt;&#160;</td>
          <td class="paramname"><em>tokens</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends a test email </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">messageTemplateId</td><td>Message template identifier</td></tr>
    <tr><td class="paramname">sendToEmail</td><td>Send to email</td></tr>
    <tr><td class="paramname">tokens</td><td>Tokens</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a3ef0c635a1fc9f4e2e9487a7b2b91f22">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;        {</div>
<div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;            var messageTemplate = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7cc294197be5a4bbbc15a48323f3996c">_messageTemplateService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_template_service.html#a0fcff55c3ebcea37aaf9e1f705791a3d">GetMessageTemplateByIdAsync</a>(messageTemplateId);</div>
<div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;            <span class="keywordflow">if</span> (messageTemplate == <span class="keyword">null</span>)</div>
<div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentException(<span class="stringliteral">&quot;Template cannot be loaded&quot;</span>);</div>
<div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160; </div>
<div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;            <span class="comment">//email account</span></div>
<div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;            var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160; </div>
<div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;            <span class="comment">//event notification</span></div>
<div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160; </div>
<div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;            <span class="comment">//force sending</span></div>
<div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;            messageTemplate.DelayBeforeSend = <span class="keyword">null</span>;</div>
<div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160; </div>
<div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;            <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, sendToEmail, <span class="keyword">null</span>);</div>
<div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_message_template_service_html_a0fcff55c3ebcea37aaf9e1f705791a3d"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_message_template_service.html#a0fcff55c3ebcea37aaf9e1f705791a3d">Nop.Services.Messages.IMessageTemplateService.GetMessageTemplateByIdAsync</a></div><div class="ttdeci">Task&lt; MessageTemplate &gt; GetMessageTemplateByIdAsync(int messageTemplateId)</div><div class="ttdoc">Gets a message template by identifier</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7cc294197be5a4bbbc15a48323f3996c">Nop.Services.Messages.WorkflowMessageService._messageTemplateService</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_template_service.html#a0fcff55c3ebcea37aaf9e1f705791a3d">Nop.Services.Messages.IMessageTemplateService.GetMessageTemplateByIdAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a>.</p>

</div>
</div>
<a id="ac0d7b11e96c4cc9e56dd39fa1aed54e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0d7b11e96c4cc9e56dd39fa1aed54e4">&#9670;&nbsp;</a></span>SendVendorInformationChangeNotificationAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendVendorInformationChangeNotificationAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_vendors_1_1_vendor.html">Vendor</a>&#160;</td>
          <td class="paramname"><em>vendor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends 'Vendor information changed' message to a store owner </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">vendor</td><td>Vendor</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#ab63a6a42c0169544ee94e33617eb64a5">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        {</div>
<div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;            <span class="keywordflow">if</span> (vendor == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(vendor));</div>
<div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160; </div>
<div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160; </div>
<div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aebdadd12552a5efcadd4ad690a70e5fa">VendorInformationChangeNotification</a>, store.Id);</div>
<div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160; </div>
<div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a3ac6c7896d2883815888b22c43bd27ce">AddVendorTokensAsync</a>(commonTokens, vendor);</div>
<div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160; </div>
<div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;            {</div>
<div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160; </div>
<div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160; </div>
<div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160; </div>
<div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;                var toEmail = emailAccount.Email;</div>
<div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;                var toName = emailAccount.DisplayName;</div>
<div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160; </div>
<div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, toEmail, toName);</div>
<div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_aebdadd12552a5efcadd4ad690a70e5fa"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aebdadd12552a5efcadd4ad690a70e5fa">Nop.Core.Domain.Messages.MessageTemplateSystemNames.VendorInformationChangeNotification</a></div><div class="ttdeci">const string VendorInformationChangeNotification</div><div class="ttdoc">Represents system name of notification vendor about changing information</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:207</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a3ac6c7896d2883815888b22c43bd27ce">Nop.Services.Messages.IMessageTokenProvider.AddVendorTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#aebdadd12552a5efcadd4ad690a70e5fa">Nop.Core.Domain.Messages.MessageTemplateSystemNames.VendorInformationChangeNotification</a>.</p>

</div>
</div>
<a id="a83c4e2553fcce9bad4a4266dd45ac6c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a83c4e2553fcce9bad4a4266dd45ac6c0">&#9670;&nbsp;</a></span>SendWishlistEmailAFriendMessageAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;int&gt; &gt; Nop.Services.Messages.WorkflowMessageService.SendWishlistEmailAFriendMessageAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_customer.html">Customer</a>&#160;</td>
          <td class="paramname"><em>customer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>languageId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>customerEmail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>friendsEmail</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>personalMessage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Sends wishlist "email a friend" message </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">customer</td><td>Customer</td></tr>
    <tr><td class="paramname">languageId</td><td>Message language identifier</td></tr>
    <tr><td class="paramname">customerEmail</td><td>Customer's email</td></tr>
    <tr><td class="paramname">friendsEmail</td><td>Friend's email</td></tr>
    <tr><td class="paramname">personalMessage</td><td>Personal message</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email identifier </dd></dl>

<p>Implementa <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_workflow_message_service.html#a0bca0c7c1e829a7a361b0623bb0b34ce">Nop.Services.Messages.IWorkflowMessageService</a>.</p>
<div class="fragment"><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;        {</div>
<div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;            <span class="keywordflow">if</span> (customer == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(customer));</div>
<div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160; </div>
<div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;            var store = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">_storeContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">GetCurrentStoreAsync</a>();</div>
<div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            languageId = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">EnsureLanguageIsActiveAsync</a>(languageId, store.Id);</div>
<div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160; </div>
<div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            var messageTemplates = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">GetActiveMessageTemplatesAsync</a>(<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html">MessageTemplateSystemNames</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#afc6c336214a33a1f633ed6c8ffbf7db5">WishlistToFriendMessage</a>, store.Id);</div>
<div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;            <span class="keywordflow">if</span> (!messageTemplates.Any())</div>
<div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> List&lt;int&gt;();</div>
<div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160; </div>
<div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;            <span class="comment">//tokens</span></div>
<div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            var commonTokens = <span class="keyword">new</span> List&lt;Token&gt;();</div>
<div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;            await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">AddCustomerTokensAsync</a>(commonTokens, customer);</div>
<div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;            commonTokens.Add(<span class="keyword">new</span> Token(<span class="stringliteral">&quot;Wishlist.PersonalMessage&quot;</span>, personalMessage, <span class="keyword">true</span>));</div>
<div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;            commonTokens.Add(<span class="keyword">new</span> Token(<span class="stringliteral">&quot;Wishlist.Email&quot;</span>, customerEmail));</div>
<div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160; </div>
<div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;            <span class="keywordflow">return</span> await messageTemplates.SelectAwait(async messageTemplate =&gt;</div>
<div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;            {</div>
<div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;                <span class="comment">//email account</span></div>
<div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;                var emailAccount = await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">GetEmailAccountOfMessageTemplateAsync</a>(messageTemplate, languageId);</div>
<div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160; </div>
<div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;                var tokens = <span class="keyword">new</span> List&lt;Token&gt;(commonTokens);</div>
<div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">_messageTokenProvider</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">AddStoreTokensAsync</a>(tokens, store, emailAccount);</div>
<div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160; </div>
<div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;                <span class="comment">//event notification</span></div>
<div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;                await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">_eventPublisher</a>.MessageTokensAddedAsync(messageTemplate, tokens);</div>
<div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160; </div>
<div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">SendNotificationAsync</a>(messageTemplate, emailAccount, languageId, tokens, friendsEmail, <span class="keywordtype">string</span>.Empty);</div>
<div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;            }).ToListAsync();</div>
<div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names_html_afc6c336214a33a1f633ed6c8ffbf7db5"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#afc6c336214a33a1f633ed6c8ffbf7db5">Nop.Core.Domain.Messages.MessageTemplateSystemNames.WishlistToFriendMessage</a></div><div class="ttdeci">const string WishlistToFriendMessage</div><div class="ttdoc">Represents system name of 'Email a friend' message with wishlist</div><div class="ttdef"><b>Definition:</b> MessageTemplateSystemNames.cs:155</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3143b4466b7bb816177428d1a9bd4e36">Nop.Services.Messages.WorkflowMessageService._eventPublisher</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a78090f0bc2453cf859de90b6372a3434">Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a434f5fac8645b55ae3fdf530f592935a">Nop.Services.Messages.WorkflowMessageService._storeContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a221ac6aac738883a724d126d2e3da471">Nop.Services.Messages.IMessageTokenProvider.AddCustomerTokensAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html#a2ad58d70e802070fca873ff1c6e77561">Nop.Services.Messages.IMessageTokenProvider.AddStoreTokensAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html#ab98a28cdb13e78df5beea58801148f19">Nop.Core.IStoreContext.GetCurrentStoreAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_system_names.html#afc6c336214a33a1f633ed6c8ffbf7db5">Nop.Core.Domain.Messages.MessageTemplateSystemNames.WishlistToFriendMessage</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentação dos dados membro</h2>
<a id="a780b76526689cfcb5547838c60603518"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a780b76526689cfcb5547838c60603518">&#9670;&nbsp;</a></span>_addressService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_address_service.html">IAddressService</a> Nop.Services.Messages.WorkflowMessageService._addressService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3f848aa49ef68919b1a43236a55c957d">Nop.Services.Messages.WorkflowMessageService.SendNewOrderNoteAddedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3cf231a1ec189b0e854eb328e51c34db">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac380eed2bd7ded145d75934682d1d78a">Nop.Services.Messages.WorkflowMessageService.SendOrderCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a58be329b8abdcda60a55cc7d6b509ddb">Nop.Services.Messages.WorkflowMessageService.SendOrderCompletedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6241f3710c7ebdc4fb1ed256e21791b2">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab85376f003d16992668c0b6e5edcb2df">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afb3c9a5018840890668b5e107b02a8dd">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aabffa6f767a1bf3ad311a318d5ead172">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afcac694205086ab927ae965ba52c99bd">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af7bfaf213a917be96f201757329d472d">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0a66a2a7ce5ddd112a6a7028713cc54b">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentFailedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a79185a8309df5962e42dec81c576e70b">Nop.Services.Messages.WorkflowMessageService.SendReturnRequestStatusChangedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3d80736e1501ec4de2d29030eec5d5e6">Nop.Services.Messages.WorkflowMessageService.SendShipmentDeliveredCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab5c4a2bc5412f704df18c1c0fb2a0c40">Nop.Services.Messages.WorkflowMessageService.SendShipmentSentCustomerNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="a699b4395fec9a7df6d2949a8e100af41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a699b4395fec9a7df6d2949a8e100af41">&#9670;&nbsp;</a></span>_affiliateService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_affiliates_1_1_i_affiliate_service.html">IAffiliateService</a> Nop.Services.Messages.WorkflowMessageService._affiliateService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6241f3710c7ebdc4fb1ed256e21791b2">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afb3c9a5018840890668b5e107b02a8dd">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedAffiliateNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="ad0339f9abae5302b3e8d2694281502ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0339f9abae5302b3e8d2694281502ef">&#9670;&nbsp;</a></span>_commonSettings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_common_1_1_common_settings.html">CommonSettings</a> Nop.Services.Messages.WorkflowMessageService._commonSettings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a295d81ea7710c2d52fc1ed9a33adeece">Nop.Services.Messages.WorkflowMessageService.SendContactUsMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6b3d96284239acf27ddb86a3ab58d186">Nop.Services.Messages.WorkflowMessageService.SendContactVendorMessageAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="a4dde00f8c095dd2b5d058bde78738075"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dde00f8c095dd2b5d058bde78738075">&#9670;&nbsp;</a></span>_customerService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a> Nop.Services.Messages.WorkflowMessageService._customerService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a486229c3f299058bc1e4a3dedbf27f0e">Nop.Services.Messages.WorkflowMessageService.SendBackInStockNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a5c40bd2b8e4c9e4e25f44964811ed82c">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailRevalidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afadea9d04dc47805c432d3941ecea017">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailValidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7e4f7bc55fa2909c186a453d6ef976cf">Nop.Services.Messages.WorkflowMessageService.SendCustomerPasswordRecoveryMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac4c2428c56201bb4783bc40c2d00eed7">Nop.Services.Messages.WorkflowMessageService.SendCustomerWelcomeMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a374616ddbe97dc0722857e05f6ecec70">Nop.Services.Messages.WorkflowMessageService.SendNewForumPostMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4c859d8347db968c7762869b4a70ee2e">Nop.Services.Messages.WorkflowMessageService.SendNewForumTopicMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3cf231a1ec189b0e854eb328e51c34db">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a47207f3e9f1d7a813b5211c81e06a832">Nop.Services.Messages.WorkflowMessageService.SendPrivateMessageNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aec8f5dc342bb89b28e7d8cb0c2cdd3d9">Nop.Services.Messages.WorkflowMessageService.SendProductReviewReplyCustomerNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a79185a8309df5962e42dec81c576e70b">Nop.Services.Messages.WorkflowMessageService.SendReturnRequestStatusChangedCustomerNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="ab3c3f62bab0a4a82e53433875926db49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3c3f62bab0a4a82e53433875926db49">&#9670;&nbsp;</a></span>_emailAccountService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html">IEmailAccountService</a> Nop.Services.Messages.WorkflowMessageService._emailAccountService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="af05695e7fe4acccc08f89d45d8ca3335"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af05695e7fe4acccc08f89d45d8ca3335">&#9670;&nbsp;</a></span>_emailAccountSettings</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_settings.html">EmailAccountSettings</a> Nop.Services.Messages.WorkflowMessageService._emailAccountSettings</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="a3143b4466b7bb816177428d1a9bd4e36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3143b4466b7bb816177428d1a9bd4e36">&#9670;&nbsp;</a></span>_eventPublisher</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_core_1_1_events_1_1_i_event_publisher.html">IEventPublisher</a> Nop.Services.Messages.WorkflowMessageService._eventPublisher</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a486229c3f299058bc1e4a3dedbf27f0e">Nop.Services.Messages.WorkflowMessageService.SendBackInStockNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0c7596b46f178d67d39318dfedd98c5a">Nop.Services.Messages.WorkflowMessageService.SendBlogCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a295d81ea7710c2d52fc1ed9a33adeece">Nop.Services.Messages.WorkflowMessageService.SendContactUsMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6b3d96284239acf27ddb86a3ab58d186">Nop.Services.Messages.WorkflowMessageService.SendContactVendorMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a5c40bd2b8e4c9e4e25f44964811ed82c">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailRevalidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afadea9d04dc47805c432d3941ecea017">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailValidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7e4f7bc55fa2909c186a453d6ef976cf">Nop.Services.Messages.WorkflowMessageService.SendCustomerPasswordRecoveryMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae6a1fcd56a03e8cf34174d6e10e57aeb">Nop.Services.Messages.WorkflowMessageService.SendCustomerRegisteredNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac4c2428c56201bb4783bc40c2d00eed7">Nop.Services.Messages.WorkflowMessageService.SendCustomerWelcomeMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89e349660d03614413a340539d9f9c33">Nop.Services.Messages.WorkflowMessageService.SendGiftCardNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a374616ddbe97dc0722857e05f6ecec70">Nop.Services.Messages.WorkflowMessageService.SendNewForumPostMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4c859d8347db968c7762869b4a70ee2e">Nop.Services.Messages.WorkflowMessageService.SendNewForumTopicMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3f848aa49ef68919b1a43236a55c957d">Nop.Services.Messages.WorkflowMessageService.SendNewOrderNoteAddedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3cf231a1ec189b0e854eb328e51c34db">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8833fe15d53e8aece5a05bc87d50e176">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aea5d06fb9d1a1529e43a5eb511f0c048">Nop.Services.Messages.WorkflowMessageService.SendNewsCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a73e1a0e8826575c240b4ba33cc3ea970">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionActivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a874c291702763976f208b0ffaff9f82f">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionDeactivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae11a46de3c9c71987d976e8eb29b799f">Nop.Services.Messages.WorkflowMessageService.SendNewVatSubmittedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afc53b1a99346833452dba9fd2c517dee">Nop.Services.Messages.WorkflowMessageService.SendNewVendorAccountApplyStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac380eed2bd7ded145d75934682d1d78a">Nop.Services.Messages.WorkflowMessageService.SendOrderCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a58be329b8abdcda60a55cc7d6b509ddb">Nop.Services.Messages.WorkflowMessageService.SendOrderCompletedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6241f3710c7ebdc4fb1ed256e21791b2">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab85376f003d16992668c0b6e5edcb2df">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aacd586e8e65d943fa1967be229e3783f">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aa7f7a29b84c8bec0a4f994aef2a66eda">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afb3c9a5018840890668b5e107b02a8dd">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aabffa6f767a1bf3ad311a318d5ead172">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af3675ecbe0a19839afe9986f5fa0905d">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a459036496bf159c6cbd9faa1476a9153">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afcac694205086ab927ae965ba52c99bd">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac853448f0f3b977d2ccf8102baaa5d75">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a47207f3e9f1d7a813b5211c81e06a832">Nop.Services.Messages.WorkflowMessageService.SendPrivateMessageNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#adf690c4aeefdef0a88d873965b42caf5">Nop.Services.Messages.WorkflowMessageService.SendProductEmailAFriendMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89420429ebd87666a8f4e4e35ebbf18c">Nop.Services.Messages.WorkflowMessageService.SendProductReviewNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aec8f5dc342bb89b28e7d8cb0c2cdd3d9">Nop.Services.Messages.WorkflowMessageService.SendProductReviewReplyCustomerNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af2f3025becf2874631ee3e6bf112a3dd">Nop.Services.Messages.WorkflowMessageService.SendQuantityBelowStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af7bfaf213a917be96f201757329d472d">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2ea003968f3c6230ec777c02d9361273">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0a66a2a7ce5ddd112a6a7028713cc54b">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentFailedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a79185a8309df5962e42dec81c576e70b">Nop.Services.Messages.WorkflowMessageService.SendReturnRequestStatusChangedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3d80736e1501ec4de2d29030eec5d5e6">Nop.Services.Messages.WorkflowMessageService.SendShipmentDeliveredCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab5c4a2bc5412f704df18c1c0fb2a0c40">Nop.Services.Messages.WorkflowMessageService.SendShipmentSentCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2a9e0a8481b7b01826247f88b6ae8838">Nop.Services.Messages.WorkflowMessageService.SendTestEmailAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac0d7b11e96c4cc9e56dd39fa1aed54e4">Nop.Services.Messages.WorkflowMessageService.SendVendorInformationChangeNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a83c4e2553fcce9bad4a4266dd45ac6c0">Nop.Services.Messages.WorkflowMessageService.SendWishlistEmailAFriendMessageAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="a40091b89be964ad33ebbde88a232e276"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40091b89be964ad33ebbde88a232e276">&#9670;&nbsp;</a></span>_languageService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_language_service.html">ILanguageService</a> Nop.Services.Messages.WorkflowMessageService._languageService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4db49081bd4c75c8a1c65416ae0b0b9f">Nop.Services.Messages.WorkflowMessageService.EnsureLanguageIsActiveAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="a685301cd44bf5377e019d1a5d00c24d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a685301cd44bf5377e019d1a5d00c24d6">&#9670;&nbsp;</a></span>_localizationService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_localization_1_1_i_localization_service.html">ILocalizationService</a> Nop.Services.Messages.WorkflowMessageService._localizationService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aff35e3fe885b8b0d1165eb71e8a4e63d">Nop.Services.Messages.WorkflowMessageService.GetEmailAccountOfMessageTemplateAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="a7cc294197be5a4bbbc15a48323f3996c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cc294197be5a4bbbc15a48323f3996c">&#9670;&nbsp;</a></span>_messageTemplateService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_template_service.html">IMessageTemplateService</a> Nop.Services.Messages.WorkflowMessageService._messageTemplateService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a27f72a9bb073c3661716e7ec5a8247f1">Nop.Services.Messages.WorkflowMessageService.GetActiveMessageTemplatesAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2a9e0a8481b7b01826247f88b6ae8838">Nop.Services.Messages.WorkflowMessageService.SendTestEmailAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="a78090f0bc2453cf859de90b6372a3434"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78090f0bc2453cf859de90b6372a3434">&#9670;&nbsp;</a></span>_messageTokenProvider</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_message_token_provider.html">IMessageTokenProvider</a> Nop.Services.Messages.WorkflowMessageService._messageTokenProvider</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a486229c3f299058bc1e4a3dedbf27f0e">Nop.Services.Messages.WorkflowMessageService.SendBackInStockNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0c7596b46f178d67d39318dfedd98c5a">Nop.Services.Messages.WorkflowMessageService.SendBlogCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a295d81ea7710c2d52fc1ed9a33adeece">Nop.Services.Messages.WorkflowMessageService.SendContactUsMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6b3d96284239acf27ddb86a3ab58d186">Nop.Services.Messages.WorkflowMessageService.SendContactVendorMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a5c40bd2b8e4c9e4e25f44964811ed82c">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailRevalidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afadea9d04dc47805c432d3941ecea017">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailValidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7e4f7bc55fa2909c186a453d6ef976cf">Nop.Services.Messages.WorkflowMessageService.SendCustomerPasswordRecoveryMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae6a1fcd56a03e8cf34174d6e10e57aeb">Nop.Services.Messages.WorkflowMessageService.SendCustomerRegisteredNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac4c2428c56201bb4783bc40c2d00eed7">Nop.Services.Messages.WorkflowMessageService.SendCustomerWelcomeMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89e349660d03614413a340539d9f9c33">Nop.Services.Messages.WorkflowMessageService.SendGiftCardNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a374616ddbe97dc0722857e05f6ecec70">Nop.Services.Messages.WorkflowMessageService.SendNewForumPostMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4c859d8347db968c7762869b4a70ee2e">Nop.Services.Messages.WorkflowMessageService.SendNewForumTopicMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3f848aa49ef68919b1a43236a55c957d">Nop.Services.Messages.WorkflowMessageService.SendNewOrderNoteAddedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3cf231a1ec189b0e854eb328e51c34db">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8833fe15d53e8aece5a05bc87d50e176">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aea5d06fb9d1a1529e43a5eb511f0c048">Nop.Services.Messages.WorkflowMessageService.SendNewsCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a73e1a0e8826575c240b4ba33cc3ea970">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionActivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a874c291702763976f208b0ffaff9f82f">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionDeactivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae11a46de3c9c71987d976e8eb29b799f">Nop.Services.Messages.WorkflowMessageService.SendNewVatSubmittedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afc53b1a99346833452dba9fd2c517dee">Nop.Services.Messages.WorkflowMessageService.SendNewVendorAccountApplyStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac380eed2bd7ded145d75934682d1d78a">Nop.Services.Messages.WorkflowMessageService.SendOrderCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a58be329b8abdcda60a55cc7d6b509ddb">Nop.Services.Messages.WorkflowMessageService.SendOrderCompletedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6241f3710c7ebdc4fb1ed256e21791b2">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab85376f003d16992668c0b6e5edcb2df">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aacd586e8e65d943fa1967be229e3783f">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aa7f7a29b84c8bec0a4f994aef2a66eda">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afb3c9a5018840890668b5e107b02a8dd">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aabffa6f767a1bf3ad311a318d5ead172">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af3675ecbe0a19839afe9986f5fa0905d">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a459036496bf159c6cbd9faa1476a9153">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afcac694205086ab927ae965ba52c99bd">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac853448f0f3b977d2ccf8102baaa5d75">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a47207f3e9f1d7a813b5211c81e06a832">Nop.Services.Messages.WorkflowMessageService.SendPrivateMessageNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#adf690c4aeefdef0a88d873965b42caf5">Nop.Services.Messages.WorkflowMessageService.SendProductEmailAFriendMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89420429ebd87666a8f4e4e35ebbf18c">Nop.Services.Messages.WorkflowMessageService.SendProductReviewNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aec8f5dc342bb89b28e7d8cb0c2cdd3d9">Nop.Services.Messages.WorkflowMessageService.SendProductReviewReplyCustomerNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af2f3025becf2874631ee3e6bf112a3dd">Nop.Services.Messages.WorkflowMessageService.SendQuantityBelowStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af7bfaf213a917be96f201757329d472d">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2ea003968f3c6230ec777c02d9361273">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0a66a2a7ce5ddd112a6a7028713cc54b">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentFailedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a79185a8309df5962e42dec81c576e70b">Nop.Services.Messages.WorkflowMessageService.SendReturnRequestStatusChangedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3d80736e1501ec4de2d29030eec5d5e6">Nop.Services.Messages.WorkflowMessageService.SendShipmentDeliveredCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab5c4a2bc5412f704df18c1c0fb2a0c40">Nop.Services.Messages.WorkflowMessageService.SendShipmentSentCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac0d7b11e96c4cc9e56dd39fa1aed54e4">Nop.Services.Messages.WorkflowMessageService.SendVendorInformationChangeNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a83c4e2553fcce9bad4a4266dd45ac6c0">Nop.Services.Messages.WorkflowMessageService.SendWishlistEmailAFriendMessageAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="ad515a207bd88539700ec721b238a91c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad515a207bd88539700ec721b238a91c1">&#9670;&nbsp;</a></span>_orderService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_orders_1_1_i_order_service.html">IOrderService</a> Nop.Services.Messages.WorkflowMessageService._orderService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89e349660d03614413a340539d9f9c33">Nop.Services.Messages.WorkflowMessageService.SendGiftCardNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3f848aa49ef68919b1a43236a55c957d">Nop.Services.Messages.WorkflowMessageService.SendNewOrderNoteAddedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af7bfaf213a917be96f201757329d472d">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2ea003968f3c6230ec777c02d9361273">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0a66a2a7ce5ddd112a6a7028713cc54b">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentFailedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3d80736e1501ec4de2d29030eec5d5e6">Nop.Services.Messages.WorkflowMessageService.SendShipmentDeliveredCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab5c4a2bc5412f704df18c1c0fb2a0c40">Nop.Services.Messages.WorkflowMessageService.SendShipmentSentCustomerNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="ac316d6fa69923bcd5951c06fcdea6d09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac316d6fa69923bcd5951c06fcdea6d09">&#9670;&nbsp;</a></span>_productService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_catalog_1_1_i_product_service.html">IProductService</a> Nop.Services.Messages.WorkflowMessageService._productService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2de19acac576d2c6e690a0eec9ac3b48">Nop.Services.Messages.WorkflowMessageService.SendQuantityBelowStoreOwnerNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="a6fb2131780dc25b002bf2e9d56a3bca6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fb2131780dc25b002bf2e9d56a3bca6">&#9670;&nbsp;</a></span>_queuedEmailService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_queued_email_service.html">IQueuedEmailService</a> Nop.Services.Messages.WorkflowMessageService._queuedEmailService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="a434f5fac8645b55ae3fdf530f592935a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a434f5fac8645b55ae3fdf530f592935a">&#9670;&nbsp;</a></span>_storeContext</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_core_1_1_i_store_context.html">IStoreContext</a> Nop.Services.Messages.WorkflowMessageService._storeContext</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a486229c3f299058bc1e4a3dedbf27f0e">Nop.Services.Messages.WorkflowMessageService.SendBackInStockNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0c7596b46f178d67d39318dfedd98c5a">Nop.Services.Messages.WorkflowMessageService.SendBlogCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a295d81ea7710c2d52fc1ed9a33adeece">Nop.Services.Messages.WorkflowMessageService.SendContactUsMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6b3d96284239acf27ddb86a3ab58d186">Nop.Services.Messages.WorkflowMessageService.SendContactVendorMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a5c40bd2b8e4c9e4e25f44964811ed82c">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailRevalidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afadea9d04dc47805c432d3941ecea017">Nop.Services.Messages.WorkflowMessageService.SendCustomerEmailValidationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a7e4f7bc55fa2909c186a453d6ef976cf">Nop.Services.Messages.WorkflowMessageService.SendCustomerPasswordRecoveryMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae6a1fcd56a03e8cf34174d6e10e57aeb">Nop.Services.Messages.WorkflowMessageService.SendCustomerRegisteredNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac4c2428c56201bb4783bc40c2d00eed7">Nop.Services.Messages.WorkflowMessageService.SendCustomerWelcomeMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89e349660d03614413a340539d9f9c33">Nop.Services.Messages.WorkflowMessageService.SendGiftCardNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a374616ddbe97dc0722857e05f6ecec70">Nop.Services.Messages.WorkflowMessageService.SendNewForumPostMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a4c859d8347db968c7762869b4a70ee2e">Nop.Services.Messages.WorkflowMessageService.SendNewForumTopicMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3f848aa49ef68919b1a43236a55c957d">Nop.Services.Messages.WorkflowMessageService.SendNewOrderNoteAddedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3cf231a1ec189b0e854eb328e51c34db">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8833fe15d53e8aece5a05bc87d50e176">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aea5d06fb9d1a1529e43a5eb511f0c048">Nop.Services.Messages.WorkflowMessageService.SendNewsCommentNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a73e1a0e8826575c240b4ba33cc3ea970">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionActivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a874c291702763976f208b0ffaff9f82f">Nop.Services.Messages.WorkflowMessageService.SendNewsLetterSubscriptionDeactivationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ae11a46de3c9c71987d976e8eb29b799f">Nop.Services.Messages.WorkflowMessageService.SendNewVatSubmittedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afc53b1a99346833452dba9fd2c517dee">Nop.Services.Messages.WorkflowMessageService.SendNewVendorAccountApplyStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac380eed2bd7ded145d75934682d1d78a">Nop.Services.Messages.WorkflowMessageService.SendOrderCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a58be329b8abdcda60a55cc7d6b509ddb">Nop.Services.Messages.WorkflowMessageService.SendOrderCompletedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6241f3710c7ebdc4fb1ed256e21791b2">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab85376f003d16992668c0b6e5edcb2df">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aacd586e8e65d943fa1967be229e3783f">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aa7f7a29b84c8bec0a4f994aef2a66eda">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afb3c9a5018840890668b5e107b02a8dd">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aabffa6f767a1bf3ad311a318d5ead172">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af3675ecbe0a19839afe9986f5fa0905d">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a459036496bf159c6cbd9faa1476a9153">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afcac694205086ab927ae965ba52c99bd">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac853448f0f3b977d2ccf8102baaa5d75">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a47207f3e9f1d7a813b5211c81e06a832">Nop.Services.Messages.WorkflowMessageService.SendPrivateMessageNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#adf690c4aeefdef0a88d873965b42caf5">Nop.Services.Messages.WorkflowMessageService.SendProductEmailAFriendMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89420429ebd87666a8f4e4e35ebbf18c">Nop.Services.Messages.WorkflowMessageService.SendProductReviewNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aec8f5dc342bb89b28e7d8cb0c2cdd3d9">Nop.Services.Messages.WorkflowMessageService.SendProductReviewReplyCustomerNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af2f3025becf2874631ee3e6bf112a3dd">Nop.Services.Messages.WorkflowMessageService.SendQuantityBelowStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af7bfaf213a917be96f201757329d472d">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2ea003968f3c6230ec777c02d9361273">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0a66a2a7ce5ddd112a6a7028713cc54b">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentFailedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a79185a8309df5962e42dec81c576e70b">Nop.Services.Messages.WorkflowMessageService.SendReturnRequestStatusChangedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3d80736e1501ec4de2d29030eec5d5e6">Nop.Services.Messages.WorkflowMessageService.SendShipmentDeliveredCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab5c4a2bc5412f704df18c1c0fb2a0c40">Nop.Services.Messages.WorkflowMessageService.SendShipmentSentCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac0d7b11e96c4cc9e56dd39fa1aed54e4">Nop.Services.Messages.WorkflowMessageService.SendVendorInformationChangeNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a83c4e2553fcce9bad4a4266dd45ac6c0">Nop.Services.Messages.WorkflowMessageService.SendWishlistEmailAFriendMessageAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="a31fcc6563d3a003b29d5f85af53e2537"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31fcc6563d3a003b29d5f85af53e2537">&#9670;&nbsp;</a></span>_storeService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html">IStoreService</a> Nop.Services.Messages.WorkflowMessageService._storeService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a486229c3f299058bc1e4a3dedbf27f0e">Nop.Services.Messages.WorkflowMessageService.SendBackInStockNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a89e349660d03614413a340539d9f9c33">Nop.Services.Messages.WorkflowMessageService.SendGiftCardNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3f848aa49ef68919b1a43236a55c957d">Nop.Services.Messages.WorkflowMessageService.SendNewOrderNoteAddedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3cf231a1ec189b0e854eb328e51c34db">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a8833fe15d53e8aece5a05bc87d50e176">Nop.Services.Messages.WorkflowMessageService.SendNewReturnRequestStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac380eed2bd7ded145d75934682d1d78a">Nop.Services.Messages.WorkflowMessageService.SendOrderCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a58be329b8abdcda60a55cc7d6b509ddb">Nop.Services.Messages.WorkflowMessageService.SendOrderCompletedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a6241f3710c7ebdc4fb1ed256e21791b2">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab85376f003d16992668c0b6e5edcb2df">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aacd586e8e65d943fa1967be229e3783f">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aa7f7a29b84c8bec0a4f994aef2a66eda">Nop.Services.Messages.WorkflowMessageService.SendOrderPaidVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afb3c9a5018840890668b5e107b02a8dd">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedAffiliateNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aabffa6f767a1bf3ad311a318d5ead172">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af3675ecbe0a19839afe9986f5fa0905d">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a459036496bf159c6cbd9faa1476a9153">Nop.Services.Messages.WorkflowMessageService.SendOrderPlacedVendorNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#afcac694205086ab927ae965ba52c99bd">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ac853448f0f3b977d2ccf8102baaa5d75">Nop.Services.Messages.WorkflowMessageService.SendOrderRefundedStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a47207f3e9f1d7a813b5211c81e06a832">Nop.Services.Messages.WorkflowMessageService.SendPrivateMessageNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#aec8f5dc342bb89b28e7d8cb0c2cdd3d9">Nop.Services.Messages.WorkflowMessageService.SendProductReviewReplyCustomerNotificationMessageAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#af7bfaf213a917be96f201757329d472d">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a2ea003968f3c6230ec777c02d9361273">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentCancelledStoreOwnerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a0a66a2a7ce5ddd112a6a7028713cc54b">Nop.Services.Messages.WorkflowMessageService.SendRecurringPaymentFailedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a79185a8309df5962e42dec81c576e70b">Nop.Services.Messages.WorkflowMessageService.SendReturnRequestStatusChangedCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a3d80736e1501ec4de2d29030eec5d5e6">Nop.Services.Messages.WorkflowMessageService.SendShipmentDeliveredCustomerNotificationAsync()</a>, <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#ab5c4a2bc5412f704df18c1c0fb2a0c40">Nop.Services.Messages.WorkflowMessageService.SendShipmentSentCustomerNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<a id="a8c58747ccbdf01ca7cf418e74238dc0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c58747ccbdf01ca7cf418e74238dc0d">&#9670;&nbsp;</a></span>_tokenizer</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_tokenizer.html">ITokenizer</a> Nop.Services.Messages.WorkflowMessageService._tokenizer</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a1fb21eadda33ec74eb783fbb7f28e889">Nop.Services.Messages.WorkflowMessageService.SendNotificationAsync()</a> e <a class="el" href="class_nop_1_1_services_1_1_messages_1_1_workflow_message_service.html#a87c0f361992258ec712b18c3183627d5">Nop.Services.Messages.WorkflowMessageService.WorkflowMessageService()</a>.</p>

</div>
</div>
<hr/>A documentação para esta classe foi gerada a partir do seguinte ficheiro:<ul>
<li>C:/Users/gabri/Documents/Projetos/GitHub/Estudos/Nopcommercer plugin/nopCommerce_4.40.3_Source - Copia/src/Libraries/Nop.Services/Messages/<a class="el" href="_workflow_message_service_8cs.html">WorkflowMessageService.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Gerado por&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
