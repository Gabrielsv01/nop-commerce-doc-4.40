<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NopCommerce 4.40: Referência à classe Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="download.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">NopCommerce 4.40
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Gerado por Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Localizar','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Localizar');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespace_nop.html">Nop</a></li><li class="navelem"><a class="el" href="namespace_nop_1_1_plugin.html">Plugin</a></li><li class="navelem"><a class="el" href="namespace_nop_1_1_plugin_1_1_misc.html">Misc</a></li><li class="navelem"><a class="el" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue.html">Sendinblue</a></li><li class="navelem"><a class="el" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services.html">Services</a></li><li class="navelem"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html">SendinblueManager</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Membros públicos</a> &#124;
<a href="#pri-methods">Membros privados</a> &#124;
<a href="#pri-attribs">Atributos Privados</a> &#124;
<a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager-members.html">Mostrar lista completa dos membros</a>  </div>
  <div class="headertitle">
<div class="title">Referência à classe Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager</div>  </div>
</div><!--header-->
<div class="contents">

<p>Represents <a class="el" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue.html">Sendinblue</a> manager  
 <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#details">Mais...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Membros públicos</h2></td></tr>
<tr class="memitem:a0a90c1fa54ceaec2e2c7f7c2be53e31a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">SendinblueManager</a> (IActionContextAccessor actionContextAccessor, <a class="el" href="interface_nop_1_1_services_1_1_directory_1_1_i_country_service.html">ICountryService</a> countryService, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a> customerService, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html">IEmailAccountService</a> emailAccountService, <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_generic_attribute_service.html">IGenericAttributeService</a> genericAttributeService, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html">ILogger</a> logger, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html">INewsLetterSubscriptionService</a> newsLetterSubscriptionService, <a class="el" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html">ISettingService</a> settingService, <a class="el" href="interface_nop_1_1_services_1_1_directory_1_1_i_state_province_service.html">IStateProvinceService</a> stateProvinceService, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html">IStoreService</a> storeService, IUrlHelperFactory urlHelperFactory, <a class="el" href="interface_nop_1_1_core_1_1_i_web_helper.html">IWebHelper</a> webHelper, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html">IWorkContext</a> workContext)</td></tr>
<tr class="separator:a0a90c1fa54ceaec2e2c7f7c2be53e31a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf501cbb95ffb7dcd62c8e2e649d1a3f"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt;(<a class="el" href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">NotifyType</a> Type, string Message)&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#adf501cbb95ffb7dcd62c8e2e649d1a3f">SynchronizeAsync</a> (bool synchronizationTask=true, int storeId=0)</td></tr>
<tr class="memdesc:adf501cbb95ffb7dcd62c8e2e649d1a3f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize contacts  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#adf501cbb95ffb7dcd62c8e2e649d1a3f">Mais...</a><br /></td></tr>
<tr class="separator:adf501cbb95ffb7dcd62c8e2e649d1a3f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d20d54a03c56570cb397256fbb4397c"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4d20d54a03c56570cb397256fbb4397c">SubscribeAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html">NewsLetterSubscription</a> subscription)</td></tr>
<tr class="memdesc:a4d20d54a03c56570cb397256fbb4397c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Subscribe new contact  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4d20d54a03c56570cb397256fbb4397c">Mais...</a><br /></td></tr>
<tr class="separator:a4d20d54a03c56570cb397256fbb4397c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcb2e00c505e7fc962243945b9ea8622"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#afcb2e00c505e7fc962243945b9ea8622">UnsubscribeAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html">NewsLetterSubscription</a> subscription)</td></tr>
<tr class="memdesc:afcb2e00c505e7fc962243945b9ea8622"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unsubscribe contact  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#afcb2e00c505e7fc962243945b9ea8622">Mais...</a><br /></td></tr>
<tr class="separator:afcb2e00c505e7fc962243945b9ea8622"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa1d28493ef89c36c8247d15a1de2c21"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aaa1d28493ef89c36c8247d15a1de2c21">UnsubscribeWebhookAsync</a> (string unsubscribeContact)</td></tr>
<tr class="memdesc:aaa1d28493ef89c36c8247d15a1de2c21"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unsubscribe contact  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aaa1d28493ef89c36c8247d15a1de2c21">Mais...</a><br /></td></tr>
<tr class="separator:aaa1d28493ef89c36c8247d15a1de2c21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4964f2bce40ba7efd426803ccd7e4b48"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; int &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4964f2bce40ba7efd426803ccd7e4b48">GetUnsubscribeWebHookIdAsync</a> ()</td></tr>
<tr class="memdesc:a4964f2bce40ba7efd426803ccd7e4b48"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create webhook to get notification about unsubscribed contacts  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4964f2bce40ba7efd426803ccd7e4b48">Mais...</a><br /></td></tr>
<tr class="separator:a4964f2bce40ba7efd426803ccd7e4b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abacb075f519d170264e4d704b222799e"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#abacb075f519d170264e4d704b222799e">UpdateContactAfterCompletingOrderAsync</a> (<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a> order)</td></tr>
<tr class="memdesc:abacb075f519d170264e4d704b222799e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update contact after completing order  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#abacb075f519d170264e4d704b222799e">Mais...</a><br /></td></tr>
<tr class="separator:abacb075f519d170264e4d704b222799e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4923c7480d035edcc3a6183755696035"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;(string Info, bool MarketingAutomationEnabled, string MAkey, string Errors)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4923c7480d035edcc3a6183755696035">GetAccountInfoAsync</a> ()</td></tr>
<tr class="memdesc:a4923c7480d035edcc3a6183755696035"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get account information  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4923c7480d035edcc3a6183755696035">Mais...</a><br /></td></tr>
<tr class="separator:a4923c7480d035edcc3a6183755696035"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6884794daa0a30c620da04fa26c322c4"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;(IList&lt;(string Id, string Name)&gt; Lists, string Errors)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6884794daa0a30c620da04fa26c322c4">GetListsAsync</a> ()</td></tr>
<tr class="memdesc:a6884794daa0a30c620da04fa26c322c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get available lists to synchronize contacts  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6884794daa0a30c620da04fa26c322c4">Mais...</a><br /></td></tr>
<tr class="separator:a6884794daa0a30c620da04fa26c322c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a074172dd27114d1a35fb926532cba652"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;(IList&lt;(string Id, string Name)&gt; Lists, string Errors)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a074172dd27114d1a35fb926532cba652">GetSendersAsync</a> ()</td></tr>
<tr class="memdesc:a074172dd27114d1a35fb926532cba652"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get available senders of transactional emails  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a074172dd27114d1a35fb926532cba652">Mais...</a><br /></td></tr>
<tr class="separator:a074172dd27114d1a35fb926532cba652"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3da4b6c237604daff37b7dd993a692cc"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a3da4b6c237604daff37b7dd993a692cc">GetAccountLanguageAsync</a> ()</td></tr>
<tr class="memdesc:a3da4b6c237604daff37b7dd993a692cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get account language  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a3da4b6c237604daff37b7dd993a692cc">Mais...</a><br /></td></tr>
<tr class="separator:a3da4b6c237604daff37b7dd993a692cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae20d3092b8da0eb89cd5c3479b9de19c"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ae20d3092b8da0eb89cd5c3479b9de19c">PrepareAttributesAsync</a> ()</td></tr>
<tr class="memdesc:ae20d3092b8da0eb89cd5c3479b9de19c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check and create missing attributes in account  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ae20d3092b8da0eb89cd5c3479b9de19c">Mais...</a><br /></td></tr>
<tr class="separator:ae20d3092b8da0eb89cd5c3479b9de19c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a113dc650cf974a49fe9e984fce44669a"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a113dc650cf974a49fe9e984fce44669a">PrepareTransactionalAttributesAsync</a> (IList&lt; string &gt; tokens)</td></tr>
<tr class="memdesc:a113dc650cf974a49fe9e984fce44669a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move message template tokens to transactional attributes  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a113dc650cf974a49fe9e984fce44669a">Mais...</a><br /></td></tr>
<tr class="separator:a113dc650cf974a49fe9e984fce44669a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e8e7a0ffb51a10e541631ab54e7c10f"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;(bool Enabled, string Errors)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2e8e7a0ffb51a10e541631ab54e7c10f">SmtpIsEnabledAsync</a> ()</td></tr>
<tr class="memdesc:a2e8e7a0ffb51a10e541631ab54e7c10f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check whether SMTP is enabled on account  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2e8e7a0ffb51a10e541631ab54e7c10f">Mais...</a><br /></td></tr>
<tr class="separator:a2e8e7a0ffb51a10e541631ab54e7c10f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1787519a1300c8ed4380547bb6a645df"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;(int Id, string Errors)&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a1787519a1300c8ed4380547bb6a645df">GetEmailAccountIdAsync</a> (string senderId, string smtpKey)</td></tr>
<tr class="memdesc:a1787519a1300c8ed4380547bb6a645df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get email account identifier  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a1787519a1300c8ed4380547bb6a645df">Mais...</a><br /></td></tr>
<tr class="separator:a1787519a1300c8ed4380547bb6a645df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afcee3fd593c1b891cbcaf1ee06010083"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; int?&gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#afcee3fd593c1b891cbcaf1ee06010083">GetTemplateIdAsync</a> (int? templateId, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html">MessageTemplate</a> message, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html">EmailAccount</a> emailAccount)</td></tr>
<tr class="memdesc:afcee3fd593c1b891cbcaf1ee06010083"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get email template identifier  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#afcee3fd593c1b891cbcaf1ee06010083">Mais...</a><br /></td></tr>
<tr class="separator:afcee3fd593c1b891cbcaf1ee06010083"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf041cb1e69a6d2cb37692f25c2504b6"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_queued_email.html">QueuedEmail</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aaf041cb1e69a6d2cb37692f25c2504b6">GetQueuedEmailFromTemplateAsync</a> (int templateId)</td></tr>
<tr class="memdesc:aaf041cb1e69a6d2cb37692f25c2504b6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert <a class="el" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue.html">Sendinblue</a> email template to queued email  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aaf041cb1e69a6d2cb37692f25c2504b6">Mais...</a><br /></td></tr>
<tr class="separator:aaf041cb1e69a6d2cb37692f25c2504b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4650586c3ba5fc00d8f4e93563e416e6"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4650586c3ba5fc00d8f4e93563e416e6">SendSMSAsync</a> (string to, string from, string text)</td></tr>
<tr class="memdesc:a4650586c3ba5fc00d8f4e93563e416e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send SMS  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4650586c3ba5fc00d8f4e93563e416e6">Mais...</a><br /></td></tr>
<tr class="separator:a4650586c3ba5fc00d8f4e93563e416e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab77a0d818576557d0ddfe07f4b157de5"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab77a0d818576557d0ddfe07f4b157de5">SendSMSCampaignAsync</a> (int listId, string from, string text)</td></tr>
<tr class="memdesc:ab77a0d818576557d0ddfe07f4b157de5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send SMS campaign  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab77a0d818576557d0ddfe07f4b157de5">Mais...</a><br /></td></tr>
<tr class="separator:ab77a0d818576557d0ddfe07f4b157de5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Membros privados</h2></td></tr>
<tr class="memitem:aac08a202413f156ad3b6d934e697e15f"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; TClient &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aac08a202413f156ad3b6d934e697e15f">CreateApiClientAsync&lt; TClient &gt;</a> (Func&lt; Configuration, TClient &gt; clientCtor)</td></tr>
<tr class="memdesc:aac08a202413f156ad3b6d934e697e15f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepare API client  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aac08a202413f156ad3b6d934e697e15f">Mais...</a><br /></td></tr>
<tr class="separator:aac08a202413f156ad3b6d934e697e15f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1e5fff79ae435d953024eb2a55209da"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt;(<a class="el" href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">NotifyType</a> Type, string Message)&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">ImportContactsAsync</a> (IList&lt; int &gt; storeIds)</td></tr>
<tr class="memdesc:ab1e5fff79ae435d953024eb2a55209da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Import contacts from passed stores to account  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Mais...</a><br /></td></tr>
<tr class="separator:ab1e5fff79ae435d953024eb2a55209da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dbd8280cad068c2d23929d377d08b23"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; IList&lt;(<a class="el" href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">NotifyType</a> Type, string Message)&gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a7dbd8280cad068c2d23929d377d08b23">ExportContactsAsync</a> (IList&lt; int &gt; storeIds)</td></tr>
<tr class="memdesc:a7dbd8280cad068c2d23929d377d08b23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Export contacts from account to passed stores  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a7dbd8280cad068c2d23929d377d08b23">Mais...</a><br /></td></tr>
<tr class="separator:a7dbd8280cad068c2d23929d377d08b23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b02ae0d9a70e55c42b79eea47dd2618"><td class="memItemLeft" align="right" valign="top">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt; string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2b02ae0d9a70e55c42b79eea47dd2618">CreateAttibutesAsync</a> (IList&lt;(CategoryEnum Category, string Name, string Value, CreateAttribute.TypeEnum? Type)&gt; attributes)</td></tr>
<tr class="memdesc:a2b02ae0d9a70e55c42b79eea47dd2618"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add new service attribute in account  <a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2b02ae0d9a70e55c42b79eea47dd2618">Mais...</a><br /></td></tr>
<tr class="separator:a2b02ae0d9a70e55c42b79eea47dd2618"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Atributos Privados</h2></td></tr>
<tr class="memitem:a914f23690b1ad8e4cd96e268ee57229b"><td class="memItemLeft" align="right" valign="top">readonly IActionContextAccessor&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a914f23690b1ad8e4cd96e268ee57229b">_actionContextAccessor</a></td></tr>
<tr class="separator:a914f23690b1ad8e4cd96e268ee57229b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ffa30e9d41ec0d7f80e4d29308c8233"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_directory_1_1_i_country_service.html">ICountryService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0ffa30e9d41ec0d7f80e4d29308c8233">_countryService</a></td></tr>
<tr class="separator:a0ffa30e9d41ec0d7f80e4d29308c8233"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a786b95982b8815ec2d18c62e08ff2d89"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a786b95982b8815ec2d18c62e08ff2d89">_customerService</a></td></tr>
<tr class="separator:a786b95982b8815ec2d18c62e08ff2d89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c00e6028e0ca396dd57817a145921b6"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html">IEmailAccountService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a5c00e6028e0ca396dd57817a145921b6">_emailAccountService</a></td></tr>
<tr class="separator:a5c00e6028e0ca396dd57817a145921b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba3413a44217dca55a2ee968fb6a7344"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_generic_attribute_service.html">IGenericAttributeService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a></td></tr>
<tr class="separator:aba3413a44217dca55a2ee968fb6a7344"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a410eb60dab0f84f26ee690e9694bc184"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html">ILogger</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a></td></tr>
<tr class="separator:a410eb60dab0f84f26ee690e9694bc184"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6bebca75bc1227c74b70ca74f39ecd6"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html">INewsLetterSubscriptionService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#af6bebca75bc1227c74b70ca74f39ecd6">_newsLetterSubscriptionService</a></td></tr>
<tr class="separator:af6bebca75bc1227c74b70ca74f39ecd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ab4a62544bcd93b3e71a4d0c74bc1de"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html">ISettingService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a></td></tr>
<tr class="separator:a6ab4a62544bcd93b3e71a4d0c74bc1de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64ceeb0bc1330ce7e10caf79cc28e05f"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_directory_1_1_i_state_province_service.html">IStateProvinceService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a64ceeb0bc1330ce7e10caf79cc28e05f">_stateProvinceService</a></td></tr>
<tr class="separator:a64ceeb0bc1330ce7e10caf79cc28e05f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e8b461eca09e6935c7cde5a271c40e1"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html">IStoreService</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4e8b461eca09e6935c7cde5a271c40e1">_storeService</a></td></tr>
<tr class="separator:a4e8b461eca09e6935c7cde5a271c40e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad67cc6bb2af3e7488445dc44fdf20293"><td class="memItemLeft" align="right" valign="top">readonly IUrlHelperFactory&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ad67cc6bb2af3e7488445dc44fdf20293">_urlHelperFactory</a></td></tr>
<tr class="separator:ad67cc6bb2af3e7488445dc44fdf20293"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef75c004de27abf47b34999a80d8c3ca"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_core_1_1_i_web_helper.html">IWebHelper</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aef75c004de27abf47b34999a80d8c3ca">_webHelper</a></td></tr>
<tr class="separator:aef75c004de27abf47b34999a80d8c3ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac82b0663fc34ba5f8cc08232cded4d2f"><td class="memItemLeft" align="right" valign="top">readonly <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html">IWorkContext</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a></td></tr>
<tr class="separator:ac82b0663fc34ba5f8cc08232cded4d2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Descrição detalhada</h2>
<div class="textblock"><p>Represents <a class="el" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue.html">Sendinblue</a> manager </p>
</div><h2 class="groupheader">Documentação dos Construtores &amp; Destrutor</h2>
<a id="a0a90c1fa54ceaec2e2c7f7c2be53e31a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a90c1fa54ceaec2e2c7f7c2be53e31a">&#9670;&nbsp;</a></span>SendinblueManager()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager </td>
          <td>(</td>
          <td class="paramtype">IActionContextAccessor&#160;</td>
          <td class="paramname"><em>actionContextAccessor</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_directory_1_1_i_country_service.html">ICountryService</a>&#160;</td>
          <td class="paramname"><em>countryService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a>&#160;</td>
          <td class="paramname"><em>customerService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html">IEmailAccountService</a>&#160;</td>
          <td class="paramname"><em>emailAccountService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_generic_attribute_service.html">IGenericAttributeService</a>&#160;</td>
          <td class="paramname"><em>genericAttributeService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html">ILogger</a>&#160;</td>
          <td class="paramname"><em>logger</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html">INewsLetterSubscriptionService</a>&#160;</td>
          <td class="paramname"><em>newsLetterSubscriptionService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html">ISettingService</a>&#160;</td>
          <td class="paramname"><em>settingService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_directory_1_1_i_state_province_service.html">IStateProvinceService</a>&#160;</td>
          <td class="paramname"><em>stateProvinceService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html">IStoreService</a>&#160;</td>
          <td class="paramname"><em>storeService</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">IUrlHelperFactory&#160;</td>
          <td class="paramname"><em>urlHelperFactory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_core_1_1_i_web_helper.html">IWebHelper</a>&#160;</td>
          <td class="paramname"><em>webHelper</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html">IWorkContext</a>&#160;</td>
          <td class="paramname"><em>workContext</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        {</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a914f23690b1ad8e4cd96e268ee57229b">_actionContextAccessor</a> = actionContextAccessor;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0ffa30e9d41ec0d7f80e4d29308c8233">_countryService</a> = countryService;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a786b95982b8815ec2d18c62e08ff2d89">_customerService</a> = customerService;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a5c00e6028e0ca396dd57817a145921b6">_emailAccountService</a> = emailAccountService;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a> = genericAttributeService;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a> = logger;</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#af6bebca75bc1227c74b70ca74f39ecd6">_newsLetterSubscriptionService</a> = newsLetterSubscriptionService;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a> = settingService;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a64ceeb0bc1330ce7e10caf79cc28e05f">_stateProvinceService</a> = stateProvinceService;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4e8b461eca09e6935c7cde5a271c40e1">_storeService</a> = storeService;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ad67cc6bb2af3e7488445dc44fdf20293">_urlHelperFactory</a> = urlHelperFactory;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aef75c004de27abf47b34999a80d8c3ca">_webHelper</a> = webHelper;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a> = workContext;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_a0ffa30e9d41ec0d7f80e4d29308c8233"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0ffa30e9d41ec0d7f80e4d29308c8233">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._countryService</a></div><div class="ttdeci">readonly ICountryService _countryService</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:39</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_a410eb60dab0f84f26ee690e9694bc184"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a></div><div class="ttdeci">readonly ILogger _logger</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:43</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_a4e8b461eca09e6935c7cde5a271c40e1"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4e8b461eca09e6935c7cde5a271c40e1">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._storeService</a></div><div class="ttdeci">readonly IStoreService _storeService</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:47</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_a5c00e6028e0ca396dd57817a145921b6"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a5c00e6028e0ca396dd57817a145921b6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._emailAccountService</a></div><div class="ttdeci">readonly IEmailAccountService _emailAccountService</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:41</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_a64ceeb0bc1330ce7e10caf79cc28e05f"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a64ceeb0bc1330ce7e10caf79cc28e05f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._stateProvinceService</a></div><div class="ttdeci">readonly IStateProvinceService _stateProvinceService</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:46</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_a6ab4a62544bcd93b3e71a4d0c74bc1de"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._settingService</a></div><div class="ttdeci">readonly ISettingService _settingService</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:45</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_a786b95982b8815ec2d18c62e08ff2d89"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a786b95982b8815ec2d18c62e08ff2d89">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._customerService</a></div><div class="ttdeci">readonly ICustomerService _customerService</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:40</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_a914f23690b1ad8e4cd96e268ee57229b"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a914f23690b1ad8e4cd96e268ee57229b">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._actionContextAccessor</a></div><div class="ttdeci">readonly IActionContextAccessor _actionContextAccessor</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:38</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_aba3413a44217dca55a2ee968fb6a7344"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._genericAttributeService</a></div><div class="ttdeci">readonly IGenericAttributeService _genericAttributeService</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:42</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_ac82b0663fc34ba5f8cc08232cded4d2f"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a></div><div class="ttdeci">readonly IWorkContext _workContext</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:50</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_ad67cc6bb2af3e7488445dc44fdf20293"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ad67cc6bb2af3e7488445dc44fdf20293">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._urlHelperFactory</a></div><div class="ttdeci">readonly IUrlHelperFactory _urlHelperFactory</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:48</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_aef75c004de27abf47b34999a80d8c3ca"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aef75c004de27abf47b34999a80d8c3ca">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._webHelper</a></div><div class="ttdeci">readonly IWebHelper _webHelper</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:49</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_af6bebca75bc1227c74b70ca74f39ecd6"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#af6bebca75bc1227c74b70ca74f39ecd6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._newsLetterSubscriptionService</a></div><div class="ttdeci">readonly INewsLetterSubscriptionService _newsLetterSubscriptionService</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:44</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a914f23690b1ad8e4cd96e268ee57229b">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._actionContextAccessor</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0ffa30e9d41ec0d7f80e4d29308c8233">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._countryService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a786b95982b8815ec2d18c62e08ff2d89">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._customerService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a5c00e6028e0ca396dd57817a145921b6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._emailAccountService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._genericAttributeService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#af6bebca75bc1227c74b70ca74f39ecd6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._newsLetterSubscriptionService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._settingService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a64ceeb0bc1330ce7e10caf79cc28e05f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._stateProvinceService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4e8b461eca09e6935c7cde5a271c40e1">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._storeService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ad67cc6bb2af3e7488445dc44fdf20293">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._urlHelperFactory</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aef75c004de27abf47b34999a80d8c3ca">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._webHelper</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentação dos métodos</h2>
<a id="aac08a202413f156ad3b6d934e697e15f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac08a202413f156ad3b6d934e697e15f">&#9670;&nbsp;</a></span>CreateApiClientAsync&lt; TClient &gt;()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;TClient&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.CreateApiClientAsync&lt; TClient &gt; </td>
          <td>(</td>
          <td class="paramtype">Func&lt; Configuration, TClient &gt;&#160;</td>
          <td class="paramname"><em>clientCtor</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Prepare API client </p>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the aPI client </dd></dl>
<div class="typeconstraint">
<dl><dt><b>Restrições do Tipo</b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em>TClient</em></td><td>&#160;:</td><td valign="top"><em>IApiAccessor</em></td><td>&#160;</td></tr>
</table>
</dd>
</dl>
</div>
<div class="fragment"><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                                                                                                                         : IApiAccessor</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="comment">//check whether plugin is configured to request services (validate API key)</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            var sendinblueSettings = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a>.<a class="code" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html#ac5f44acbcb9ac9f8236ea04c2e2eeb83">LoadSettingAsync</a>&lt;SendinblueSettings&gt;();</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(sendinblueSettings.ApiKey))</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>($<span class="stringliteral">&quot;Plugin not configured&quot;</span>);</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160; </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            var apiConfiguration = <span class="keyword">new</span> Configuration()</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            {</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models.html#a2267f42893f5f57a608aeda6f5c8c457">ApiKey</a> = <span class="keyword">new</span> Dictionary&lt;string, string&gt; { </div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;                    [SendinblueDefaults.ApiKeyHeader] = sendinblueSettings.ApiKey, </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                    [SendinblueDefaults.PartnerKeyHeader] = sendinblueSettings.ApiKey </div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                },</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                ApiKeyPrefix = <span class="keyword">new</span> Dictionary&lt;string, string&gt; { [SendinblueDefaults.PartnerKeyHeader] = SendinblueDefaults.PartnerName },</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                UserAgent = SendinblueDefaults.UserAgent</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            };</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160; </div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="keywordflow">return</span> clientCtor(apiConfiguration);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_nop_exception_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_nop_exception.html">Nop.Core.NopException</a></div><div class="ttdoc">Represents errors that occur during application execution</div><div class="ttdef"><b>Definition:</b> NopException.cs:11</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_configuration_1_1_i_setting_service_html_ac5f44acbcb9ac9f8236ea04c2e2eeb83"><div class="ttname"><a href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html#ac5f44acbcb9ac9f8236ea04c2e2eeb83">Nop.Services.Configuration.ISettingService.LoadSettingAsync</a></div><div class="ttdeci">Task&lt; ISettings &gt; LoadSettingAsync(Type type, int storeId=0)</div><div class="ttdoc">Load settings</div></div>
<div class="ttc" id="anamespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models_html_a2267f42893f5f57a608aeda6f5c8c457"><div class="ttname"><a href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models.html#a2267f42893f5f57a608aeda6f5c8c457">Nop.Plugin.Misc.Sendinblue.Models.ApiKey</a></div><div class="ttdeci">string ApiKey</div><div class="ttdef"><b>Definition:</b> ConfigurationModel.cs:32</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._settingService</a>, <a class="el" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models.html#a2267f42893f5f57a608aeda6f5c8c457">Nop.Plugin.Misc.Sendinblue.Models.ApiKey</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#adc3ba029bd1053ae21adaea890c38b9b">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.ApiKeyHeader</a>, <a class="el" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html#ac5f44acbcb9ac9f8236ea04c2e2eeb83">Nop.Services.Configuration.ISettingService.LoadSettingAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#acb17f200fe6726963d326be01724e815">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.PartnerKeyHeader</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a16554458817f5541fd6e23585018700e">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.PartnerName</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#af97daf66df40e08db2430d554fc973c6">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.UserAgent</a>.</p>

</div>
</div>
<a id="a2b02ae0d9a70e55c42b79eea47dd2618"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b02ae0d9a70e55c42b79eea47dd2618">&#9670;&nbsp;</a></span>CreateAttibutesAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;string&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.CreateAttibutesAsync </td>
          <td>(</td>
          <td class="paramtype">IList&lt;(CategoryEnum Category, string Name, string Value, CreateAttribute.TypeEnum? Type)&gt;&#160;</td>
          <td class="paramname"><em>attributes</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Add new service attribute in account </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">category</td><td>Category of attribute</td></tr>
    <tr><td class="paramname">attributes</td><td>Collection of attributes</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the errors if exist </dd></dl>
<div class="fragment"><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;            <span class="keywordflow">if</span> (!attributes.Any())</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                <span class="keywordflow">return</span> <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160; </div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;            {</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> AttributesApi(config));</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160; </div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                <span class="keywordflow">foreach</span> (var attribute <span class="keywordflow">in</span> attributes)</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                {</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                    <span class="comment">//prepare data</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                    var createAttribute = <span class="keyword">new</span> CreateAttribute(attribute.Value, type: attribute.Type);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160; </div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;                    <span class="comment">//create attribute</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                    await client.CreateAttributeAsync(attribute.Category.ToString().ToLowerInvariant(), attribute.Name, createAttribute);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                }</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;            }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;            {</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                <span class="keywordflow">return</span> exception.Message;</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;            }</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160; </div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_i_work_context_html_a1117b7898ed056459a9ff3f0446bbbe1"><div class="ttname"><a href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync</a></div><div class="ttdeci">Task&lt; Customer &gt; GetCurrentCustomerAsync()</div><div class="ttdoc">Gets the current customer</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_logging_1_1_i_logger_html_a79f003fceaa9adc00f36f8654be85913"><div class="ttname"><a href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync</a></div><div class="ttdeci">Task ErrorAsync(string message, Exception exception=null, Customer customer=null)</div><div class="ttdoc">Error</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a> e <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a3da4b6c237604daff37b7dd993a692cc">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetAccountLanguageAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ae20d3092b8da0eb89cd5c3479b9de19c">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.PrepareAttributesAsync()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a113dc650cf974a49fe9e984fce44669a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.PrepareTransactionalAttributesAsync()</a>.</p>

</div>
</div>
<a id="a7dbd8280cad068c2d23929d377d08b23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dbd8280cad068c2d23929d377d08b23">&#9670;&nbsp;</a></span>ExportContactsAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;(<a class="el" href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">NotifyType</a> Type, string Message)&gt; &gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ExportContactsAsync </td>
          <td>(</td>
          <td class="paramtype">IList&lt; int &gt;&#160;</td>
          <td class="paramname"><em>storeIds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Export contacts from account to passed stores </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">storeIds</td><td>List of store identifiers</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the list of messages </dd></dl>
<div class="fragment"><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        {</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;            var messages = <span class="keyword">new</span> List&lt;(NotifyType, string)&gt;();</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160; </div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> ContactsApi(config));</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160; </div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                <span class="keywordflow">foreach</span> (var storeId <span class="keywordflow">in</span> storeIds)</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                {</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                    <span class="comment">//get list identifier from the settings</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    var key = $<span class="stringliteral">&quot;{nameof(SendinblueSettings)}.{nameof(SendinblueSettings.ListId)}&quot;</span>;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                    var listId = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a>.GetSettingByKeyAsync&lt;<span class="keywordtype">int</span>&gt;(key, storeId: storeId, loadSharedValueIfNotFound: <span class="keyword">true</span>);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    <span class="keywordflow">if</span> (listId == 0)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    {</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                        await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3cc46af402d1916555ea7a7ae07a361c">WarningAsync</a>($<span class="stringliteral">&quot;Sendinblue synchronization warning: List ID is empty for store #{storeId}&quot;</span>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                        messages.Add((<a class="code" href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">NotifyType</a>.Warning, $<span class="stringliteral">&quot;List ID is empty for store #{storeId}&quot;</span>));</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                    }</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160; </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                    <span class="comment">//check whether there are contacts in the list</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                    var contacts = await client.GetContactsFromListAsync(listId);</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                    var <span class="keyword">template</span> = <span class="keyword">new</span> { contacts = <span class="keyword">new</span>[] { <span class="keyword">new</span> { email = <span class="keywordtype">string</span>.Empty, emailBlacklisted = <span class="keyword">false</span> } } };</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                    var contactObjects = JsonConvert.DeserializeAnonymousType(contacts.ToJson(), <span class="keyword">template</span>);</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                    var blackListedEmails = contactObjects?.contacts?.Where(contact =&gt; contact.emailBlacklisted)</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                        .Select(contact =&gt; contact.email).ToList() ?? <span class="keyword">new</span> List&lt;string&gt;();</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160; </div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;                    <span class="keywordflow">foreach</span> (var email <span class="keywordflow">in</span> blackListedEmails)</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;                    {</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;                        <span class="comment">//email in black list, so unsubscribe contact from all stores</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;                        <span class="keywordflow">foreach</span> (var <span class="keywordtype">id</span> <span class="keywordflow">in</span> (await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4e8b461eca09e6935c7cde5a271c40e1">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#a361255e6a21fe5dbcfc5ed5d89c7f4f8">GetAllStoresAsync</a>()).Select(store =&gt; store.Id))</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;                        {</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;                            var subscription = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#af6bebca75bc1227c74b70ca74f39ecd6">_newsLetterSubscriptionService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#a2e30bf69fd3e5d2d8ce113fc350e7d0f">GetNewsLetterSubscriptionByEmailAndStoreIdAsync</a>(email, <span class="keywordtype">id</span>);</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                            <span class="keywordflow">if</span> (subscription != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                            {</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                                subscription.Active = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#af6bebca75bc1227c74b70ca74f39ecd6">_newsLetterSubscriptionService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#a9c1ac1227dcf9ea8f21c545cd8bc7fb9">UpdateNewsLetterSubscriptionAsync</a>(subscription, <span class="keyword">false</span>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                            }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                        }</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                    }</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            }</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            {</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue synchronization error: {exception.Message}&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                messages.Add((<a class="code" href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">NotifyType</a>.Error, $<span class="stringliteral">&quot;Sendinblue synchronization error: {exception.Message}&quot;</span>));</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            }</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160; </div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <span class="keywordflow">return</span> messages;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_logging_1_1_i_logger_html_a3cc46af402d1916555ea7a7ae07a361c"><div class="ttname"><a href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3cc46af402d1916555ea7a7ae07a361c">Nop.Services.Logging.ILogger.WarningAsync</a></div><div class="ttdeci">Task WarningAsync(string message, Exception exception=null, Customer customer=null)</div><div class="ttdoc">Warning</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service_html_a2e30bf69fd3e5d2d8ce113fc350e7d0f"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#a2e30bf69fd3e5d2d8ce113fc350e7d0f">Nop.Services.Messages.INewsLetterSubscriptionService.GetNewsLetterSubscriptionByEmailAndStoreIdAsync</a></div><div class="ttdeci">Task&lt; NewsLetterSubscription &gt; GetNewsLetterSubscriptionByEmailAndStoreIdAsync(string email, int storeId)</div><div class="ttdoc">Gets a newsletter subscription by email and store ID</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service_html_a9c1ac1227dcf9ea8f21c545cd8bc7fb9"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#a9c1ac1227dcf9ea8f21c545cd8bc7fb9">Nop.Services.Messages.INewsLetterSubscriptionService.UpdateNewsLetterSubscriptionAsync</a></div><div class="ttdeci">Task UpdateNewsLetterSubscriptionAsync(NewsLetterSubscription newsLetterSubscription, bool publishSubscriptionEvents=true)</div><div class="ttdoc">Updates a newsletter subscription</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_stores_1_1_i_store_service_html_a361255e6a21fe5dbcfc5ed5d89c7f4f8"><div class="ttname"><a href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#a361255e6a21fe5dbcfc5ed5d89c7f4f8">Nop.Services.Stores.IStoreService.GetAllStoresAsync</a></div><div class="ttdeci">Task&lt; IList&lt; Store &gt; &gt; GetAllStoresAsync()</div><div class="ttdoc">Gets all stores</div></div>
<div class="ttc" id="anamespace_nop_1_1_services_1_1_messages_html_a999a2d5bf9e05abe3c08497a364f8595"><div class="ttname"><a href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">Nop.Services.Messages.NotifyType</a></div><div class="ttdeci">NotifyType</div><div class="ttdoc">Notification type</div><div class="ttdef"><b>Definition:</b> NotifyType.cs:7</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#af6bebca75bc1227c74b70ca74f39ecd6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._newsLetterSubscriptionService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._settingService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4e8b461eca09e6935c7cde5a271c40e1">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._storeService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#a361255e6a21fe5dbcfc5ed5d89c7f4f8">Nop.Services.Stores.IStoreService.GetAllStoresAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#a2e30bf69fd3e5d2d8ce113fc350e7d0f">Nop.Services.Messages.INewsLetterSubscriptionService.GetNewsLetterSubscriptionByEmailAndStoreIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#a9c1ac1227dcf9ea8f21c545cd8bc7fb9">Nop.Services.Messages.INewsLetterSubscriptionService.UpdateNewsLetterSubscriptionAsync()</a> e <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3cc46af402d1916555ea7a7ae07a361c">Nop.Services.Logging.ILogger.WarningAsync()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#adf501cbb95ffb7dcd62c8e2e649d1a3f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SynchronizeAsync()</a>.</p>

</div>
</div>
<a id="a4923c7480d035edcc3a6183755696035"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4923c7480d035edcc3a6183755696035">&#9670;&nbsp;</a></span>GetAccountInfoAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;(string Info, bool MarketingAutomationEnabled, string MAkey, string Errors)&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetAccountInfoAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get account information </p>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the account info; whether marketing automation is enabled, errors if exist </dd></dl>
<div class="fragment"><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        {</div>
<div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;            {</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> AccountApi(config));</div>
<div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160; </div>
<div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                <span class="comment">//get account</span></div>
<div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                var account = await client.GetAccountAsync();</div>
<div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160; </div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <span class="comment">//prepare info</span></div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                var info = <span class="keywordtype">string</span>.Format(<span class="stringliteral">&quot;First name: {1}{0}Last name: {2}{0}Email: {3}{0}Email credits: {4}{0}SMS credits: {5}{0}&quot;</span>,</div>
<div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                    Environment.NewLine,</div>
<div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                    WebUtility.HtmlEncode(account.FirstName),</div>
<div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                    WebUtility.HtmlEncode(account.LastName),</div>
<div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                    WebUtility.HtmlEncode(account.Email),</div>
<div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;                    account.Plan.Where(plan =&gt; plan.Type != GetAccountPlan.TypeEnum.Sms).Sum(plan =&gt; plan.Credits),</div>
<div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;                    account.Plan.Where(plan =&gt; plan.Type == GetAccountPlan.TypeEnum.Sms).Sum(plan =&gt; plan.Credits));</div>
<div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160; </div>
<div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;                <span class="comment">//get marketing automation tacker ID</span></div>
<div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;                var key = account.MarketingAutomation?.Key ?? <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160; </div>
<div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;                <span class="keywordflow">return</span> (info, account.MarketingAutomation?.Enabled ?? <span class="keyword">false</span>, key, <span class="keyword">null</span>);</div>
<div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            }</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            {</div>
<div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                <span class="keywordflow">return</span> (<span class="keyword">null</span>, <span class="keyword">false</span>, <span class="keyword">null</span>, exception.Message);</div>
<div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;            }</div>
<div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;        }        </div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a> e <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#a944cdb019da91ec2c2f4fd9cfff29698">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.ConfigureMA()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#a2425c04a29809b86012101967a88e13b">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.PrepareModelAsync()</a>.</p>

</div>
</div>
<a id="a3da4b6c237604daff37b7dd993a692cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3da4b6c237604daff37b7dd993a692cc">&#9670;&nbsp;</a></span>GetAccountLanguageAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetAccountLanguageAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get account language </p>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the sendinblueAccountLanguage </dd></dl>
<div class="fragment"><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;        {</div>
<div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;            {</div>
<div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> AttributesApi(config));</div>
<div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160; </div>
<div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                var attributes = await client.GetAttributesAsync();</div>
<div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                var allAttribytes = attributes.Attributes.Select(s =&gt; s.Name).ToList();</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160; </div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                var defaultNameAttributes = <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                {</div>
<div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                    SendinblueDefaults.FirstNameServiceAttribute,</div>
<div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                    SendinblueDefaults.LastNameServiceAttribute</div>
<div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                };</div>
<div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                <span class="keywordflow">if</span> (defaultNameAttributes.All(attr =&gt; allAttribytes.Contains(attr)))</div>
<div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.English;</div>
<div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160; </div>
<div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                var frenchNameAttributes = <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                {</div>
<div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                    SendinblueDefaults.FirstNameFrenchServiceAttribute,</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                    SendinblueDefaults.LastNameFrenchServiceAttribute</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                };</div>
<div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                <span class="keywordflow">if</span> (frenchNameAttributes.All(attr =&gt; allAttribytes.Contains(attr)))</div>
<div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.French;</div>
<div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160; </div>
<div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                var italianNameAttributes = <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;                {</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;                    SendinblueDefaults.FirstNameItalianServiceAttribute,</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;                    SendinblueDefaults.LastNameItalianServiceAttribute</div>
<div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;                };</div>
<div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;                <span class="keywordflow">if</span> (italianNameAttributes.All(attr =&gt; allAttribytes.Contains(attr)))</div>
<div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.Italian;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160; </div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;                var spanishNameAttributes = <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                {</div>
<div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                    SendinblueDefaults.FirstNameSpanishServiceAttribute,</div>
<div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;                    SendinblueDefaults.LastNameSpanishServiceAttribute</div>
<div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                };</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                <span class="keywordflow">if</span> (spanishNameAttributes.All(attr =&gt; allAttribytes.Contains(attr)))</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.Spanish;</div>
<div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160; </div>
<div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;                var germanNameAttributes = <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;                {</div>
<div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;                    SendinblueDefaults.FirstNameGermanServiceAttribute,</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;                    SendinblueDefaults.LastNameGermanServiceAttribute</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;                };</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;                <span class="keywordflow">if</span> (germanNameAttributes.All(attr =&gt; allAttribytes.Contains(attr)))</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.German;</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160; </div>
<div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;                var portugueseNameAttributes = <span class="keyword">new</span> List&lt;string&gt;</div>
<div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;                {</div>
<div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;                    SendinblueDefaults.FirstNamePortugueseServiceAttribute,</div>
<div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;                    SendinblueDefaults.LastNamePortugueseServiceAttribute</div>
<div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;                };</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;                <span class="keywordflow">if</span> (portugueseNameAttributes.All(attr =&gt; allAttribytes.Contains(attr)))</div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;                    <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.Portuguese;</div>
<div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160; </div>
<div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;                <span class="comment">//Create default customer names attribytes</span></div>
<div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;                var initialAttributes = <span class="keyword">new</span> List&lt;(CategoryEnum category, <span class="keywordtype">string</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models.html#a5d49a2599538bfd3f9e5333e94ca11b0">Name</a>, <span class="keywordtype">string</span> <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#ae81f2364e2d171b827c01c1105f2be5f">Value</a>, CreateAttribute.TypeEnum? <a class="code" href="namespace_nop_1_1_plugin_1_1_tax_1_1_avalara_1_1_models_1_1_tax.html#aa71b7e7409aa6578c120ec3382570ad8">Type</a>)&gt;</div>
<div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;                {</div>
<div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.FirstNameServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.LastNameServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text)</div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;                };</div>
<div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;                <span class="comment">//create attributes that are not already on account</span></div>
<div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;                var newAttributes = <span class="keyword">new</span> List&lt;(CategoryEnum category, <span class="keywordtype">string</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models.html#a5d49a2599538bfd3f9e5333e94ca11b0">Name</a>, <span class="keywordtype">string</span> <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#ae81f2364e2d171b827c01c1105f2be5f">Value</a>, CreateAttribute.TypeEnum? <a class="code" href="namespace_nop_1_1_plugin_1_1_tax_1_1_avalara_1_1_models_1_1_tax.html#aa71b7e7409aa6578c120ec3382570ad8">Type</a>)&gt;();</div>
<div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;                <span class="keywordflow">foreach</span> (var attribute <span class="keywordflow">in</span> initialAttributes)</div>
<div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;                {</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;                    <span class="keywordflow">if</span> (!allAttribytes.Contains(attribute.Name))</div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;                        newAttributes.Add(attribute);</div>
<div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;                }</div>
<div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160; </div>
<div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2b02ae0d9a70e55c42b79eea47dd2618">CreateAttibutesAsync</a>(newAttributes);</div>
<div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160; </div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.English;</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            }</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            {</div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.English;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;            }</div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_a2b02ae0d9a70e55c42b79eea47dd2618"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2b02ae0d9a70e55c42b79eea47dd2618">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.CreateAttibutesAsync</a></div><div class="ttdeci">async Task&lt; string &gt; CreateAttibutesAsync(IList&lt;(CategoryEnum Category, string Name, string Value, CreateAttribute.TypeEnum? Type)&gt; attributes)</div><div class="ttdoc">Add new service attribute in account</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:374</div></div>
<div class="ttc" id="anamespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain_html_aa85bc49432cce04b80943236ba863203"><div class="ttname"><a href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">Nop.Plugin.Misc.Sendinblue.Domain.SendinblueAccountLanguage</a></div><div class="ttdeci">SendinblueAccountLanguage</div><div class="ttdoc">Represents Sendinblue account language enumeration</div><div class="ttdef"><b>Definition:</b> SendinblueAccountLanguage.cs:7</div></div>
<div class="ttc" id="anamespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models_html_a5d49a2599538bfd3f9e5333e94ca11b0"><div class="ttname"><a href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models.html#a5d49a2599538bfd3f9e5333e94ca11b0">Nop.Plugin.Misc.Sendinblue.Models.Name</a></div><div class="ttdeci">string Name</div><div class="ttdef"><b>Definition:</b> SmsModel.cs:32</div></div>
<div class="ttc" id="anamespace_nop_1_1_plugin_1_1_tax_1_1_avalara_1_1_models_1_1_tax_html_aa71b7e7409aa6578c120ec3382570ad8"><div class="ttname"><a href="namespace_nop_1_1_plugin_1_1_tax_1_1_avalara_1_1_models_1_1_tax.html#aa71b7e7409aa6578c120ec3382570ad8">Nop.Plugin.Tax.Avalara.Models.Tax.Type</a></div><div class="ttdeci">string Type</div><div class="ttdef"><b>Definition:</b> TaxCategoryModel.cs:16</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog_html_ae81f2364e2d171b827c01c1105f2be5f"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#ae81f2364e2d171b827c01c1105f2be5f">Nop.Web.Areas.Admin.Models.Catalog.Value</a></div><div class="ttdeci">string Value</div><div class="ttdef"><b>Definition:</b> AddSpecificationAttributeLocalizedModel.cs:17</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2b02ae0d9a70e55c42b79eea47dd2618">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.CreateAttibutesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#ae79ad4ccac5654fba26e8c903acc8d20">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FirstNameFrenchServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#ae68a10f8cdc7683086b443747627dfba">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FirstNameGermanServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a07eda0c5675df6de8c402b1cdd8d2301">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FirstNameItalianServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a19b7f078cf57b18aee417ac3db22f9b3">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FirstNamePortugueseServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a3b5236630c5dbffb4cbcf926b336eed5">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FirstNameServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a6bcdbba93d9d57adcf8f52149a55962b">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FirstNameSpanishServiceAttribute</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a63afb67da889f8db4c82458f8f392b64">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.LastNameFrenchServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a1cabb602c6cc4ab707752ea9f5f9dd83">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.LastNameGermanServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a27575633aad97013fe5148fe0d55fd97">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.LastNameItalianServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a7916b1d84ef940bf1a27802c37383660">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.LastNamePortugueseServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a4a971dfb07bcfb78138c035644b2449d">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.LastNameServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#ad9bea784bef0ccdf4468f7ac5e02a671">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.LastNameSpanishServiceAttribute</a>, <a class="el" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models.html#a5d49a2599538bfd3f9e5333e94ca11b0">Nop.Plugin.Misc.Sendinblue.Models.Name</a>, <a class="el" href="namespace_nop_1_1_plugin_1_1_tax_1_1_avalara_1_1_models_1_1_tax.html#aa71b7e7409aa6578c120ec3382570ad8">Nop.Plugin.Tax.Avalara.Models.Tax.Type</a> e <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#ae81f2364e2d171b827c01c1105f2be5f">Nop.Web.Areas.Admin.Models.Catalog.Value</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4d20d54a03c56570cb397256fbb4397c">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SubscribeAsync()</a>.</p>

</div>
</div>
<a id="a1787519a1300c8ed4380547bb6a645df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1787519a1300c8ed4380547bb6a645df">&#9670;&nbsp;</a></span>GetEmailAccountIdAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;(int Id, string Errors)&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetEmailAccountIdAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>senderId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>smtpKey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get email account identifier </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">senderId</td><td>Sender identifier</td></tr>
    <tr><td class="paramname">smtpKey</td><td>SMTP key</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the email account identifier; errors if exist </dd></dl>
<div class="fragment"><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        {</div>
<div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;            {</div>
<div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                <span class="comment">//create API clients</span></div>
<div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                var sendersClient = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> SendersApi(config));</div>
<div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                var accountClient = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> AccountApi(config));</div>
<div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160; </div>
<div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;                <span class="comment">//get all available senders</span></div>
<div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                var senders = await sendersClient.GetSendersAsync();</div>
<div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                <span class="keywordflow">if</span> (!senders.Senders.Any())</div>
<div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;                    <span class="keywordflow">return</span> (0, <span class="stringliteral">&quot;There are no senders&quot;</span>);</div>
<div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160; </div>
<div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;                var currentSender = senders.Senders.FirstOrDefault(sender =&gt; sender.Id.ToString() == senderId);</div>
<div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;                <span class="keywordflow">if</span> (currentSender != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;                {</div>
<div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;                    <span class="comment">//try to find existing email account by name and email</span></div>
<div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;                    var emailAccount = (await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a5c00e6028e0ca396dd57817a145921b6">_emailAccountService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#a2c12ebea9245a884a750068cc308b89d">GetAllEmailAccountsAsync</a>())</div>
<div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;                        .FirstOrDefault(account =&gt; account.DisplayName == currentSender.Name &amp;&amp; account.Email == currentSender.Email);</div>
<div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;                    <span class="keywordflow">if</span> (emailAccount != <span class="keyword">null</span>)</div>
<div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;                        <span class="keywordflow">return</span> (emailAccount.Id, <span class="keyword">null</span>);</div>
<div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;                }</div>
<div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160; </div>
<div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;                <span class="comment">//or create new one</span></div>
<div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;                currentSender ??= senders.Senders.FirstOrDefault();</div>
<div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;                var relay = (await accountClient.GetAccountAsync()).Relay;</div>
<div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;                var newEmailAccount = <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html">EmailAccount</a></div>
<div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;                {</div>
<div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a43130cbf77ae67f46126dbac3a832c93">Host</a> = relay?.Data?.Relay,</div>
<div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a098f2786d301b9cd28a6f82b349fc4ee">Port</a> = relay?.Data?.Port ?? 0,</div>
<div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                    <a class="code" href="namespace_nop_1_1_plugin_1_1_shipping_1_1_u_p_s_1_1_models.html#a2be4a8d2d290e3967a7d6db0204dd9ab">Username</a> = relay?.Data?.UserName,</div>
<div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                    <a class="code" href="namespace_nop_1_1_plugin_1_1_shipping_1_1_ship_station_1_1_models.html#ac1bc3bfb51942662647c519f336b78b6">Password</a> = smtpKey,</div>
<div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a45fdf24fabe288adca78a836437333e9">EnableSsl</a> = <span class="keyword">true</span>,</div>
<div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_common.html#a516765ab5fd20394419b236f4132493d">Email</a> = currentSender.Email,</div>
<div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a2bdb21b84e1126fe2a671ae5c3483463">DisplayName</a> = currentSender.Name</div>
<div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;                };</div>
<div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a5c00e6028e0ca396dd57817a145921b6">_emailAccountService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#ae5c4a3640b9d3fa2f6789757fcc35f01">InsertEmailAccountAsync</a>(newEmailAccount);</div>
<div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160; </div>
<div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;                <span class="keywordflow">return</span> (newEmailAccount.Id, <span class="keyword">null</span>);</div>
<div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;            }</div>
<div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;            {</div>
<div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;                <span class="keywordflow">return</span> (0, exception.Message);</div>
<div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;            }</div>
<div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html">Nop.Core.Domain.Messages.EmailAccount</a></div><div class="ttdoc">Represents an email account</div><div class="ttdef"><b>Definition:</b> EmailAccount.cs:7</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_email_account_service_html_a2c12ebea9245a884a750068cc308b89d"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#a2c12ebea9245a884a750068cc308b89d">Nop.Services.Messages.IEmailAccountService.GetAllEmailAccountsAsync</a></div><div class="ttdeci">Task&lt; IList&lt; EmailAccount &gt; &gt; GetAllEmailAccountsAsync()</div><div class="ttdoc">Gets all email accounts</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_email_account_service_html_ae5c4a3640b9d3fa2f6789757fcc35f01"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#ae5c4a3640b9d3fa2f6789757fcc35f01">Nop.Services.Messages.IEmailAccountService.InsertEmailAccountAsync</a></div><div class="ttdeci">Task InsertEmailAccountAsync(EmailAccount emailAccount)</div><div class="ttdoc">Inserts an email account</div></div>
<div class="ttc" id="anamespace_nop_1_1_plugin_1_1_shipping_1_1_ship_station_1_1_models_html_ac1bc3bfb51942662647c519f336b78b6"><div class="ttname"><a href="namespace_nop_1_1_plugin_1_1_shipping_1_1_ship_station_1_1_models.html#ac1bc3bfb51942662647c519f336b78b6">Nop.Plugin.Shipping.ShipStation.Models.Password</a></div><div class="ttdeci">string Password</div><div class="ttdef"><b>Definition:</b> ShipStationModel.cs:39</div></div>
<div class="ttc" id="anamespace_nop_1_1_plugin_1_1_shipping_1_1_u_p_s_1_1_models_html_a2be4a8d2d290e3967a7d6db0204dd9ab"><div class="ttname"><a href="namespace_nop_1_1_plugin_1_1_shipping_1_1_u_p_s_1_1_models.html#a2be4a8d2d290e3967a7d6db0204dd9ab">Nop.Plugin.Shipping.UPS.Models.Username</a></div><div class="ttdeci">string Username</div><div class="ttdef"><b>Definition:</b> UPSShippingModel.cs:35</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_common_html_a516765ab5fd20394419b236f4132493d"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_common.html#a516765ab5fd20394419b236f4132493d">Nop.Web.Areas.Admin.Models.Common.Email</a></div><div class="ttdeci">string Email</div><div class="ttdef"><b>Definition:</b> AddressModel.cs:27</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a098f2786d301b9cd28a6f82b349fc4ee"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a098f2786d301b9cd28a6f82b349fc4ee">Nop.Web.Areas.Admin.Models.Messages.Port</a></div><div class="ttdeci">int Port</div><div class="ttdef"><b>Definition:</b> EmailAccountModel.cs:25</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a2bdb21b84e1126fe2a671ae5c3483463"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a2bdb21b84e1126fe2a671ae5c3483463">Nop.Web.Areas.Admin.Models.Messages.DisplayName</a></div><div class="ttdeci">string DisplayName</div><div class="ttdef"><b>Definition:</b> EmailAccountModel.cs:19</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a43130cbf77ae67f46126dbac3a832c93"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a43130cbf77ae67f46126dbac3a832c93">Nop.Web.Areas.Admin.Models.Messages.Host</a></div><div class="ttdeci">string Host</div><div class="ttdef"><b>Definition:</b> EmailAccountModel.cs:22</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a45fdf24fabe288adca78a836437333e9"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a45fdf24fabe288adca78a836437333e9">Nop.Web.Areas.Admin.Models.Messages.EnableSsl</a></div><div class="ttdeci">bool EnableSsl</div><div class="ttdef"><b>Definition:</b> EmailAccountModel.cs:35</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a5c00e6028e0ca396dd57817a145921b6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._emailAccountService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a2bdb21b84e1126fe2a671ae5c3483463">Nop.Web.Areas.Admin.Models.Messages.DisplayName</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_common.html#a516765ab5fd20394419b236f4132493d">Nop.Web.Areas.Admin.Models.Common.Email</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a45fdf24fabe288adca78a836437333e9">Nop.Web.Areas.Admin.Models.Messages.EnableSsl</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#a2c12ebea9245a884a750068cc308b89d">Nop.Services.Messages.IEmailAccountService.GetAllEmailAccountsAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a43130cbf77ae67f46126dbac3a832c93">Nop.Web.Areas.Admin.Models.Messages.Host</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html#ae5c4a3640b9d3fa2f6789757fcc35f01">Nop.Services.Messages.IEmailAccountService.InsertEmailAccountAsync()</a>, <a class="el" href="namespace_nop_1_1_plugin_1_1_shipping_1_1_ship_station_1_1_models.html#ac1bc3bfb51942662647c519f336b78b6">Nop.Plugin.Shipping.ShipStation.Models.Password</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a098f2786d301b9cd28a6f82b349fc4ee">Nop.Web.Areas.Admin.Models.Messages.Port</a> e <a class="el" href="namespace_nop_1_1_plugin_1_1_shipping_1_1_u_p_s_1_1_models.html#a2be4a8d2d290e3967a7d6db0204dd9ab">Nop.Plugin.Shipping.UPS.Models.Username</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#a278313a6e29b8ad6a539789d372fd9da">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.ConfigureSMTP()</a>.</p>

</div>
</div>
<a id="a6884794daa0a30c620da04fa26c322c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6884794daa0a30c620da04fa26c322c4">&#9670;&nbsp;</a></span>GetListsAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;(IList&lt;(string Id, string Name)&gt; Lists, string Errors)&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetListsAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get available lists to synchronize contacts </p>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the list of id-name pairs of lists; errors if exist </dd></dl>
<div class="fragment"><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        {</div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            var availableLists = <span class="keyword">new</span> List&lt;(string Id, string Name)&gt;();</div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160; </div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            {</div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> ContactsApi(config));</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160; </div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;                <span class="comment">//get available lists</span></div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;                var lists = await client.GetListsAsync(SendinblueDefaults.DefaultSynchronizationListsLimit);</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160; </div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;                <span class="comment">//prepare id-name pairs</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;                var <span class="keyword">template</span> = <span class="keyword">new</span> { lists = <span class="keyword">new</span>[] { <span class="keyword">new</span> { <span class="keywordtype">id</span> = <span class="keywordtype">string</span>.Empty, <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">name</a> = <span class="keywordtype">string</span>.Empty } } };</div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;                var listObjects = JsonConvert.DeserializeAnonymousType(lists.ToJson(), <span class="keyword">template</span>);</div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;                <span class="keywordflow">if</span> (listObjects?.lists != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                {</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;                    <span class="keywordflow">foreach</span> (var list <span class="keywordflow">in</span> listObjects.lists)</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;                    {</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;                        <span class="keywordflow">if</span> (list != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                            availableLists.Add((list.id, list.name));</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                    }</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;                }</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;            }</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;            {</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;                <span class="keywordflow">return</span> (availableLists, exception.Message);</div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;            }</div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160; </div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;            <span class="keywordflow">return</span> (availableLists, <span class="keyword">null</span>);</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        }</div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_models_1_1_directory_html_a72fa3e0da3ac8615d06df00bddf53ee7"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">Nop.Web.Models.Directory.name</a></div><div class="ttdeci">string name</div><div class="ttdef"><b>Definition:</b> StateProvinceModel.cs:8</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#aedcc749bc1e16e96344ae7dac088c33f">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.DefaultSynchronizationListsLimit</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a> e <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">Nop.Web.Models.Directory.name</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#a2425c04a29809b86012101967a88e13b">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.PrepareModelAsync()</a>.</p>

</div>
</div>
<a id="aaf041cb1e69a6d2cb37692f25c2504b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf041cb1e69a6d2cb37692f25c2504b6">&#9670;&nbsp;</a></span>GetQueuedEmailFromTemplateAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;<a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_queued_email.html">QueuedEmail</a>&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetQueuedEmailFromTemplateAsync </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>templateId</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert <a class="el" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue.html">Sendinblue</a> email template to queued email </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">templateId</td><td>Email template identifier</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the queued email </dd></dl>
<div class="fragment"><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;        {</div>
<div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;            {</div>
<div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> TransactionalEmailsApi(config));</div>
<div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160; </div>
<div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;                <span class="keywordflow">if</span> (templateId == 0)</div>
<div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>(<span class="stringliteral">&quot;Message template is empty&quot;</span>);</div>
<div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160; </div>
<div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;                <span class="comment">//get template</span></div>
<div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;                var <span class="keyword">template</span> = await client.GetSmtpTemplateAsync(templateId);</div>
<div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160; </div>
<div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;                <span class="comment">//bring attributes to tokens format</span></div>
<div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;                var subject = Regex.Replace(<span class="keyword">template</span>.<a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#abb0de155db90b85fcfc3ce9780fd1a23">Subject</a>, <span class="stringliteral">&quot;({{\\s*params\\..*?\\s*}})&quot;</span>, x =&gt; $<span class="stringliteral">&quot;%{x.ToString().Replace(&quot;</span>{<span class="stringliteral">&quot;, &quot;</span><span class="stringliteral">&quot;).Replace(&quot;</span>}<span class="stringliteral">&quot;, &quot;</span><span class="stringliteral">&quot;).Replace(&quot;</span>params.<span class="stringliteral">&quot;, &quot;</span><span class="stringliteral">&quot;).Replace(&quot;</span>_<span class="stringliteral">&quot;, &quot;</span>.<span class="stringliteral">&quot;).Trim()}%&quot;</span>);</div>
<div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;                subject = subject.Replace(<span class="stringliteral">&quot;\&quot;if\&quot;&quot;</span>, <span class="stringliteral">&quot;%if&quot;</span>).Replace(<span class="stringliteral">&quot;\&quot;endif\&quot;&quot;</span>, <span class="stringliteral">&quot;endif%&quot;</span>);</div>
<div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;                var body = Regex.Replace(<span class="keyword">template</span>.HtmlContent, <span class="stringliteral">&quot;({{\\s*params\\..*?\\s*}})&quot;</span>, x =&gt; $<span class="stringliteral">&quot;%{x.ToString().Replace(&quot;</span>{<span class="stringliteral">&quot;, &quot;</span><span class="stringliteral">&quot;).Replace(&quot;</span>}<span class="stringliteral">&quot;, &quot;</span><span class="stringliteral">&quot;).Replace(&quot;</span>params.<span class="stringliteral">&quot;, &quot;</span><span class="stringliteral">&quot;).Replace(&quot;</span>_<span class="stringliteral">&quot;, &quot;</span>.<span class="stringliteral">&quot;).Trim()}%&quot;</span>);</div>
<div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;                body = body.Replace(<span class="stringliteral">&quot;\&quot;if\&quot;&quot;</span>, <span class="stringliteral">&quot;%if&quot;</span>).Replace(<span class="stringliteral">&quot;\&quot;endif\&quot;&quot;</span>, <span class="stringliteral">&quot;endif%&quot;</span>);</div>
<div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160; </div>
<div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;                <span class="comment">//map template to queued email</span></div>
<div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_queued_email.html">QueuedEmail</a></div>
<div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;                {</div>
<div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#abb0de155db90b85fcfc3ce9780fd1a23">Subject</a> = subject,</div>
<div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a95a29491d41a68791e631eac874adbdd">Body</a> = body,</div>
<div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a5cc3118b8d27063fadf6d37d9e88cae8">FromName</a> = <span class="keyword">template</span>.Sender?.Name,</div>
<div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;                    <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a0cb1ca5bcfdafdbce15c05462d36d378">From</a> = <span class="keyword">template</span>.Sender?.Email</div>
<div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;                };</div>
<div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;            }</div>
<div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;            {</div>
<div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue email sending error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            }</div>
<div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_queued_email_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_queued_email.html">Nop.Core.Domain.Messages.QueuedEmail</a></div><div class="ttdoc">Represents an email item</div><div class="ttdef"><b>Definition:</b> QueuedEmail.cs:9</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a0cb1ca5bcfdafdbce15c05462d36d378"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a0cb1ca5bcfdafdbce15c05462d36d378">Nop.Web.Areas.Admin.Models.Messages.From</a></div><div class="ttdeci">string From</div><div class="ttdef"><b>Definition:</b> QueuedEmailModel.cs:22</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a5cc3118b8d27063fadf6d37d9e88cae8"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a5cc3118b8d27063fadf6d37d9e88cae8">Nop.Web.Areas.Admin.Models.Messages.FromName</a></div><div class="ttdeci">string FromName</div><div class="ttdef"><b>Definition:</b> QueuedEmailModel.cs:25</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_a95a29491d41a68791e631eac874adbdd"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a95a29491d41a68791e631eac874adbdd">Nop.Web.Areas.Admin.Models.Messages.Body</a></div><div class="ttdeci">string Body</div><div class="ttdef"><b>Definition:</b> CampaignModel.cs:35</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages_html_abb0de155db90b85fcfc3ce9780fd1a23"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#abb0de155db90b85fcfc3ce9780fd1a23">Nop.Web.Areas.Admin.Models.Messages.Subject</a></div><div class="ttdeci">string Subject</div><div class="ttdef"><b>Definition:</b> CampaignModel.cs:32</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a95a29491d41a68791e631eac874adbdd">Nop.Web.Areas.Admin.Models.Messages.Body</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a0cb1ca5bcfdafdbce15c05462d36d378">Nop.Web.Areas.Admin.Models.Messages.From</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#a5cc3118b8d27063fadf6d37d9e88cae8">Nop.Web.Areas.Admin.Models.Messages.FromName</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a> e <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_messages.html#abb0de155db90b85fcfc3ce9780fd1a23">Nop.Web.Areas.Admin.Models.Messages.Subject</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_message_service.html#a7ad9c666037108a8b39b7546c5e88a76">Nop.Plugin.Misc.Sendinblue.Services.SendinblueMessageService.SendEmailNotificationAsync()</a>.</p>

</div>
</div>
<a id="a074172dd27114d1a35fb926532cba652"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a074172dd27114d1a35fb926532cba652">&#9670;&nbsp;</a></span>GetSendersAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;(IList&lt;(string Id, string Name)&gt; Lists, string Errors)&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetSendersAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get available senders of transactional emails </p>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the list of id-name pairs of senders; errors if exist </dd></dl>
<div class="fragment"><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        {</div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;            var availableSenders = <span class="keyword">new</span> List&lt;(string Id, string Name)&gt;();</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160; </div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;            {</div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> SendersApi(config));</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160; </div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                <span class="comment">//get available senderes</span></div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                var senders = await client.GetSendersAsync();</div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160; </div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;                <span class="comment">//prepare id-name pairs</span></div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;                <span class="keywordflow">foreach</span> (var sender <span class="keywordflow">in</span> senders.Senders)</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;                {</div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;                    availableSenders.Add((sender.Id.ToString(), $<span class="stringliteral">&quot;{sender.Name} ({sender.Email})&quot;</span>));</div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;                }</div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;            }</div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;            {</div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;                <span class="keywordflow">return</span> (availableSenders, exception.Message);</div>
<div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;            }</div>
<div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160; </div>
<div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;            <span class="keywordflow">return</span> (availableSenders, <span class="keyword">null</span>);</div>
<div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a> e <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#a2425c04a29809b86012101967a88e13b">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.PrepareModelAsync()</a>.</p>

</div>
</div>
<a id="afcee3fd593c1b891cbcaf1ee06010083"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcee3fd593c1b891cbcaf1ee06010083">&#9670;&nbsp;</a></span>GetTemplateIdAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;int?&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetTemplateIdAsync </td>
          <td>(</td>
          <td class="paramtype">int?&#160;</td>
          <td class="paramname"><em>templateId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html">MessageTemplate</a>&#160;</td>
          <td class="paramname"><em>message</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html">EmailAccount</a>&#160;</td>
          <td class="paramname"><em>emailAccount</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get email template identifier </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">templateId</td><td>Current email template id</td></tr>
    <tr><td class="paramname">message</td><td>Message template</td></tr>
    <tr><td class="paramname">emailAccount</td><td>Email account</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the email template identifier </dd></dl>
<div class="fragment"><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;        {</div>
<div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;            {</div>
<div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> TransactionalEmailsApi(config));</div>
<div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div>
<div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;                <span class="comment">//check whether email template already exists</span></div>
<div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                <span class="keywordflow">if</span> (templateId &gt; 0)</div>
<div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;                {</div>
<div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;                    await client.GetSmtpTemplateAsync(templateId);</div>
<div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;                    <span class="keywordflow">return</span> templateId;</div>
<div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;                }</div>
<div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160; </div>
<div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;                <span class="comment">//or create new one</span></div>
<div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;                <span class="keywordflow">if</span> (emailAccount == <span class="keyword">null</span>)</div>
<div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>(<span class="stringliteral">&quot;Email account not configured&quot;</span>);</div>
<div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160; </div>
<div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;                <span class="comment">//the original body and subject of the email template are the same as that of the message template</span></div>
<div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;                var body = message.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#ab3af24a7aa836ac70141711130093af6">Body</a>.Replace(<span class="stringliteral">&quot;%if&quot;</span>, <span class="stringliteral">&quot;\&quot;if\&quot;&quot;</span>).Replace(<span class="stringliteral">&quot;endif%&quot;</span>, <span class="stringliteral">&quot;\&quot;endif\&quot;&quot;</span>);</div>
<div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;                body = Regex.Replace(body, <span class="stringliteral">&quot;(%[^\\%]*.%)&quot;</span>, x =&gt; $<span class="stringliteral">&quot;{{{{ params.{x.ToString().Replace(&quot;</span>%<span class="stringliteral">&quot;, &quot;</span><span class="stringliteral">&quot;).Replace(&quot;</span>.<span class="stringliteral">&quot;, &quot;</span>_<span class="stringliteral">&quot;).ToUpperInvariant()} }}}}&quot;</span>);</div>
<div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;                var subject = message.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a278d159c83f71f5e6f329ef9f2a671f9">Subject</a>.Replace(<span class="stringliteral">&quot;%if&quot;</span>, <span class="stringliteral">&quot;\&quot;if\&quot;&quot;</span>).Replace(<span class="stringliteral">&quot;endif%&quot;</span>, <span class="stringliteral">&quot;\&quot;endif\&quot;&quot;</span>);</div>
<div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;                subject = Regex.Replace(subject, <span class="stringliteral">&quot;(%[^\\%]*.%)&quot;</span>, x =&gt; $<span class="stringliteral">&quot;{{{{ params.{x.ToString().Replace(&quot;</span>%<span class="stringliteral">&quot;, &quot;</span><span class="stringliteral">&quot;).Replace(&quot;</span>.<span class="stringliteral">&quot;, &quot;</span>_<span class="stringliteral">&quot;).ToUpperInvariant()} }}}}&quot;</span>);</div>
<div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160; </div>
<div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;                <span class="comment">//create email template</span></div>
<div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;                var createSmtpTemplate = <span class="keyword">new</span> CreateSmtpTemplate(sender: <span class="keyword">new</span> CreateSmtpTemplateSender(emailAccount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html#aa33ced4900cbea20da583a2aef27f8c2">DisplayName</a>, emailAccount.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html#a1801b43e5ed2d46f7366d10a3ea0ba01">Email</a>),</div>
<div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;                    templateName: message.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a19d1ac4e577e643c22b4831d243ca357">Name</a>, htmlContent: body, subject: subject, isActive: <span class="keyword">true</span>);</div>
<div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;                var emailTemplate = await client.CreateSmtpTemplateAsync(createSmtpTemplate);</div>
<div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160; </div>
<div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;                <span class="keywordflow">return</span> (<span class="keywordtype">int</span>?)emailTemplate.Id;</div>
<div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;            }</div>
<div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;            {</div>
<div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;            }</div>
<div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_html_a1801b43e5ed2d46f7366d10a3ea0ba01"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html#a1801b43e5ed2d46f7366d10a3ea0ba01">Nop.Core.Domain.Messages.EmailAccount.Email</a></div><div class="ttdeci">string Email</div><div class="ttdoc">Gets or sets an email address</div><div class="ttdef"><b>Definition:</b> EmailAccount.cs:11</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account_html_aa33ced4900cbea20da583a2aef27f8c2"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html#aa33ced4900cbea20da583a2aef27f8c2">Nop.Core.Domain.Messages.EmailAccount.DisplayName</a></div><div class="ttdeci">string DisplayName</div><div class="ttdoc">Gets or sets an email display name</div><div class="ttdef"><b>Definition:</b> EmailAccount.cs:16</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_html_a19d1ac4e577e643c22b4831d243ca357"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a19d1ac4e577e643c22b4831d243ca357">Nop.Core.Domain.Messages.MessageTemplate.Name</a></div><div class="ttdeci">string Name</div><div class="ttdoc">Gets or sets the name</div><div class="ttdef"><b>Definition:</b> MessageTemplate.cs:14</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_html_a278d159c83f71f5e6f329ef9f2a671f9"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a278d159c83f71f5e6f329ef9f2a671f9">Nop.Core.Domain.Messages.MessageTemplate.Subject</a></div><div class="ttdeci">string Subject</div><div class="ttdoc">Gets or sets the subject</div><div class="ttdef"><b>Definition:</b> MessageTemplate.cs:24</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template_html_ab3af24a7aa836ac70141711130093af6"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#ab3af24a7aa836ac70141711130093af6">Nop.Core.Domain.Messages.MessageTemplate.Body</a></div><div class="ttdeci">string Body</div><div class="ttdoc">Gets or sets the body</div><div class="ttdef"><b>Definition:</b> MessageTemplate.cs:29</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#ab3af24a7aa836ac70141711130093af6">Nop.Core.Domain.Messages.MessageTemplate.Body</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html#aa33ced4900cbea20da583a2aef27f8c2">Nop.Core.Domain.Messages.EmailAccount.DisplayName</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_email_account.html#a1801b43e5ed2d46f7366d10a3ea0ba01">Nop.Core.Domain.Messages.EmailAccount.Email</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a19d1ac4e577e643c22b4831d243ca357">Nop.Core.Domain.Messages.MessageTemplate.Name</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_message_template.html#a278d159c83f71f5e6f329ef9f2a671f9">Nop.Core.Domain.Messages.MessageTemplate.Subject</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#a8588ba61a7ae8053aae19261f353b7b7">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.MessageUpdate()</a>.</p>

</div>
</div>
<a id="a4964f2bce40ba7efd426803ccd7e4b48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4964f2bce40ba7efd426803ccd7e4b48">&#9670;&nbsp;</a></span>GetUnsubscribeWebHookIdAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;int&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetUnsubscribeWebHookIdAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create webhook to get notification about unsubscribed contacts </p>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the webhook id </dd></dl>
<div class="fragment"><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;        {</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;            {</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> WebhooksApi(config));</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160; </div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                <span class="comment">//check whether webhook already exist</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                var sendinblueSettings = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a>.<a class="code" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html#ac5f44acbcb9ac9f8236ea04c2e2eeb83">LoadSettingAsync</a>&lt;SendinblueSettings&gt;();</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                <span class="keywordflow">if</span> (sendinblueSettings.UnsubscribeWebhookId != 0)</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;                {</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;                    await client.GetWebhookAsync(sendinblueSettings.UnsubscribeWebhookId);</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;                    <span class="keywordflow">return</span> sendinblueSettings.UnsubscribeWebhookId;</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;                }</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160; </div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;                <span class="comment">//or create new one</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;                var urlHelper = <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ad67cc6bb2af3e7488445dc44fdf20293">_urlHelperFactory</a>.GetUrlHelper(<a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a914f23690b1ad8e4cd96e268ee57229b">_actionContextAccessor</a>.ActionContext);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;                var notificationUrl = urlHelper.RouteUrl(SendinblueDefaults.UnsubscribeContactRoute, <span class="keyword">null</span>, <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aef75c004de27abf47b34999a80d8c3ca">_webHelper</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_web_helper.html#af8de123fc32935d3b35faf2dd99c0aae">GetCurrentRequestProtocol</a>());</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;                var webhook = <span class="keyword">new</span> CreateWebhook(notificationUrl, <span class="stringliteral">&quot;Unsubscribe event webhook&quot;</span>,</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;                    <span class="keyword">new</span> List&lt;CreateWebhook.EventsEnum&gt; { CreateWebhook.EventsEnum.Unsubscribed }, CreateWebhook.TypeEnum.Transactional);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;                var <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a> = await client.CreateWebhookAsync(webhook);</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160; </div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;                <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)<a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">result</a>.Id;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;            }</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;            {</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;            }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_core_1_1_i_web_helper_html_af8de123fc32935d3b35faf2dd99c0aae"><div class="ttname"><a href="interface_nop_1_1_core_1_1_i_web_helper.html#af8de123fc32935d3b35faf2dd99c0aae">Nop.Core.IWebHelper.GetCurrentRequestProtocol</a></div><div class="ttdeci">string GetCurrentRequestProtocol()</div><div class="ttdoc">Gets current HTTP request protocol</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_models_1_1_blogs_html_a6cc3986434c188bc64f7d71789d4a5c8"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a></div><div class="ttdeci">return result</div><div class="ttdef"><b>Definition:</b> BlogPagingFilteringModel.cs:21</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a914f23690b1ad8e4cd96e268ee57229b">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._actionContextAccessor</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._settingService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ad67cc6bb2af3e7488445dc44fdf20293">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._urlHelperFactory</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aef75c004de27abf47b34999a80d8c3ca">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._webHelper</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_web_helper.html#af8de123fc32935d3b35faf2dd99c0aae">Nop.Core.IWebHelper.GetCurrentRequestProtocol()</a>, <a class="el" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html#ac5f44acbcb9ac9f8236ea04c2e2eeb83">Nop.Services.Configuration.ISettingService.LoadSettingAsync()</a>, <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_blogs.html#a6cc3986434c188bc64f7d71789d4a5c8">Nop.Web.Models.Blogs.result</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a2b901f5f5a3fd1744f0003a478d094b1">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.UnsubscribeContactRoute</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_settings.html#a77d97aed9c3f6ab36e3009ca06d3a312">Nop.Plugin.Misc.Sendinblue.SendinblueSettings.UnsubscribeWebhookId</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#ad42922e729fc5010d8819196c9d667f1">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.SaveSynchronization()</a>.</p>

</div>
</div>
<a id="ab1e5fff79ae435d953024eb2a55209da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1e5fff79ae435d953024eb2a55209da">&#9670;&nbsp;</a></span>ImportContactsAsync()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;(<a class="el" href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">NotifyType</a> Type, string Message)&gt; &gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync </td>
          <td>(</td>
          <td class="paramtype">IList&lt; int &gt;&#160;</td>
          <td class="paramname"><em>storeIds</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Import contacts from passed stores to account </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">storeIds</td><td>List of store identifiers</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the list of messages </dd></dl>
<div class="fragment"><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;            var messages = <span class="keyword">new</span> List&lt;(NotifyType, string)&gt;();</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160; </div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            <span class="comment">//import contacts to account</span></div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;            {</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> ContactsApi(config));</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160; </div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                <span class="keywordflow">foreach</span> (var storeId <span class="keywordflow">in</span> storeIds)</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                    <span class="comment">//get list identifier from the settings</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                    var key = $<span class="stringliteral">&quot;{nameof(SendinblueSettings)}.{nameof(SendinblueSettings.ListId)}&quot;</span>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                    var listId = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a>.GetSettingByKeyAsync&lt;<span class="keywordtype">int</span>&gt;(key, storeId: storeId);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                    <span class="keywordflow">if</span> (listId == 0)</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                    {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                        await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3cc46af402d1916555ea7a7ae07a361c">WarningAsync</a>($<span class="stringliteral">&quot;Sendinblue synchronization warning: List ID is empty for store #{storeId}&quot;</span>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        messages.Add((<a class="code" href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">NotifyType</a>.Warning, $<span class="stringliteral">&quot;List ID is empty for store #{storeId}&quot;</span>));</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                    }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160; </div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                    <span class="comment">//try to get store subscriptions</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                    var subscriptions = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#af6bebca75bc1227c74b70ca74f39ecd6">_newsLetterSubscriptionService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#abd01fdfe9894a5222222f9791920990d">GetAllNewsLetterSubscriptionsAsync</a>(storeId: storeId, isActive: <span class="keyword">true</span>);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                    <span class="keywordflow">if</span> (!subscriptions.Any())</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                    {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                        await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3cc46af402d1916555ea7a7ae07a361c">WarningAsync</a>($<span class="stringliteral">&quot;Sendinblue synchronization warning: There are no subscriptions for store #{storeId}&quot;</span>);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                        messages.Add((<a class="code" href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">NotifyType</a>.Warning, $<span class="stringliteral">&quot;There are no subscriptions for store #{storeId}&quot;</span>));</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                        <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                    }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                    <span class="comment">//get notification URL</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    var urlHelper = <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ad67cc6bb2af3e7488445dc44fdf20293">_urlHelperFactory</a>.GetUrlHelper(<a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a914f23690b1ad8e4cd96e268ee57229b">_actionContextAccessor</a>.ActionContext);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    var notificationUrl = urlHelper.RouteUrl(SendinblueDefaults.ImportContactsRoute, <span class="keyword">null</span>, <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aef75c004de27abf47b34999a80d8c3ca">_webHelper</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_web_helper.html#af8de123fc32935d3b35faf2dd99c0aae">GetCurrentRequestProtocol</a>());</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    var <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">name</a> = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                    <span class="keywordflow">switch</span> (await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a3da4b6c237604daff37b7dd993a692cc">GetAccountLanguageAsync</a>())</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                    {</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.French:</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                            <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">name</a> =</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                                $<span class="stringliteral">&quot;{SendinblueDefaults.FirstNameFrenchServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                                $<span class="stringliteral">&quot;{SendinblueDefaults.LastNameFrenchServiceAttribute};&quot;</span>;</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.German:</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                            <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">name</a> =</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                                $<span class="stringliteral">&quot;{SendinblueDefaults.FirstNameGermanServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                                $<span class="stringliteral">&quot;{SendinblueDefaults.LastNameGermanServiceAttribute};&quot;</span>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.Italian:</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                            <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">name</a> =</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                $<span class="stringliteral">&quot;{SendinblueDefaults.FirstNameItalianServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                $<span class="stringliteral">&quot;{SendinblueDefaults.LastNameItalianServiceAttribute};&quot;</span>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.Portuguese:</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                            <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">name</a> =</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                $<span class="stringliteral">&quot;{SendinblueDefaults.FirstNamePortugueseServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                                $<span class="stringliteral">&quot;{SendinblueDefaults.LastNamePortugueseServiceAttribute};&quot;</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.Spanish:</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                            <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">name</a> =</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                                $<span class="stringliteral">&quot;{SendinblueDefaults.FirstNameSpanishServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                                $<span class="stringliteral">&quot;{SendinblueDefaults.LastNameSpanishServiceAttribute};&quot;</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160; </div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.English:</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                            <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">name</a> =</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                $<span class="stringliteral">&quot;{SendinblueDefaults.FirstNameServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                $<span class="stringliteral">&quot;{SendinblueDefaults.LastNameServiceAttribute};&quot;</span>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    }</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160; </div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    <span class="comment">//prepare CSV </span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    var title =</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.EmailServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                        <a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">name</a> +</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.UsernameServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.SMSServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.PhoneServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.CountryServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.StoreIdServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.GenderServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.DateOfBirthServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.CompanyServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.Address1ServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.Address2ServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.ZipCodeServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.CityServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.CountyServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.StateServiceAttribute};&quot;</span> +</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                        $<span class="stringliteral">&quot;{SendinblueDefaults.FaxServiceAttribute}&quot;</span>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                    var csv = await subscriptions.AggregateAwaitAsync(title, async (all, subscription) =&gt;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                    {</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                        var firstName = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                        var lastName = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                        var phone = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                        var countryName = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                        var sms = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                        var gender = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                        var dateOfBirth = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                        var company = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                        var address1 = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                        var address2 = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                        var zipCode = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                        var city = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                        var county = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                        var state = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                        var fax = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160; </div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                        var customer = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a786b95982b8815ec2d18c62e08ff2d89">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9fd859a1a429bde367fc480964255d5e">GetCustomerByEmailAsync</a>(subscription.Email);</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                        <span class="keywordflow">if</span> (customer != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                        {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                            firstName = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a3e388ff4e1d4cb7e5fc974c7664d505d">FirstNameAttribute</a>);</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                            lastName = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a20c73e0c786ca559bd9042c20f44b677">LastNameAttribute</a>);</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                            phone = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ad236f4df1ea20b398b4dee9860aebbd4">PhoneAttribute</a>);</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                            var countryId = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">int</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#af15b7ad8fbe5eef84106f7c00102d1ba">CountryIdAttribute</a>);</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                            var country = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0ffa30e9d41ec0d7f80e4d29308c8233">_countryService</a>.<a class="code" href="interface_nop_1_1_services_1_1_directory_1_1_i_country_service.html#af152b8c9c943b5b3b36db129b6302dac">GetCountryByIdAsync</a>(countryId);</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                            countryName = country?.Name;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                            var countryIsoCode = country?.NumericIsoCode ?? 0;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                            <span class="keywordflow">if</span> (countryIsoCode &gt; 0 &amp;&amp; !<span class="keywordtype">string</span>.IsNullOrEmpty(phone))</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                            {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                                <span class="comment">//use the first phone code only</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                var phoneCode = <a class="code" href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166.html">ISO3166</a>.<a class="code" href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166.html#a38be47e6cbb11c01df3b767fba0367be">FromISOCode</a>(countryIsoCode)</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                    ?.<a class="code" href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166_country.html#a6bdbbbc7c3fbc60fd0428347bca7527f">DialCodes</a>?.FirstOrDefault()?.Replace(<span class="stringliteral">&quot; &quot;</span>, <span class="keywordtype">string</span>.Empty) ?? <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                sms = phone.Replace($<span class="stringliteral">&quot;+{phoneCode}&quot;</span>, <span class="keywordtype">string</span>.Empty);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                            }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                            gender = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a1862d35f71b99c7723656f1b5e88c477">GenderAttribute</a>);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                            dateOfBirth = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a79549f630ebe948858ca3e1d38578bce">DateOfBirthAttribute</a>);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                            company = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ac19efdd3f97fd0bbc9e9dd49c04fba25">CompanyAttribute</a>);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                            address1 = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a6b45fef38790f6628f6f829d571c02fc">StreetAddressAttribute</a>);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                            address2 = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a1a2a4a75ad02f08b3713efc7e3de2ecd">StreetAddress2Attribute</a>);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                            zipCode = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a72342f719ff6b945be9a506ec2e24337">ZipPostalCodeAttribute</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                            city = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#aefa25c57ae6eb1a4efc563d05605d291">CityAttribute</a>);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                            county = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ac5a25d0aeaa86995d7b148704c9d8e11">CountyAttribute</a>);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                            state = (await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a64ceeb0bc1330ce7e10caf79cc28e05f">_stateProvinceService</a>.<a class="code" href="interface_nop_1_1_services_1_1_directory_1_1_i_state_province_service.html#a3150c38731e6df31055277657cf72ba8">GetStateProvinceByIdAsync</a>(await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">int</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a5c6157539e49e186b8539994023a19f7">StateProvinceIdAttribute</a>)))?.Name;</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                            fax = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a78dc817a2bbded4a39043fe53107a0c8">FaxAttribute</a>);</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                        }</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                        <span class="keywordflow">return</span> $<span class="stringliteral">&quot;{all}\n&quot;</span> +</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                            $<span class="stringliteral">&quot;{subscription.Email};&quot;</span> +</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                            $<span class="stringliteral">&quot;{firstName};&quot;</span> +</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                            $<span class="stringliteral">&quot;{lastName};&quot;</span> +</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                            $<span class="stringliteral">&quot;{customer?.Username};&quot;</span> +</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                            $<span class="stringliteral">&quot;{sms};&quot;</span> +</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                            $<span class="stringliteral">&quot;{phone};&quot;</span> +</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;                            $<span class="stringliteral">&quot;{countryName};&quot;</span> +</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                            $<span class="stringliteral">&quot;{subscription.StoreId};&quot;</span> +</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                            $<span class="stringliteral">&quot;{gender};&quot;</span> +</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                            $<span class="stringliteral">&quot;{dateOfBirth};&quot;</span> +</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                            $<span class="stringliteral">&quot;{company};&quot;</span> +</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                            $<span class="stringliteral">&quot;{address1};&quot;</span> +</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                            $<span class="stringliteral">&quot;{address2};&quot;</span> +</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                            $<span class="stringliteral">&quot;{zipCode};&quot;</span> +</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                            $<span class="stringliteral">&quot;{city};&quot;</span> +</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                            $<span class="stringliteral">&quot;{county};&quot;</span> +</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                            $<span class="stringliteral">&quot;{state};&quot;</span> +</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                            $<span class="stringliteral">&quot;{fax};&quot;</span>;</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                    });</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160; </div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                    <span class="comment">//prepare data to import</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                    var requestContactImport = <span class="keyword">new</span> RequestContactImport</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;                    {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                        NotifyUrl = notificationUrl,</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                        FileBody = csv,</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                        ListIds = <span class="keyword">new</span> List&lt;long?&gt; { listId }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                    };</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                    <span class="comment">//start import</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                    await client.ImportContactsAsync(requestContactImport);</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;            {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue synchronization error: {exception.Message}&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                messages.Add((<a class="code" href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">NotifyType</a>.Error, $<span class="stringliteral">&quot;Sendinblue synchronization error: {exception.Message}&quot;</span>));</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            }</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160; </div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;            <span class="keywordflow">return</span> messages;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">Nop.Core.Domain.Customers.NopCustomerDefaults</a></div><div class="ttdoc">Represents default values related to customers data</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:7</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_a1862d35f71b99c7723656f1b5e88c477"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a1862d35f71b99c7723656f1b5e88c477">Nop.Core.Domain.Customers.NopCustomerDefaults.GenderAttribute</a></div><div class="ttdeci">static string GenderAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'Gender'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:66</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_a1a2a4a75ad02f08b3713efc7e3de2ecd"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a1a2a4a75ad02f08b3713efc7e3de2ecd">Nop.Core.Domain.Customers.NopCustomerDefaults.StreetAddress2Attribute</a></div><div class="ttdeci">static string StreetAddress2Attribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'StreetAddress2'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:86</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_a20c73e0c786ca559bd9042c20f44b677"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a20c73e0c786ca559bd9042c20f44b677">Nop.Core.Domain.Customers.NopCustomerDefaults.LastNameAttribute</a></div><div class="ttdeci">static string LastNameAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'LastName'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:61</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_a3e388ff4e1d4cb7e5fc974c7664d505d"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a3e388ff4e1d4cb7e5fc974c7664d505d">Nop.Core.Domain.Customers.NopCustomerDefaults.FirstNameAttribute</a></div><div class="ttdeci">static string FirstNameAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'FirstName'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:56</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_a5c6157539e49e186b8539994023a19f7"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a5c6157539e49e186b8539994023a19f7">Nop.Core.Domain.Customers.NopCustomerDefaults.StateProvinceIdAttribute</a></div><div class="ttdeci">static string StateProvinceIdAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'StateProvinceId'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:111</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_a6b45fef38790f6628f6f829d571c02fc"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a6b45fef38790f6628f6f829d571c02fc">Nop.Core.Domain.Customers.NopCustomerDefaults.StreetAddressAttribute</a></div><div class="ttdeci">static string StreetAddressAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'StreetAddress'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:81</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_a72342f719ff6b945be9a506ec2e24337"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a72342f719ff6b945be9a506ec2e24337">Nop.Core.Domain.Customers.NopCustomerDefaults.ZipPostalCodeAttribute</a></div><div class="ttdeci">static string ZipPostalCodeAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'ZipPostalCode'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:91</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_a78dc817a2bbded4a39043fe53107a0c8"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a78dc817a2bbded4a39043fe53107a0c8">Nop.Core.Domain.Customers.NopCustomerDefaults.FaxAttribute</a></div><div class="ttdeci">static string FaxAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'Fax'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:121</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_a79549f630ebe948858ca3e1d38578bce"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a79549f630ebe948858ca3e1d38578bce">Nop.Core.Domain.Customers.NopCustomerDefaults.DateOfBirthAttribute</a></div><div class="ttdeci">static string DateOfBirthAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'DateOfBirth'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:71</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_ac19efdd3f97fd0bbc9e9dd49c04fba25"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ac19efdd3f97fd0bbc9e9dd49c04fba25">Nop.Core.Domain.Customers.NopCustomerDefaults.CompanyAttribute</a></div><div class="ttdeci">static string CompanyAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'Company'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:76</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_ac5a25d0aeaa86995d7b148704c9d8e11"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ac5a25d0aeaa86995d7b148704c9d8e11">Nop.Core.Domain.Customers.NopCustomerDefaults.CountyAttribute</a></div><div class="ttdeci">static string CountyAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'County'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:101</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_ad236f4df1ea20b398b4dee9860aebbd4"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ad236f4df1ea20b398b4dee9860aebbd4">Nop.Core.Domain.Customers.NopCustomerDefaults.PhoneAttribute</a></div><div class="ttdeci">static string PhoneAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'Phone'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:116</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_aefa25c57ae6eb1a4efc563d05605d291"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#aefa25c57ae6eb1a4efc563d05605d291">Nop.Core.Domain.Customers.NopCustomerDefaults.CityAttribute</a></div><div class="ttdeci">static string CityAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'City'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:96</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults_html_af15b7ad8fbe5eef84106f7c00102d1ba"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#af15b7ad8fbe5eef84106f7c00102d1ba">Nop.Core.Domain.Customers.NopCustomerDefaults.CountryIdAttribute</a></div><div class="ttdeci">static string CountryIdAttribute</div><div class="ttdoc">Gets a name of generic attribute to store the value of 'CountryId'</div><div class="ttdef"><b>Definition:</b> NopCustomerDefaults.cs:106</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_a3da4b6c237604daff37b7dd993a692cc"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a3da4b6c237604daff37b7dd993a692cc">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetAccountLanguageAsync</a></div><div class="ttdeci">async Task&lt; SendinblueAccountLanguage &gt; GetAccountLanguageAsync()</div><div class="ttdoc">Get account language</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:882</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_installation_1_1_i_s_o3166_country_html_a6bdbbbc7c3fbc60fd0428347bca7527f"><div class="ttname"><a href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166_country.html#a6bdbbbc7c3fbc60fd0428347bca7527f">Nop.Services.Installation.ISO3166Country.DialCodes</a></div><div class="ttdeci">string[] DialCodes</div><div class="ttdoc">Phone codes</div><div class="ttdef"><b>Definition:</b> ISO3166.cs:344</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_installation_1_1_i_s_o3166_html"><div class="ttname"><a href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166.html">Nop.Services.Installation.ISO3166</a></div><div class="ttdoc">Represents the implementation of ISO3166-1</div><div class="ttdef"><b>Definition:</b> ISO3166.cs:11</div></div>
<div class="ttc" id="aclass_nop_1_1_services_1_1_installation_1_1_i_s_o3166_html_a38be47e6cbb11c01df3b767fba0367be"><div class="ttname"><a href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166.html#a38be47e6cbb11c01df3b767fba0367be">Nop.Services.Installation.ISO3166.FromISOCode</a></div><div class="ttdeci">static ISO3166Country FromISOCode(int codeISO)</div><div class="ttdoc">Obtain ISO3166-1 Country based on its ISO code.</div><div class="ttdef"><b>Definition:</b> ISO3166.cs:17</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_customers_1_1_i_customer_service_html_a9fd859a1a429bde367fc480964255d5e"><div class="ttname"><a href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9fd859a1a429bde367fc480964255d5e">Nop.Services.Customers.ICustomerService.GetCustomerByEmailAsync</a></div><div class="ttdeci">Task&lt; Customer &gt; GetCustomerByEmailAsync(string email)</div><div class="ttdoc">Get customer by email</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_directory_1_1_i_country_service_html_af152b8c9c943b5b3b36db129b6302dac"><div class="ttname"><a href="interface_nop_1_1_services_1_1_directory_1_1_i_country_service.html#af152b8c9c943b5b3b36db129b6302dac">Nop.Services.Directory.ICountryService.GetCountryByIdAsync</a></div><div class="ttdeci">Task&lt; Country &gt; GetCountryByIdAsync(int countryId)</div><div class="ttdoc">Gets a country</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_directory_1_1_i_state_province_service_html_a3150c38731e6df31055277657cf72ba8"><div class="ttname"><a href="interface_nop_1_1_services_1_1_directory_1_1_i_state_province_service.html#a3150c38731e6df31055277657cf72ba8">Nop.Services.Directory.IStateProvinceService.GetStateProvinceByIdAsync</a></div><div class="ttdeci">Task&lt; StateProvince &gt; GetStateProvinceByIdAsync(int stateProvinceId)</div><div class="ttdoc">Gets a state/province</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service_html_abd01fdfe9894a5222222f9791920990d"><div class="ttname"><a href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#abd01fdfe9894a5222222f9791920990d">Nop.Services.Messages.INewsLetterSubscriptionService.GetAllNewsLetterSubscriptionsAsync</a></div><div class="ttdeci">Task&lt; IPagedList&lt; NewsLetterSubscription &gt; &gt; GetAllNewsLetterSubscriptionsAsync(string email=null, DateTime? createdFromUtc=null, DateTime? createdToUtc=null, int storeId=0, bool? isActive=null, int customerRoleId=0, int pageIndex=0, int pageSize=int.MaxValue)</div><div class="ttdoc">Gets the newsletter subscription list</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a914f23690b1ad8e4cd96e268ee57229b">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._actionContextAccessor</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0ffa30e9d41ec0d7f80e4d29308c8233">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._countryService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a786b95982b8815ec2d18c62e08ff2d89">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._customerService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._genericAttributeService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#af6bebca75bc1227c74b70ca74f39ecd6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._newsLetterSubscriptionService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._settingService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a64ceeb0bc1330ce7e10caf79cc28e05f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._stateProvinceService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ad67cc6bb2af3e7488445dc44fdf20293">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._urlHelperFactory</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aef75c004de27abf47b34999a80d8c3ca">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._webHelper</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#aefa25c57ae6eb1a4efc563d05605d291">Nop.Core.Domain.Customers.NopCustomerDefaults.CityAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ac19efdd3f97fd0bbc9e9dd49c04fba25">Nop.Core.Domain.Customers.NopCustomerDefaults.CompanyAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#af15b7ad8fbe5eef84106f7c00102d1ba">Nop.Core.Domain.Customers.NopCustomerDefaults.CountryIdAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ac5a25d0aeaa86995d7b148704c9d8e11">Nop.Core.Domain.Customers.NopCustomerDefaults.CountyAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a79549f630ebe948858ca3e1d38578bce">Nop.Core.Domain.Customers.NopCustomerDefaults.DateOfBirthAttribute</a>, <a class="el" href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166_country.html#a6bdbbbc7c3fbc60fd0428347bca7527f">Nop.Services.Installation.ISO3166Country.DialCodes</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a78dc817a2bbded4a39043fe53107a0c8">Nop.Core.Domain.Customers.NopCustomerDefaults.FaxAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a3e388ff4e1d4cb7e5fc974c7664d505d">Nop.Core.Domain.Customers.NopCustomerDefaults.FirstNameAttribute</a>, <a class="el" href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166.html#a38be47e6cbb11c01df3b767fba0367be">Nop.Services.Installation.ISO3166.FromISOCode()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a1862d35f71b99c7723656f1b5e88c477">Nop.Core.Domain.Customers.NopCustomerDefaults.GenderAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a3da4b6c237604daff37b7dd993a692cc">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetAccountLanguageAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#abd01fdfe9894a5222222f9791920990d">Nop.Services.Messages.INewsLetterSubscriptionService.GetAllNewsLetterSubscriptionsAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_directory_1_1_i_country_service.html#af152b8c9c943b5b3b36db129b6302dac">Nop.Services.Directory.ICountryService.GetCountryByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_web_helper.html#af8de123fc32935d3b35faf2dd99c0aae">Nop.Core.IWebHelper.GetCurrentRequestProtocol()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9fd859a1a429bde367fc480964255d5e">Nop.Services.Customers.ICustomerService.GetCustomerByEmailAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_directory_1_1_i_state_province_service.html#a3150c38731e6df31055277657cf72ba8">Nop.Services.Directory.IStateProvinceService.GetStateProvinceByIdAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a49befc93187d853fb8336d6706f83691">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.ImportContactsRoute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a20c73e0c786ca559bd9042c20f44b677">Nop.Core.Domain.Customers.NopCustomerDefaults.LastNameAttribute</a>, <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">Nop.Web.Models.Directory.name</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ad236f4df1ea20b398b4dee9860aebbd4">Nop.Core.Domain.Customers.NopCustomerDefaults.PhoneAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a5c6157539e49e186b8539994023a19f7">Nop.Core.Domain.Customers.NopCustomerDefaults.StateProvinceIdAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a1a2a4a75ad02f08b3713efc7e3de2ecd">Nop.Core.Domain.Customers.NopCustomerDefaults.StreetAddress2Attribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a6b45fef38790f6628f6f829d571c02fc">Nop.Core.Domain.Customers.NopCustomerDefaults.StreetAddressAttribute</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3cc46af402d1916555ea7a7ae07a361c">Nop.Services.Logging.ILogger.WarningAsync()</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a72342f719ff6b945be9a506ec2e24337">Nop.Core.Domain.Customers.NopCustomerDefaults.ZipPostalCodeAttribute</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#adf501cbb95ffb7dcd62c8e2e649d1a3f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SynchronizeAsync()</a>.</p>

</div>
</div>
<a id="ae20d3092b8da0eb89cd5c3479b9de19c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae20d3092b8da0eb89cd5c3479b9de19c">&#9670;&nbsp;</a></span>PrepareAttributesAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;string&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.PrepareAttributesAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check and create missing attributes in account </p>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the errors if exist </dd></dl>
<div class="fragment"><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        {</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;            {</div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> AttributesApi(config));</div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160; </div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;                var attributes = await client.GetAttributesAsync();</div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;                var attributeNames = attributes.Attributes.Select(s =&gt; s.Name).ToList();</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160; </div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;                <span class="comment">//prepare attributes to create</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;                var initialAttributes = <span class="keyword">new</span> List&lt;(CategoryEnum category, <span class="keywordtype">string</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models.html#a5d49a2599538bfd3f9e5333e94ca11b0">Name</a>, <span class="keywordtype">string</span> <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#ae81f2364e2d171b827c01c1105f2be5f">Value</a>, CreateAttribute.TypeEnum? <a class="code" href="namespace_nop_1_1_plugin_1_1_tax_1_1_avalara_1_1_models_1_1_tax.html#aa71b7e7409aa6578c120ec3382570ad8">Type</a>)&gt;</div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                {</div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.UsernameServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.PhoneServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.CountryServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.StoreIdServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.GenderServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.DateOfBirthServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.CompanyServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.Address1ServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.Address2ServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.ZipCodeServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.CityServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.CountyServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.StateServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                    (CategoryEnum.Normal, SendinblueDefaults.FaxServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;                    (CategoryEnum.Transactional, SendinblueDefaults.OrderIdServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Id),</div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                    (CategoryEnum.Transactional, SendinblueDefaults.OrderDateServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;                    (CategoryEnum.Transactional, SendinblueDefaults.OrderTotalServiceAttribute, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text),</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;                    (CategoryEnum.Calculated, SendinblueDefaults.OrderTotalSumServiceAttribute, $<span class="stringliteral">&quot;SUM[{SendinblueDefaults.OrderTotalServiceAttribute}]&quot;</span>, <span class="keyword">null</span>),</div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;                    (CategoryEnum.Calculated, SendinblueDefaults.OrderTotalMonthSumServiceAttribute, $<span class="stringliteral">&quot;SUM[{SendinblueDefaults.OrderTotalServiceAttribute},{SendinblueDefaults.OrderDateServiceAttribute},&gt;,NOW(-30)]&quot;</span>, <span class="keyword">null</span>),</div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;                    (CategoryEnum.Calculated, SendinblueDefaults.OrderCountServiceAttribute, $<span class="stringliteral">&quot;COUNT[{SendinblueDefaults.OrderIdServiceAttribute}]&quot;</span>, <span class="keyword">null</span>),</div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;                    (CategoryEnum.Global, SendinblueDefaults.AllOrderTotalSumServiceAttribute, $<span class="stringliteral">&quot;SUM[{SendinblueDefaults.OrderTotalSumServiceAttribute}]&quot;</span>, <span class="keyword">null</span>),</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;                    (CategoryEnum.Global, SendinblueDefaults.AllOrderTotalMonthSumServiceAttribute, $<span class="stringliteral">&quot;SUM[{SendinblueDefaults.OrderTotalMonthSumServiceAttribute}]&quot;</span>, <span class="keyword">null</span>),</div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;                    (CategoryEnum.Global, SendinblueDefaults.AllOrderCountServiceAttribute, $<span class="stringliteral">&quot;SUM[{SendinblueDefaults.OrderCountServiceAttribute}]&quot;</span>, <span class="keyword">null</span>)</div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;                };</div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160; </div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;                <span class="comment">//create attributes that are not already on account</span></div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;                var newAttributes = <span class="keyword">new</span> List&lt;(CategoryEnum category, <span class="keywordtype">string</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models.html#a5d49a2599538bfd3f9e5333e94ca11b0">Name</a>, <span class="keywordtype">string</span> <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#ae81f2364e2d171b827c01c1105f2be5f">Value</a>, CreateAttribute.TypeEnum? <a class="code" href="namespace_nop_1_1_plugin_1_1_tax_1_1_avalara_1_1_models_1_1_tax.html#aa71b7e7409aa6578c120ec3382570ad8">Type</a>)&gt;();</div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;                <span class="keywordflow">foreach</span> (var attribute <span class="keywordflow">in</span> initialAttributes)</div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;                {</div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;                    <span class="keywordflow">if</span> (!attributeNames.Contains(attribute.Name))</div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;                        newAttributes.Add(attribute);</div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;                }</div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160; </div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2b02ae0d9a70e55c42b79eea47dd2618">CreateAttibutesAsync</a>(newAttributes);</div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;            }</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;            {</div>
<div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;                <span class="keywordflow">return</span> exception.Message;</div>
<div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;            }</div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a00c340784c05c0110207ae30f48f03c1">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.Address1ServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a824df9827e5436e281a52565bd45d41d">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.Address2ServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a269b5750b9d0e787987d7bbe9f584746">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.AllOrderCountServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a235d58da5666f5c55b9739ceb675b849">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.AllOrderTotalMonthSumServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a24252172d45fe4457063a96d130b0fcd">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.AllOrderTotalSumServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a9ddf9ceddb9e3f19806c379d89d8f927">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.CityServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a4f50deced5a25e5dcda6c3f9217fbbe8">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.CompanyServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#ad7e4eb80df808edec547bcb31ee8476c">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.CountryServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a1709c9d4871202a655a1b1ceb44676a8">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.CountyServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2b02ae0d9a70e55c42b79eea47dd2618">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.CreateAttibutesAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a844742da7eea81bf7ea9de1dd9e0dc58">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.DateOfBirthServiceAttribute</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a4bdac4aaf7e3f812a52d5eaf5f72e0ac">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FaxServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a4ec5bc308c94620201c0d4af9b5b1972">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.GenderServiceAttribute</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models.html#a5d49a2599538bfd3f9e5333e94ca11b0">Nop.Plugin.Misc.Sendinblue.Models.Name</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a9642535c6163a58ec329de3fc94e8571">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.OrderCountServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a4e4718b19a8551dc526862dfb6b2d476">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.OrderDateServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a9f2765d5f65ea17d89590dd3aff8dbbe">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.OrderIdServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a0dce03d42233568c5fa1061fcf29dbdc">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.OrderTotalMonthSumServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a04b18e9d31ab6e5b7778d041d16ac797">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.OrderTotalServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#aefad0bd9c47ab002ed1284113872c7b7">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.OrderTotalSumServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a3d84052d189e5625a13a56cfeb9c9f9d">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.PhoneServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#ae92417727bd8ebdf2913a64807c1238a">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.StateServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a61968a110883b9cce8c0616305fa701e">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.StoreIdServiceAttribute</a>, <a class="el" href="namespace_nop_1_1_plugin_1_1_tax_1_1_avalara_1_1_models_1_1_tax.html#aa71b7e7409aa6578c120ec3382570ad8">Nop.Plugin.Tax.Avalara.Models.Tax.Type</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#ad8a967233fbecd1d0e1db861b7a32bc5">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.UsernameServiceAttribute</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#ae81f2364e2d171b827c01c1105f2be5f">Nop.Web.Areas.Admin.Models.Catalog.Value</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a773fb5733cc0c3ae3858ce8ee8d939a5">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.ZipCodeServiceAttribute</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#a2425c04a29809b86012101967a88e13b">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.PrepareModelAsync()</a>.</p>

</div>
</div>
<a id="a113dc650cf974a49fe9e984fce44669a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a113dc650cf974a49fe9e984fce44669a">&#9670;&nbsp;</a></span>PrepareTransactionalAttributesAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;string&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.PrepareTransactionalAttributesAsync </td>
          <td>(</td>
          <td class="paramtype">IList&lt; string &gt;&#160;</td>
          <td class="paramname"><em>tokens</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move message template tokens to transactional attributes </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">tokens</td><td>List of available message templates tokens</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the errors if exist </dd></dl>
<div class="fragment"><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;        {</div>
<div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            {</div>
<div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> AttributesApi(config));</div>
<div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160; </div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;                <span class="comment">//get already existing transactional attributes</span></div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;                var attributes = await client.GetAttributesAsync();</div>
<div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;                var transactionalAttributes = attributes.Attributes</div>
<div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;                    .Where(attribute =&gt; attribute.Category == CategoryEnum.Transactional).ToList();</div>
<div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160; </div>
<div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;                <span class="comment">//bring tokens to attributes format</span></div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;                tokens = tokens.Select(token =&gt; token.Replace(<span class="stringliteral">&quot;%&quot;</span>, <span class="stringliteral">&quot;&quot;</span>).Replace(<span class="stringliteral">&quot;.&quot;</span>, <span class="stringliteral">&quot;_&quot;</span>).Replace(<span class="stringliteral">&quot;(s)&quot;</span>, <span class="stringliteral">&quot;-s-&quot;</span>).ToUpperInvariant()).ToList();</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160; </div>
<div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;                <span class="comment">//get attributes that are not already on account</span></div>
<div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;                tokens = tokens.Except(transactionalAttributes.Select(attribute =&gt; attribute.Name)).ToList();</div>
<div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;                <span class="keywordflow">if</span> (!tokens.Any())</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                    <span class="keywordflow">return</span> <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160; </div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;                <span class="comment">//prepare attributes to create</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;                var newAttributes = <span class="keyword">new</span> List&lt;(CategoryEnum category, <span class="keywordtype">string</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models.html#a5d49a2599538bfd3f9e5333e94ca11b0">Name</a>, <span class="keywordtype">string</span> <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#ae81f2364e2d171b827c01c1105f2be5f">Value</a>, CreateAttribute.TypeEnum? <a class="code" href="namespace_nop_1_1_plugin_1_1_tax_1_1_avalara_1_1_models_1_1_tax.html#aa71b7e7409aa6578c120ec3382570ad8">Type</a>)&gt;();</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                <span class="keywordflow">foreach</span> (var token <span class="keywordflow">in</span> tokens)</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                {</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;                    newAttributes.Add((CategoryEnum.Transactional, token, <span class="keyword">null</span>, CreateAttribute.TypeEnum.Text));</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;                }</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160; </div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                <span class="keywordflow">return</span> await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2b02ae0d9a70e55c42b79eea47dd2618">CreateAttibutesAsync</a>(newAttributes);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;            }</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            {</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                <span class="keywordflow">return</span> exception.Message;</div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            }</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2b02ae0d9a70e55c42b79eea47dd2618">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.CreateAttibutesAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_models.html#a5d49a2599538bfd3f9e5333e94ca11b0">Nop.Plugin.Misc.Sendinblue.Models.Name</a>, <a class="el" href="namespace_nop_1_1_plugin_1_1_tax_1_1_avalara_1_1_models_1_1_tax.html#aa71b7e7409aa6578c120ec3382570ad8">Nop.Plugin.Tax.Avalara.Models.Tax.Type</a> e <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_catalog.html#ae81f2364e2d171b827c01c1105f2be5f">Nop.Web.Areas.Admin.Models.Catalog.Value</a>.</p>

</div>
</div>
<a id="a4650586c3ba5fc00d8f4e93563e416e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4650586c3ba5fc00d8f4e93563e416e6">&#9670;&nbsp;</a></span>SendSMSAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendSMSAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send SMS </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">to</td><td>Phone number of the receiver</td></tr>
    <tr><td class="paramname">from</td><td>Name of sender</td></tr>
    <tr><td class="paramname">text</td><td>Text</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>
<div class="fragment"><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;        {</div>
<div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;            <span class="comment">//whether SMS notifications enabled</span></div>
<div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;            var sendinblueSettings = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a>.<a class="code" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html#ac5f44acbcb9ac9f8236ea04c2e2eeb83">LoadSettingAsync</a>&lt;SendinblueSettings&gt;();</div>
<div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;            <span class="keywordflow">if</span> (!sendinblueSettings.UseSmsNotifications)</div>
<div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;                <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160; </div>
<div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;            {</div>
<div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                <span class="comment">//check number and text</span></div>
<div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(to) || <span class="keywordtype">string</span>.IsNullOrEmpty(text))</div>
<div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>(<span class="stringliteral">&quot;Phone number or SMS text is empty&quot;</span>);</div>
<div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160; </div>
<div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> TransactionalSMSApi(config));</div>
<div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160; </div>
<div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                <span class="comment">//create SMS data</span></div>
<div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;                var transactionalSms = <span class="keyword">new</span> SendTransacSms(sender: from, recipient: to, content: text, type: SendTransacSms.TypeEnum.Transactional);</div>
<div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160; </div>
<div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;                <span class="comment">//send SMS</span></div>
<div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;                var sms = await client.SendTransacSmsAsync(transactionalSms);</div>
<div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3403534c3801b0b06f96d9415ab8de82">InformationAsync</a>($<span class="stringliteral">&quot;Sendinblue SMS sent: {sms?.Reference ?? $&quot;</span>credits remaining {sms?.RemainingCredits?.ToString()}<span class="stringliteral">&quot;}&quot;</span>);</div>
<div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;            }</div>
<div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;            {</div>
<div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue SMS sending error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;            }</div>
<div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;        }</div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_logging_1_1_i_logger_html_a3403534c3801b0b06f96d9415ab8de82"><div class="ttname"><a href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3403534c3801b0b06f96d9415ab8de82">Nop.Services.Logging.ILogger.InformationAsync</a></div><div class="ttdeci">Task InformationAsync(string message, Exception exception=null, Customer customer=null)</div><div class="ttdoc">Information</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._settingService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3403534c3801b0b06f96d9415ab8de82">Nop.Services.Logging.ILogger.InformationAsync()</a> e <a class="el" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html#ac5f44acbcb9ac9f8236ea04c2e2eeb83">Nop.Services.Configuration.ISettingService.LoadSettingAsync()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_message_service.html#a003dd666432aa674ae1fdcac5b6791de">Nop.Plugin.Misc.Sendinblue.Services.SendinblueMessageService.SendSmsNotificationAsync()</a>.</p>

</div>
</div>
<a id="ab77a0d818576557d0ddfe07f4b157de5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab77a0d818576557d0ddfe07f4b157de5">&#9670;&nbsp;</a></span>SendSMSCampaignAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;string&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendSMSCampaignAsync </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>listId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send SMS campaign </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">listId</td><td>Contact list identifier</td></tr>
    <tr><td class="paramname">from</td><td>Name of sender</td></tr>
    <tr><td class="paramname">text</td><td>Text</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>
<div class="fragment"><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;        {</div>
<div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            {</div>
<div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;                <span class="comment">//check list and text</span></div>
<div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;                <span class="keywordflow">if</span> (listId == 0 || <span class="keywordtype">string</span>.IsNullOrEmpty(text) || <span class="keywordtype">string</span>.IsNullOrEmpty(from))</div>
<div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>(<span class="stringliteral">&quot;List or SMS text or sender name is empty&quot;</span>);</div>
<div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160; </div>
<div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> SMSCampaignsApi(config));</div>
<div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160; </div>
<div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;                <span class="comment">//create SMS campaign</span></div>
<div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;                var campaign = await client.CreateSmsCampaignAsync(<span class="keyword">new</span> CreateSmsCampaign(<a class="code" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">name</a>: <a class="code" href="class_nop_1_1_core_1_1_common_helper.html">CommonHelper</a>.<a class="code" href="class_nop_1_1_core_1_1_common_helper.html#a7e1b63566b29d344beaacd65866a74c2">EnsureMaximumLength</a>(text, 20),</div>
<div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;                    sender: from, content: text, recipients: <span class="keyword">new</span> CreateSmsCampaignRecipients(<span class="keyword">new</span> List&lt;long?&gt; { listId })));</div>
<div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160; </div>
<div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;                <span class="comment">//send campaign</span></div>
<div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;                await client.SendSmsCampaignNowAsync(campaign.Id);</div>
<div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;            }</div>
<div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;            {</div>
<div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue SMS sending error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                <span class="keywordflow">return</span> exception.Message;</div>
<div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;            }</div>
<div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160; </div>
<div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;            <span class="keywordflow">return</span> <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_common_helper_html"><div class="ttname"><a href="class_nop_1_1_core_1_1_common_helper.html">Nop.Core.CommonHelper</a></div><div class="ttdoc">Represents a common helper</div><div class="ttdef"><b>Definition:</b> CommonHelper.cs:17</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_common_helper_html_a7e1b63566b29d344beaacd65866a74c2"><div class="ttname"><a href="class_nop_1_1_core_1_1_common_helper.html#a7e1b63566b29d344beaacd65866a74c2">Nop.Core.CommonHelper.EnsureMaximumLength</a></div><div class="ttdeci">static string EnsureMaximumLength(string str, int maxLength, string postfix=null)</div><div class="ttdoc">Ensure that a string doesn't exceed maximum allowed length</div><div class="ttdef"><b>Definition:</b> CommonHelper.cs:115</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="class_nop_1_1_core_1_1_common_helper.html#a7e1b63566b29d344beaacd65866a74c2">Nop.Core.CommonHelper.EnsureMaximumLength()</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a> e <a class="el" href="namespace_nop_1_1_web_1_1_models_1_1_directory.html#a72fa3e0da3ac8615d06df00bddf53ee7">Nop.Web.Models.Directory.name</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#a1303c6658bee2ac962a01c9b915414b5">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.SubmitCampaign()</a>.</p>

</div>
</div>
<a id="a2e8e7a0ffb51a10e541631ab54e7c10f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e8e7a0ffb51a10e541631ab54e7c10f">&#9670;&nbsp;</a></span>SmtpIsEnabledAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;(bool Enabled, string Errors)&gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SmtpIsEnabledAsync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check whether SMTP is enabled on account </p>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the result of check; errors if exist </dd></dl>
<div class="fragment"><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;        {</div>
<div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;            {</div>
<div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> AccountApi(config));</div>
<div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160; </div>
<div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                <span class="comment">//get account</span></div>
<div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;                var account = await client.GetAccountAsync();</div>
<div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                <span class="keywordflow">return</span> (account.Relay?.Enabled ?? <span class="keyword">false</span>, <span class="keyword">null</span>);</div>
<div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;            }</div>
<div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;            {</div>
<div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                <span class="keywordflow">return</span> (<span class="keyword">false</span>, exception.Message);</div>
<div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;            }</div>
<div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a> e <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#a278313a6e29b8ad6a539789d372fd9da">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.ConfigureSMTP()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#a2425c04a29809b86012101967a88e13b">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.PrepareModelAsync()</a>.</p>

</div>
</div>
<a id="a4d20d54a03c56570cb397256fbb4397c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d20d54a03c56570cb397256fbb4397c">&#9670;&nbsp;</a></span>SubscribeAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SubscribeAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html">NewsLetterSubscription</a>&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Subscribe new contact </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Subscription</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>
<div class="fragment"><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        {</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            {</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> ContactsApi(config));</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160; </div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                <span class="comment">//try to get list identifier</span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                var key = $<span class="stringliteral">&quot;{nameof(SendinblueSettings)}.{nameof(SendinblueSettings.ListId)}&quot;</span>;</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                var listId = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a>.GetSettingByKeyAsync&lt;<span class="keywordtype">int</span>&gt;(key, storeId: subscription.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a4a16815f555c6423eb317dbf08b3264f">StoreId</a>);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                <span class="keywordflow">if</span> (listId == 0)</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                    listId = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a>.GetSettingByKeyAsync&lt;<span class="keywordtype">int</span>&gt;(key);</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;                <span class="keywordflow">if</span> (listId == 0)</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                {</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                    await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3cc46af402d1916555ea7a7ae07a361c">WarningAsync</a>($<span class="stringliteral">&quot;Sendinblue synchronization warning: List ID is empty for store #{subscription.StoreId}&quot;</span>);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                }</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160; </div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                <span class="comment">//get all contacts of the list</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                var contacts = await client.GetContactsFromListAsync(listId);</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160; </div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                <span class="comment">//whether subscribed contact already in the list</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                var <span class="keyword">template</span> = <span class="keyword">new</span> { contacts = <span class="keyword">new</span>[] { <span class="keyword">new</span> { email = <span class="keywordtype">string</span>.Empty } } };</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                var contactObjects = JsonConvert.DeserializeAnonymousType(contacts.ToJson(), <span class="keyword">template</span>);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                var alreadyExist = contactObjects?.contacts?.Any(contact =&gt; contact.email == subscription.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Email</a>.ToLower()) ?? <span class="keyword">false</span>;</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160; </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                <span class="comment">//Add new contact</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                <span class="keywordflow">if</span> (!alreadyExist)</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                {</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;                    var firstName = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;                    var lastName = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;                    var phone = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;                    var sms = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;                    var countryName = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;                    var gender = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;                    var dateOfBirth = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;                    var company = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                    var address1 = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                    var address2 = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                    var zipCode = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                    var city = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                    var county = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                    var state = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                    var fax = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160; </div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                    var customer = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a786b95982b8815ec2d18c62e08ff2d89">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9fd859a1a429bde367fc480964255d5e">GetCustomerByEmailAsync</a>(subscription.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Email</a>);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                    <span class="keywordflow">if</span> (customer != <span class="keyword">null</span>)</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                    {</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                        firstName = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a3e388ff4e1d4cb7e5fc974c7664d505d">FirstNameAttribute</a>);</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                        lastName = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a20c73e0c786ca559bd9042c20f44b677">LastNameAttribute</a>);</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                        phone = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ad236f4df1ea20b398b4dee9860aebbd4">PhoneAttribute</a>);</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                        var countryId = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">int</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#af15b7ad8fbe5eef84106f7c00102d1ba">CountryIdAttribute</a>);</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                        var country = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0ffa30e9d41ec0d7f80e4d29308c8233">_countryService</a>.<a class="code" href="interface_nop_1_1_services_1_1_directory_1_1_i_country_service.html#af152b8c9c943b5b3b36db129b6302dac">GetCountryByIdAsync</a>(countryId);</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                        countryName = country?.Name;</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                        var countryIsoCode = country?.NumericIsoCode ?? 0;</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                        <span class="keywordflow">if</span> (countryIsoCode &gt; 0 &amp;&amp; !<span class="keywordtype">string</span>.IsNullOrEmpty(phone))</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                        {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                            <span class="comment">//use the first phone code only</span></div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                            var phoneCode = <a class="code" href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166.html">ISO3166</a>.<a class="code" href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166.html#a38be47e6cbb11c01df3b767fba0367be">FromISOCode</a>(countryIsoCode)</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;                                ?.<a class="code" href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166_country.html#a6bdbbbc7c3fbc60fd0428347bca7527f">DialCodes</a>?.FirstOrDefault()?.Replace(<span class="stringliteral">&quot; &quot;</span>, <span class="keywordtype">string</span>.Empty) ?? <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                            sms = phone.Replace($<span class="stringliteral">&quot;+{phoneCode}&quot;</span>, <span class="keywordtype">string</span>.Empty);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                        }</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                        gender = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a1862d35f71b99c7723656f1b5e88c477">GenderAttribute</a>);</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                        dateOfBirth = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a79549f630ebe948858ca3e1d38578bce">DateOfBirthAttribute</a>);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                        company = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ac19efdd3f97fd0bbc9e9dd49c04fba25">CompanyAttribute</a>);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                        address1 = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a6b45fef38790f6628f6f829d571c02fc">StreetAddressAttribute</a>);</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                        address2 = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a1a2a4a75ad02f08b3713efc7e3de2ecd">StreetAddress2Attribute</a>);</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                        zipCode = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a72342f719ff6b945be9a506ec2e24337">ZipPostalCodeAttribute</a>);</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                        city = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#aefa25c57ae6eb1a4efc563d05605d291">CityAttribute</a>);</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                        county = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ac5a25d0aeaa86995d7b148704c9d8e11">CountyAttribute</a>);</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                        state = (await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a64ceeb0bc1330ce7e10caf79cc28e05f">_stateProvinceService</a>.<a class="code" href="interface_nop_1_1_services_1_1_directory_1_1_i_state_province_service.html#a3150c38731e6df31055277657cf72ba8">GetStateProvinceByIdAsync</a>(await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">int</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a5c6157539e49e186b8539994023a19f7">StateProvinceIdAttribute</a>)))?.Name;</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                        fax = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">_genericAttributeService</a>.GetAttributeAsync&lt;<span class="keywordtype">string</span>&gt;(customer, <a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html">NopCustomerDefaults</a>.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a78dc817a2bbded4a39043fe53107a0c8">FaxAttribute</a>);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                    }</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160; </div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                    var attributes = <span class="keyword">new</span> Dictionary&lt;string, string&gt;</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                    {</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                        [SendinblueDefaults.UsernameServiceAttribute] = customer?.Username,</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                        [SendinblueDefaults.SMSServiceAttribute] = sms,</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                        [SendinblueDefaults.PhoneServiceAttribute] = phone,</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                        [SendinblueDefaults.CountryServiceAttribute] = countryName,</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                        [SendinblueDefaults.StoreIdServiceAttribute] = subscription.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a4a16815f555c6423eb317dbf08b3264f">StoreId</a>.ToString(),</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                        [SendinblueDefaults.GenderServiceAttribute] = gender,</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                        [SendinblueDefaults.DateOfBirthServiceAttribute] = dateOfBirth,</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;                        [SendinblueDefaults.CompanyServiceAttribute] = company,</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;                        [SendinblueDefaults.Address1ServiceAttribute] = address1,</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                        [SendinblueDefaults.Address2ServiceAttribute] = address2,</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                        [SendinblueDefaults.ZipCodeServiceAttribute] = zipCode,</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                        [SendinblueDefaults.CityServiceAttribute] = city,</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                        [SendinblueDefaults.CountyServiceAttribute] = county,</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;                        [SendinblueDefaults.StateServiceAttribute] = state,</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                        [SendinblueDefaults.FaxServiceAttribute] = fax</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                    };</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160; </div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;                    <span class="keywordflow">switch</span> (await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a3da4b6c237604daff37b7dd993a692cc">GetAccountLanguageAsync</a>())</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                    {</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.French:</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                            attributes.Add(SendinblueDefaults.FirstNameFrenchServiceAttribute, firstName);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                            attributes.Add(SendinblueDefaults.LastNameFrenchServiceAttribute, lastName);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.German:</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                            attributes.Add(SendinblueDefaults.FirstNameGermanServiceAttribute, firstName);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                            attributes.Add(SendinblueDefaults.LastNameGermanServiceAttribute, lastName);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.Italian:</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                            attributes.Add(SendinblueDefaults.FirstNameItalianServiceAttribute, firstName);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                            attributes.Add(SendinblueDefaults.LastNameItalianServiceAttribute, lastName);</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.Portuguese:</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                            attributes.Add(SendinblueDefaults.FirstNamePortugueseServiceAttribute, firstName);</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                            attributes.Add(SendinblueDefaults.LastNamePortugueseServiceAttribute, lastName);</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.Spanish:</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                            attributes.Add(SendinblueDefaults.FirstNameSpanishServiceAttribute, firstName);</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                            attributes.Add(SendinblueDefaults.LastNameSpanishServiceAttribute, lastName);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                        <span class="keywordflow">case</span> <a class="code" href="namespace_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_domain.html#aa85bc49432cce04b80943236ba863203">SendinblueAccountLanguage</a>.English:</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                            attributes.Add(SendinblueDefaults.FirstNameServiceAttribute, firstName);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                            attributes.Add(SendinblueDefaults.LastNameServiceAttribute, lastName);</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                            <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                    }</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160; </div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                    var createContact = <span class="keyword">new</span> CreateContact</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                    {</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                        <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_common.html#a516765ab5fd20394419b236f4132493d">Email</a> = subscription.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Email</a>,</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                        <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_reports.html#aa62026900620bb2f70778bcac297c5a8">Attributes</a> = attributes,</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                        ListIds = <span class="keyword">new</span> List&lt;long?&gt; { listId },</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                        UpdateEnabled = <span class="keyword">true</span></div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                    };</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                    await client.CreateContactAsync(createContact);</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                }</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                <span class="keywordflow">else</span></div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                {</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                    <span class="comment">//update contact</span></div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                    var updateContact = <span class="keyword">new</span> UpdateContact</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                    {</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                        ListIds = <span class="keyword">new</span> List&lt;long?&gt; { listId },</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                        EmailBlacklisted = <span class="keyword">false</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                    };</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                    await client.UpdateContactAsync(subscription.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Email</a>, updateContact);</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                }</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription_html_a08899b81919c6431da9eb183ed451271"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Nop.Core.Domain.Messages.NewsLetterSubscription.Email</a></div><div class="ttdeci">string Email</div><div class="ttdoc">Gets or sets the subscriber email</div><div class="ttdef"><b>Definition:</b> NewsLetterSubscription.cs:18</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription_html_a4a16815f555c6423eb317dbf08b3264f"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a4a16815f555c6423eb317dbf08b3264f">Nop.Core.Domain.Messages.NewsLetterSubscription.StoreId</a></div><div class="ttdeci">int StoreId</div><div class="ttdoc">Gets or sets the store identifier in which a customer has subscribed to newsletter</div><div class="ttdef"><b>Definition:</b> NewsLetterSubscription.cs:28</div></div>
<div class="ttc" id="anamespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_reports_html_aa62026900620bb2f70778bcac297c5a8"><div class="ttname"><a href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_reports.html#aa62026900620bb2f70778bcac297c5a8">Nop.Web.Areas.Admin.Models.Reports.Attributes</a></div><div class="ttdeci">string Attributes</div><div class="ttdef"><b>Definition:</b> LowStockProductModel.cs:16</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0ffa30e9d41ec0d7f80e4d29308c8233">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._countryService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a786b95982b8815ec2d18c62e08ff2d89">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._customerService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aba3413a44217dca55a2ee968fb6a7344">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._genericAttributeService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._settingService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a64ceeb0bc1330ce7e10caf79cc28e05f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._stateProvinceService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a00c340784c05c0110207ae30f48f03c1">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.Address1ServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a824df9827e5436e281a52565bd45d41d">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.Address2ServiceAttribute</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_reports.html#aa62026900620bb2f70778bcac297c5a8">Nop.Web.Areas.Admin.Models.Reports.Attributes</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#aefa25c57ae6eb1a4efc563d05605d291">Nop.Core.Domain.Customers.NopCustomerDefaults.CityAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a9ddf9ceddb9e3f19806c379d89d8f927">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.CityServiceAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ac19efdd3f97fd0bbc9e9dd49c04fba25">Nop.Core.Domain.Customers.NopCustomerDefaults.CompanyAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a4f50deced5a25e5dcda6c3f9217fbbe8">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.CompanyServiceAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#af15b7ad8fbe5eef84106f7c00102d1ba">Nop.Core.Domain.Customers.NopCustomerDefaults.CountryIdAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#ad7e4eb80df808edec547bcb31ee8476c">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.CountryServiceAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ac5a25d0aeaa86995d7b148704c9d8e11">Nop.Core.Domain.Customers.NopCustomerDefaults.CountyAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a1709c9d4871202a655a1b1ceb44676a8">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.CountyServiceAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a79549f630ebe948858ca3e1d38578bce">Nop.Core.Domain.Customers.NopCustomerDefaults.DateOfBirthAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a844742da7eea81bf7ea9de1dd9e0dc58">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.DateOfBirthServiceAttribute</a>, <a class="el" href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166_country.html#a6bdbbbc7c3fbc60fd0428347bca7527f">Nop.Services.Installation.ISO3166Country.DialCodes</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Nop.Core.Domain.Messages.NewsLetterSubscription.Email</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_common.html#a516765ab5fd20394419b236f4132493d">Nop.Web.Areas.Admin.Models.Common.Email</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a78dc817a2bbded4a39043fe53107a0c8">Nop.Core.Domain.Customers.NopCustomerDefaults.FaxAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a4bdac4aaf7e3f812a52d5eaf5f72e0ac">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FaxServiceAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a3e388ff4e1d4cb7e5fc974c7664d505d">Nop.Core.Domain.Customers.NopCustomerDefaults.FirstNameAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#ae79ad4ccac5654fba26e8c903acc8d20">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FirstNameFrenchServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#ae68a10f8cdc7683086b443747627dfba">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FirstNameGermanServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a07eda0c5675df6de8c402b1cdd8d2301">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FirstNameItalianServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a19b7f078cf57b18aee417ac3db22f9b3">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FirstNamePortugueseServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a3b5236630c5dbffb4cbcf926b336eed5">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FirstNameServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a6bcdbba93d9d57adcf8f52149a55962b">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.FirstNameSpanishServiceAttribute</a>, <a class="el" href="class_nop_1_1_services_1_1_installation_1_1_i_s_o3166.html#a38be47e6cbb11c01df3b767fba0367be">Nop.Services.Installation.ISO3166.FromISOCode()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a1862d35f71b99c7723656f1b5e88c477">Nop.Core.Domain.Customers.NopCustomerDefaults.GenderAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a4ec5bc308c94620201c0d4af9b5b1972">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.GenderServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a3da4b6c237604daff37b7dd993a692cc">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetAccountLanguageAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_directory_1_1_i_country_service.html#af152b8c9c943b5b3b36db129b6302dac">Nop.Services.Directory.ICountryService.GetCountryByIdAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9fd859a1a429bde367fc480964255d5e">Nop.Services.Customers.ICustomerService.GetCustomerByEmailAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_directory_1_1_i_state_province_service.html#a3150c38731e6df31055277657cf72ba8">Nop.Services.Directory.IStateProvinceService.GetStateProvinceByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a20c73e0c786ca559bd9042c20f44b677">Nop.Core.Domain.Customers.NopCustomerDefaults.LastNameAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a63afb67da889f8db4c82458f8f392b64">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.LastNameFrenchServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a1cabb602c6cc4ab707752ea9f5f9dd83">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.LastNameGermanServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a27575633aad97013fe5148fe0d55fd97">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.LastNameItalianServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a7916b1d84ef940bf1a27802c37383660">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.LastNamePortugueseServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a4a971dfb07bcfb78138c035644b2449d">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.LastNameServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#ad9bea784bef0ccdf4468f7ac5e02a671">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.LastNameSpanishServiceAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#ad236f4df1ea20b398b4dee9860aebbd4">Nop.Core.Domain.Customers.NopCustomerDefaults.PhoneAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a3d84052d189e5625a13a56cfeb9c9f9d">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.PhoneServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a91d8500c2faa96bfc5e90d29bfe7d4bc">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.SMSServiceAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a5c6157539e49e186b8539994023a19f7">Nop.Core.Domain.Customers.NopCustomerDefaults.StateProvinceIdAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#ae92417727bd8ebdf2913a64807c1238a">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.StateServiceAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a4a16815f555c6423eb317dbf08b3264f">Nop.Core.Domain.Messages.NewsLetterSubscription.StoreId</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a61968a110883b9cce8c0616305fa701e">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.StoreIdServiceAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a1a2a4a75ad02f08b3713efc7e3de2ecd">Nop.Core.Domain.Customers.NopCustomerDefaults.StreetAddress2Attribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a6b45fef38790f6628f6f829d571c02fc">Nop.Core.Domain.Customers.NopCustomerDefaults.StreetAddressAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#ad8a967233fbecd1d0e1db861b7a32bc5">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.UsernameServiceAttribute</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3cc46af402d1916555ea7a7ae07a361c">Nop.Services.Logging.ILogger.WarningAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a773fb5733cc0c3ae3858ce8ee8d939a5">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.ZipCodeServiceAttribute</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_customers_1_1_nop_customer_defaults.html#a72342f719ff6b945be9a506ec2e24337">Nop.Core.Domain.Customers.NopCustomerDefaults.ZipPostalCodeAttribute</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_event_consumer.html#a4b4c53b20e620908b8254196be287925">Nop.Plugin.Misc.Sendinblue.Services.EventConsumer.HandleEventAsync()</a>.</p>

</div>
</div>
<a id="adf501cbb95ffb7dcd62c8e2e649d1a3f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf501cbb95ffb7dcd62c8e2e649d1a3f">&#9670;&nbsp;</a></span>SynchronizeAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a>&lt;IList&lt;(<a class="el" href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">NotifyType</a> Type, string Message)&gt; &gt; Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SynchronizeAsync </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>synchronizationTask</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>storeId</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronize contacts </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">synchronizationTask</td><td>Whether it's a scheduled synchronization</td></tr>
    <tr><td class="paramname">storeId</td><td>Store identifier; pass 0 to synchronize contacts for all stores</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation The task result contains the list of messages </dd></dl>
<div class="fragment"><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        {</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;            var messages = <span class="keyword">new</span> List&lt;(NotifyType, string)&gt;();</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;            {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                <span class="comment">//whether plugin is configured</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                var sendinblueSettings = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a>.<a class="code" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html#ac5f44acbcb9ac9f8236ea04c2e2eeb83">LoadSettingAsync</a>&lt;SendinblueSettings&gt;();</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrEmpty(sendinblueSettings.ApiKey))</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                {</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                    <span class="comment">//use only passed store identifier for the manual synchronization</span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                    <span class="comment">//use all store ids for the synchronization task</span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                    var storeIds = !synchronizationTask</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                        ? <span class="keyword">new</span> List&lt;int&gt; { storeId }</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                        : <span class="keyword">new</span> List&lt;int&gt; { 0 }.Union((await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4e8b461eca09e6935c7cde5a271c40e1">_storeService</a>.<a class="code" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#a361255e6a21fe5dbcfc5ed5d89c7f4f8">GetAllStoresAsync</a>()).Select(store =&gt; store.Id)).ToList();</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160; </div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                    var importMessages = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">ImportContactsAsync</a>(storeIds);</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                    messages.AddRange(importMessages);</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160; </div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                    var exportMessages = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a7dbd8280cad068c2d23929d377d08b23">ExportContactsAsync</a>(storeIds);</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                    messages.AddRange(exportMessages);</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160; </div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;            }</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;            {</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue synchronization error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                messages.Add((<a class="code" href="namespace_nop_1_1_services_1_1_messages.html#a999a2d5bf9e05abe3c08497a364f8595">NotifyType</a>.Error, $<span class="stringliteral">&quot;Sendinblue synchronization error: {exception.Message}&quot;</span>));</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160; </div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">return</span> messages;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_a7dbd8280cad068c2d23929d377d08b23"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a7dbd8280cad068c2d23929d377d08b23">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ExportContactsAsync</a></div><div class="ttdeci">async Task&lt; IList&lt;(NotifyType Type, string Message)&gt; &gt; ExportContactsAsync(IList&lt; int &gt; storeIds)</div><div class="ttdoc">Export contacts from account to passed stores</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:312</div></div>
<div class="ttc" id="aclass_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager_html_ab1e5fff79ae435d953024eb2a55209da"><div class="ttname"><a href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync</a></div><div class="ttdeci">async Task&lt; IList&lt;(NotifyType Type, string Message)&gt; &gt; ImportContactsAsync(IList&lt; int &gt; storeIds)</div><div class="ttdoc">Import contacts from passed stores to account</div><div class="ttdef"><b>Definition:</b> SendinblueManager.cs:124</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._settingService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4e8b461eca09e6935c7cde5a271c40e1">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._storeService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a7dbd8280cad068c2d23929d377d08b23">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ExportContactsAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html#a361255e6a21fe5dbcfc5ed5d89c7f4f8">Nop.Services.Stores.IStoreService.GetAllStoresAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a> e <a class="el" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html#ac5f44acbcb9ac9f8236ea04c2e2eeb83">Nop.Services.Configuration.ISettingService.LoadSettingAsync()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_synchronization_task.html#a50f20cfe39c88d6151ece8e18ff7c867">Nop.Plugin.Misc.Sendinblue.Services.SynchronizationTask.ExecuteAsync()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#aa634b7ac33b75e48397959775cdd15b4">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.Synchronization()</a>.</p>

</div>
</div>
<a id="afcb2e00c505e7fc962243945b9ea8622"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afcb2e00c505e7fc962243945b9ea8622">&#9670;&nbsp;</a></span>UnsubscribeAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UnsubscribeAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html">NewsLetterSubscription</a>&#160;</td>
          <td class="paramname"><em>subscription</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unsubscribe contact </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">subscription</td><td>Subscription</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>
<div class="fragment"><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        {</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;            {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> ContactsApi(config));</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160; </div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                <span class="comment">//try to get list identifier</span></div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                var key = $<span class="stringliteral">&quot;{nameof(SendinblueSettings)}.{nameof(SendinblueSettings.ListId)}&quot;</span>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                var listId = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a>.GetSettingByKeyAsync&lt;<span class="keywordtype">int</span>&gt;(key, storeId: subscription.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a4a16815f555c6423eb317dbf08b3264f">StoreId</a>);</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                <span class="keywordflow">if</span> (listId == 0)</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                    listId = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a>.GetSettingByKeyAsync&lt;<span class="keywordtype">int</span>&gt;(key);</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="keywordflow">if</span> (listId == 0)</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;                {</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                    await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3cc46af402d1916555ea7a7ae07a361c">WarningAsync</a>($<span class="stringliteral">&quot;Sendinblue synchronization warning: List ID is empty for store #{subscription.StoreId}&quot;</span>);</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160; </div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;                <span class="comment">//update contact</span></div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;                var updateContact = <span class="keyword">new</span> UpdateContact</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;                {</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;                    UnlinkListIds = <span class="keyword">new</span> List&lt;long?&gt; { listId }</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;                };</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                await client.UpdateContactAsync(subscription.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Email</a>, updateContact);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            }</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            {</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            }</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._settingService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a08899b81919c6431da9eb183ed451271">Nop.Core.Domain.Messages.NewsLetterSubscription.Email</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_messages_1_1_news_letter_subscription.html#a4a16815f555c6423eb317dbf08b3264f">Nop.Core.Domain.Messages.NewsLetterSubscription.StoreId</a> e <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3cc46af402d1916555ea7a7ae07a361c">Nop.Services.Logging.ILogger.WarningAsync()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_event_consumer.html#afa4e6bbcb91f74150af5353c523a4215">Nop.Plugin.Misc.Sendinblue.Services.EventConsumer.HandleEventAsync()</a>.</p>

</div>
</div>
<a id="aaa1d28493ef89c36c8247d15a1de2c21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa1d28493ef89c36c8247d15a1de2c21">&#9670;&nbsp;</a></span>UnsubscribeWebhookAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UnsubscribeWebhookAsync </td>
          <td>(</td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>unsubscribeContact</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unsubscribe contact </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">unsubscribeContact</td><td>Contact information</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>
<div class="fragment"><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;        {</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;            {</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;                <span class="comment">//whether plugin is configured</span></div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;                var sendinblueSettings = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">_settingService</a>.<a class="code" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html#ac5f44acbcb9ac9f8236ea04c2e2eeb83">LoadSettingAsync</a>&lt;SendinblueSettings&gt;();</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrEmpty(sendinblueSettings.ApiKey))</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code" href="class_nop_1_1_core_1_1_nop_exception.html">NopException</a>(<span class="stringliteral">&quot;Plugin not configured&quot;</span>);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160; </div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;                <span class="comment">//parse string to JSON object</span></div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;                var unsubscriber = JsonConvert.DeserializeAnonymousType(unsubscribeContact,</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;                    <span class="keyword">new</span> { tag = (<span class="keywordtype">int</span>?)0, email = <span class="keywordtype">string</span>.Empty, date_event = <span class="keywordtype">string</span>.Empty });</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160; </div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;                <span class="comment">//we pass the store identifier in the X-Mailin-Tag at sending emails, now get it here</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;                var storeId = unsubscriber?.tag;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;                <span class="keywordflow">if</span> (!storeId.HasValue)</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160; </div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;                <span class="comment">//get subscription by email and store identifier</span></div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;                var email = unsubscriber?.email;</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;                var subscription = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#af6bebca75bc1227c74b70ca74f39ecd6">_newsLetterSubscriptionService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#a2e30bf69fd3e5d2d8ce113fc350e7d0f">GetNewsLetterSubscriptionByEmailAndStoreIdAsync</a>(email, storeId.Value);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;                <span class="keywordflow">if</span> (subscription == <span class="keyword">null</span>)</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;                    <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160; </div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;                <span class="comment">//update subscription</span></div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;                subscription.Active = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#af6bebca75bc1227c74b70ca74f39ecd6">_newsLetterSubscriptionService</a>.<a class="code" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#a9c1ac1227dcf9ea8f21c545cd8bc7fb9">UpdateNewsLetterSubscriptionAsync</a>(subscription);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3403534c3801b0b06f96d9415ab8de82">InformationAsync</a>($<span class="stringliteral">&quot;Sendinblue unsubscription: email {email}, store #{storeId}, date {unsubscriber?.date_event}&quot;</span>);</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;            }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;            {</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;            }</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        }</div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#af6bebca75bc1227c74b70ca74f39ecd6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._newsLetterSubscriptionService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6ab4a62544bcd93b3e71a4d0c74bc1de">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._settingService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#a2e30bf69fd3e5d2d8ce113fc350e7d0f">Nop.Services.Messages.INewsLetterSubscriptionService.GetNewsLetterSubscriptionByEmailAndStoreIdAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a3403534c3801b0b06f96d9415ab8de82">Nop.Services.Logging.ILogger.InformationAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html#ac5f44acbcb9ac9f8236ea04c2e2eeb83">Nop.Services.Configuration.ISettingService.LoadSettingAsync()</a> e <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html#a9c1ac1227dcf9ea8f21c545cd8bc7fb9">Nop.Services.Messages.INewsLetterSubscriptionService.UpdateNewsLetterSubscriptionAsync()</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_controllers_1_1_sendinblue_controller.html#ab381a15e3a6f6900a0eadbb262f025cd">Nop.Plugin.Misc.Sendinblue.Controllers.SendinblueController.UnsubscribeWebHook()</a>.</p>

</div>
</div>
<a id="abacb075f519d170264e4d704b222799e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abacb075f519d170264e4d704b222799e">&#9670;&nbsp;</a></span>UpdateContactAfterCompletingOrderAsync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async <a class="el" href="_sendinblue_plugin_8cs.html#a9f49374e6bc76a6b5261e5c211d2e63d">Task</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UpdateContactAfterCompletingOrderAsync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html">Order</a>&#160;</td>
          <td class="paramname"><em>order</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update contact after completing order </p>
<dl class="params"><dt>Parâmetros</dt><dd>
  <table class="params">
    <tr><td class="paramname">order</td><td>Order</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Retorna</dt><dd>A task that represents the asynchronous operation</dd></dl>
<div class="fragment"><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;        {</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;            <span class="keywordflow">try</span></div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;            {</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                <span class="keywordflow">if</span> (order is <span class="keyword">null</span>)</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                    <span class="keywordflow">throw</span> <span class="keyword">new</span> ArgumentNullException(nameof(order));</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160; </div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                var customer = await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a786b95982b8815ec2d18c62e08ff2d89">_customerService</a>.<a class="code" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">GetCustomerByIdAsync</a>(order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">CustomerId</a>);</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160; </div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                <span class="comment">//create API client</span></div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                var client = await CreateApiClientAsync(config =&gt; <span class="keyword">new</span> ContactsApi(config));</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160; </div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;                <span class="comment">//update contact</span></div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;                var attributes = <span class="keyword">new</span> Dictionary&lt;string, string&gt;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;                {</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;                    [SendinblueDefaults.IdServiceAttribute] = order.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a>.ToString(),</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;                    [SendinblueDefaults.OrderIdServiceAttribute] = order.<a class="code" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Id</a>.ToString(),</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;                    [SendinblueDefaults.OrderDateServiceAttribute] = order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#ac8c537be82fe4c7c7550efe0c203f03a">PaidDateUtc</a>.ToString(),</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;                    [SendinblueDefaults.OrderTotalServiceAttribute] = order.<a class="code" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a5707771d888f12d4a74e1e2eac82f720">OrderTotal</a>.ToString()</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;                };</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;                var updateContact = <span class="keyword">new</span> UpdateContact { <a class="code" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_reports.html#aa62026900620bb2f70778bcac297c5a8">Attributes</a> = attributes };</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;                await client.UpdateContactAsync(customer.Email, updateContact);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;            }</div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;            <span class="keywordflow">catch</span> (Exception exception)</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;            {</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                <span class="comment">//log full error</span></div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">_logger</a>.<a class="code" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">ErrorAsync</a>($<span class="stringliteral">&quot;Sendinblue error: {exception.Message}.&quot;</span>, exception, await <a class="code" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">_workContext</a>.<a class="code" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">GetCurrentCustomerAsync</a>());</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;            }</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;        }</div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_base_entity_html_a6908f7c042a024f82d7e7947e75bca53"><div class="ttname"><a href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Nop.Core.BaseEntity.Id</a></div><div class="ttdeci">int Id</div><div class="ttdoc">Gets or sets the entity identifier</div><div class="ttdef"><b>Definition:</b> BaseEntity.cs:11</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_a5707771d888f12d4a74e1e2eac82f720"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a5707771d888f12d4a74e1e2eac82f720">Nop.Core.Domain.Orders.Order.OrderTotal</a></div><div class="ttdeci">decimal OrderTotal</div><div class="ttdoc">Gets or sets the order total</div><div class="ttdef"><b>Definition:</b> Order.cs:149</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_ac8c537be82fe4c7c7550efe0c203f03a"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#ac8c537be82fe4c7c7550efe0c203f03a">Nop.Core.Domain.Orders.Order.PaidDateUtc</a></div><div class="ttdeci">DateTime? PaidDateUtc</div><div class="ttdoc">Gets or sets the paid date and time</div><div class="ttdef"><b>Definition:</b> Order.cs:259</div></div>
<div class="ttc" id="aclass_nop_1_1_core_1_1_domain_1_1_orders_1_1_order_html_afc851a198d160f4084e1398b3b4892c3"><div class="ttname"><a href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a></div><div class="ttdeci">int CustomerId</div><div class="ttdoc">Gets or sets the customer identifier</div><div class="ttdef"><b>Definition:</b> Order.cs:29</div></div>
<div class="ttc" id="ainterface_nop_1_1_services_1_1_customers_1_1_i_customer_service_html_a9d2dc587d116a6f656792c4f4cf22e09"><div class="ttname"><a href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync</a></div><div class="ttdeci">Task&lt; Customer &gt; GetCustomerByIdAsync(int customerId)</div><div class="ttdoc">Gets a customer</div></div>
</div><!-- fragment -->
<p class="reference">Referências <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a786b95982b8815ec2d18c62e08ff2d89">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._customerService</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a410eb60dab0f84f26ee690e9694bc184">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ac82b0663fc34ba5f8cc08232cded4d2f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</a>, <a class="el" href="namespace_nop_1_1_web_1_1_areas_1_1_admin_1_1_models_1_1_reports.html#aa62026900620bb2f70778bcac297c5a8">Nop.Web.Areas.Admin.Models.Reports.Attributes</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#afc851a198d160f4084e1398b3b4892c3">Nop.Core.Domain.Orders.Order.CustomerId</a>, <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html#a79f003fceaa9adc00f36f8654be85913">Nop.Services.Logging.ILogger.ErrorAsync()</a>, <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html#a1117b7898ed056459a9ff3f0446bbbe1">Nop.Core.IWorkContext.GetCurrentCustomerAsync()</a>, <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html#a9d2dc587d116a6f656792c4f4cf22e09">Nop.Services.Customers.ICustomerService.GetCustomerByIdAsync()</a>, <a class="el" href="class_nop_1_1_core_1_1_base_entity.html#a6908f7c042a024f82d7e7947e75bca53">Nop.Core.BaseEntity.Id</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#adeb45f37b0e5d005f844620105211e7a">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.IdServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a4e4718b19a8551dc526862dfb6b2d476">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.OrderDateServiceAttribute</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a9f2765d5f65ea17d89590dd3aff8dbbe">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.OrderIdServiceAttribute</a>, <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#a5707771d888f12d4a74e1e2eac82f720">Nop.Core.Domain.Orders.Order.OrderTotal</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_sendinblue_defaults.html#a04b18e9d31ab6e5b7778d041d16ac797">Nop.Plugin.Misc.Sendinblue.SendinblueDefaults.OrderTotalServiceAttribute</a> e <a class="el" href="class_nop_1_1_core_1_1_domain_1_1_orders_1_1_order.html#ac8c537be82fe4c7c7550efe0c203f03a">Nop.Core.Domain.Orders.Order.PaidDateUtc</a>.</p>

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_event_consumer.html#afadd7954d1544a2d988e8b01039bbeac">Nop.Plugin.Misc.Sendinblue.Services.EventConsumer.HandleEventAsync()</a>.</p>

</div>
</div>
<h2 class="groupheader">Documentação dos dados membro</h2>
<a id="a914f23690b1ad8e4cd96e268ee57229b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a914f23690b1ad8e4cd96e268ee57229b">&#9670;&nbsp;</a></span>_actionContextAccessor</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IActionContextAccessor Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._actionContextAccessor</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4964f2bce40ba7efd426803ccd7e4b48">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetUnsubscribeWebHookIdAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a>.</p>

</div>
</div>
<a id="a0ffa30e9d41ec0d7f80e4d29308c8233"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ffa30e9d41ec0d7f80e4d29308c8233">&#9670;&nbsp;</a></span>_countryService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_directory_1_1_i_country_service.html">ICountryService</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._countryService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4d20d54a03c56570cb397256fbb4397c">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SubscribeAsync()</a>.</p>

</div>
</div>
<a id="a786b95982b8815ec2d18c62e08ff2d89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a786b95982b8815ec2d18c62e08ff2d89">&#9670;&nbsp;</a></span>_customerService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_customers_1_1_i_customer_service.html">ICustomerService</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._customerService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4d20d54a03c56570cb397256fbb4397c">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SubscribeAsync()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#abacb075f519d170264e4d704b222799e">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UpdateContactAfterCompletingOrderAsync()</a>.</p>

</div>
</div>
<a id="a5c00e6028e0ca396dd57817a145921b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c00e6028e0ca396dd57817a145921b6">&#9670;&nbsp;</a></span>_emailAccountService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_email_account_service.html">IEmailAccountService</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._emailAccountService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a1787519a1300c8ed4380547bb6a645df">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetEmailAccountIdAsync()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a>.</p>

</div>
</div>
<a id="aba3413a44217dca55a2ee968fb6a7344"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba3413a44217dca55a2ee968fb6a7344">&#9670;&nbsp;</a></span>_genericAttributeService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_common_1_1_i_generic_attribute_service.html">IGenericAttributeService</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._genericAttributeService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4d20d54a03c56570cb397256fbb4397c">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SubscribeAsync()</a>.</p>

</div>
</div>
<a id="a410eb60dab0f84f26ee690e9694bc184"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a410eb60dab0f84f26ee690e9694bc184">&#9670;&nbsp;</a></span>_logger</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_logging_1_1_i_logger.html">ILogger</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._logger</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2b02ae0d9a70e55c42b79eea47dd2618">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.CreateAttibutesAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a7dbd8280cad068c2d23929d377d08b23">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ExportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4923c7480d035edcc3a6183755696035">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetAccountInfoAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a3da4b6c237604daff37b7dd993a692cc">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetAccountLanguageAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a1787519a1300c8ed4380547bb6a645df">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetEmailAccountIdAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6884794daa0a30c620da04fa26c322c4">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetListsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aaf041cb1e69a6d2cb37692f25c2504b6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetQueuedEmailFromTemplateAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a074172dd27114d1a35fb926532cba652">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetSendersAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#afcee3fd593c1b891cbcaf1ee06010083">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetTemplateIdAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4964f2bce40ba7efd426803ccd7e4b48">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetUnsubscribeWebHookIdAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ae20d3092b8da0eb89cd5c3479b9de19c">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.PrepareAttributesAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a113dc650cf974a49fe9e984fce44669a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.PrepareTransactionalAttributesAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4650586c3ba5fc00d8f4e93563e416e6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendSMSAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab77a0d818576557d0ddfe07f4b157de5">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendSMSCampaignAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2e8e7a0ffb51a10e541631ab54e7c10f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SmtpIsEnabledAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4d20d54a03c56570cb397256fbb4397c">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SubscribeAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#adf501cbb95ffb7dcd62c8e2e649d1a3f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SynchronizeAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#afcb2e00c505e7fc962243945b9ea8622">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UnsubscribeAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aaa1d28493ef89c36c8247d15a1de2c21">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UnsubscribeWebhookAsync()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#abacb075f519d170264e4d704b222799e">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UpdateContactAfterCompletingOrderAsync()</a>.</p>

</div>
</div>
<a id="af6bebca75bc1227c74b70ca74f39ecd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6bebca75bc1227c74b70ca74f39ecd6">&#9670;&nbsp;</a></span>_newsLetterSubscriptionService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_messages_1_1_i_news_letter_subscription_service.html">INewsLetterSubscriptionService</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._newsLetterSubscriptionService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a7dbd8280cad068c2d23929d377d08b23">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ExportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aaa1d28493ef89c36c8247d15a1de2c21">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UnsubscribeWebhookAsync()</a>.</p>

</div>
</div>
<a id="a6ab4a62544bcd93b3e71a4d0c74bc1de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ab4a62544bcd93b3e71a4d0c74bc1de">&#9670;&nbsp;</a></span>_settingService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_configuration_1_1_i_setting_service.html">ISettingService</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._settingService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aac08a202413f156ad3b6d934e697e15f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.CreateApiClientAsync&lt; TClient &gt;()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a7dbd8280cad068c2d23929d377d08b23">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ExportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4964f2bce40ba7efd426803ccd7e4b48">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetUnsubscribeWebHookIdAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4650586c3ba5fc00d8f4e93563e416e6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendSMSAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4d20d54a03c56570cb397256fbb4397c">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SubscribeAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#adf501cbb95ffb7dcd62c8e2e649d1a3f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SynchronizeAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#afcb2e00c505e7fc962243945b9ea8622">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UnsubscribeAsync()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aaa1d28493ef89c36c8247d15a1de2c21">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UnsubscribeWebhookAsync()</a>.</p>

</div>
</div>
<a id="a64ceeb0bc1330ce7e10caf79cc28e05f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64ceeb0bc1330ce7e10caf79cc28e05f">&#9670;&nbsp;</a></span>_stateProvinceService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_directory_1_1_i_state_province_service.html">IStateProvinceService</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._stateProvinceService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4d20d54a03c56570cb397256fbb4397c">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SubscribeAsync()</a>.</p>

</div>
</div>
<a id="a4e8b461eca09e6935c7cde5a271c40e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e8b461eca09e6935c7cde5a271c40e1">&#9670;&nbsp;</a></span>_storeService</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_services_1_1_stores_1_1_i_store_service.html">IStoreService</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._storeService</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a7dbd8280cad068c2d23929d377d08b23">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ExportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#adf501cbb95ffb7dcd62c8e2e649d1a3f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SynchronizeAsync()</a>.</p>

</div>
</div>
<a id="ad67cc6bb2af3e7488445dc44fdf20293"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad67cc6bb2af3e7488445dc44fdf20293">&#9670;&nbsp;</a></span>_urlHelperFactory</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly IUrlHelperFactory Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._urlHelperFactory</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4964f2bce40ba7efd426803ccd7e4b48">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetUnsubscribeWebHookIdAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a>.</p>

</div>
</div>
<a id="aef75c004de27abf47b34999a80d8c3ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef75c004de27abf47b34999a80d8c3ca">&#9670;&nbsp;</a></span>_webHelper</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_core_1_1_i_web_helper.html">IWebHelper</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._webHelper</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4964f2bce40ba7efd426803ccd7e4b48">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetUnsubscribeWebHookIdAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a>.</p>

</div>
</div>
<a id="ac82b0663fc34ba5f8cc08232cded4d2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac82b0663fc34ba5f8cc08232cded4d2f">&#9670;&nbsp;</a></span>_workContext</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">readonly <a class="el" href="interface_nop_1_1_core_1_1_i_work_context.html">IWorkContext</a> Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager._workContext</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenciado por <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2b02ae0d9a70e55c42b79eea47dd2618">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.CreateAttibutesAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a7dbd8280cad068c2d23929d377d08b23">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ExportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4923c7480d035edcc3a6183755696035">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetAccountInfoAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a3da4b6c237604daff37b7dd993a692cc">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetAccountLanguageAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a1787519a1300c8ed4380547bb6a645df">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetEmailAccountIdAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a6884794daa0a30c620da04fa26c322c4">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetListsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aaf041cb1e69a6d2cb37692f25c2504b6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetQueuedEmailFromTemplateAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a074172dd27114d1a35fb926532cba652">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetSendersAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#afcee3fd593c1b891cbcaf1ee06010083">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetTemplateIdAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4964f2bce40ba7efd426803ccd7e4b48">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.GetUnsubscribeWebHookIdAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab1e5fff79ae435d953024eb2a55209da">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.ImportContactsAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ae20d3092b8da0eb89cd5c3479b9de19c">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.PrepareAttributesAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a113dc650cf974a49fe9e984fce44669a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.PrepareTransactionalAttributesAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a0a90c1fa54ceaec2e2c7f7c2be53e31a">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendinblueManager()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4650586c3ba5fc00d8f4e93563e416e6">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendSMSAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#ab77a0d818576557d0ddfe07f4b157de5">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SendSMSCampaignAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a2e8e7a0ffb51a10e541631ab54e7c10f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SmtpIsEnabledAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#a4d20d54a03c56570cb397256fbb4397c">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SubscribeAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#adf501cbb95ffb7dcd62c8e2e649d1a3f">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.SynchronizeAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#afcb2e00c505e7fc962243945b9ea8622">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UnsubscribeAsync()</a>, <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#aaa1d28493ef89c36c8247d15a1de2c21">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UnsubscribeWebhookAsync()</a> e <a class="el" href="class_nop_1_1_plugin_1_1_misc_1_1_sendinblue_1_1_services_1_1_sendinblue_manager.html#abacb075f519d170264e4d704b222799e">Nop.Plugin.Misc.Sendinblue.Services.SendinblueManager.UpdateContactAfterCompletingOrderAsync()</a>.</p>

</div>
</div>
<hr/>A documentação para esta classe foi gerada a partir do seguinte ficheiro:<ul>
<li>C:/Users/gabri/Documents/Projetos/GitHub/Estudos/Nopcommercer plugin/nopCommerce_4.40.3_Source - Copia/src/Plugins/Nop.Plugin.Misc.Sendinblue/Services/<a class="el" href="_sendinblue_manager_8cs.html">SendinblueManager.cs</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Gerado por&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
